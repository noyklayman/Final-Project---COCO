function KN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function GN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sS={exports:{}},Vf={},oS={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=Symbol.for("react.element"),QN=Symbol.for("react.portal"),YN=Symbol.for("react.fragment"),ZN=Symbol.for("react.strict_mode"),XN=Symbol.for("react.profiler"),JN=Symbol.for("react.provider"),eO=Symbol.for("react.context"),tO=Symbol.for("react.forward_ref"),nO=Symbol.for("react.suspense"),rO=Symbol.for("react.memo"),iO=Symbol.for("react.lazy"),Jw=Symbol.iterator;function sO(t){return t===null||typeof t!="object"?null:(t=Jw&&t[Jw]||t["@@iterator"],typeof t=="function"?t:null)}var aS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lS=Object.assign,uS={};function Na(t,e,n){this.props=t,this.context=e,this.refs=uS,this.updater=n||aS}Na.prototype.isReactComponent={};Na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cS(){}cS.prototype=Na.prototype;function ly(t,e,n){this.props=t,this.context=e,this.refs=uS,this.updater=n||aS}var uy=ly.prototype=new cS;uy.constructor=ly;lS(uy,Na.prototype);uy.isPureReactComponent=!0;var e1=Array.isArray,hS=Object.prototype.hasOwnProperty,cy={current:null},dS={key:!0,ref:!0,__self:!0,__source:!0};function fS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hS.call(e,r)&&!dS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pc,type:t,key:s,ref:o,props:i,_owner:cy.current}}function oO(t,e){return{$$typeof:pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hy(t){return typeof t=="object"&&t!==null&&t.$$typeof===pc}function aO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var t1=/\/+/g;function lm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aO(""+t.key):e.toString(36)}function Uh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pc:case QN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+lm(o,0):r,e1(i)?(n="",t!=null&&(n=t.replace(t1,"$&/")+"/"),Uh(i,e,n,"",function(c){return c})):i!=null&&(hy(i)&&(i=oO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(t1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",e1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+lm(s,a);o+=Uh(s,e,n,l,i)}else if(l=sO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+lm(s,a++),o+=Uh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ah(t,e,n){if(t==null)return t;var r=[],i=0;return Uh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function lO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},$h={transition:null},uO={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:$h,ReactCurrentOwner:cy};function pS(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:ah,forEach:function(t,e,n){ah(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ah(t,function(){e++}),e},toArray:function(t){return ah(t,function(e){return e})||[]},only:function(t){if(!hy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Na;ye.Fragment=YN;ye.Profiler=XN;ye.PureComponent=ly;ye.StrictMode=ZN;ye.Suspense=nO;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uO;ye.act=pS;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=cy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hS.call(e,l)&&!dS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:pc,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:eO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JN,_context:t},t.Consumer=t};ye.createElement=fS;ye.createFactory=function(t){var e=fS.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:tO,render:t}};ye.isValidElement=hy;ye.lazy=function(t){return{$$typeof:iO,_payload:{_status:-1,_result:t},_init:lO}};ye.memo=function(t,e){return{$$typeof:rO,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=$h.transition;$h.transition={};try{t()}finally{$h.transition=e}};ye.unstable_act=pS;ye.useCallback=function(t,e){return sn.current.useCallback(t,e)};ye.useContext=function(t){return sn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return sn.current.useEffect(t,e)};ye.useId=function(){return sn.current.useId()};ye.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return sn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};ye.useRef=function(t){return sn.current.useRef(t)};ye.useState=function(t){return sn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return sn.current.useTransition()};ye.version="18.3.1";oS.exports=ye;var V=oS.exports;const X=GN(V),cO=KN({__proto__:null,default:X},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hO=V,dO=Symbol.for("react.element"),fO=Symbol.for("react.fragment"),pO=Object.prototype.hasOwnProperty,mO=hO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gO={key:!0,ref:!0,__self:!0,__source:!0};function mS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pO.call(e,r)&&!gO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dO,type:t,key:s,ref:o,props:i,_owner:mO.current}}Vf.Fragment=fO;Vf.jsx=mS;Vf.jsxs=mS;sS.exports=Vf;var x=sS.exports,gS={exports:{}},Sn={},_S={exports:{}},yS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var Z=z.length;z.push(G);e:for(;0<Z;){var de=Z-1>>>1,te=z[de];if(0<i(te,G))z[de]=G,z[Z]=te,Z=de;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],Z=z.pop();if(Z!==G){z[0]=Z;e:for(var de=0,te=z.length,me=te>>>1;de<me;){var Fe=2*(de+1)-1,je=z[Fe],qe=Fe+1,st=z[qe];if(0>i(je,Z))qe<te&&0>i(st,je)?(z[de]=st,z[qe]=Z,de=qe):(z[de]=je,z[Fe]=Z,de=Fe);else if(qe<te&&0>i(st,Z))z[de]=st,z[qe]=Z,de=qe;else break e}}return G}function i(z,G){var Z=z.sortIndex-G.sortIndex;return Z!==0?Z:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,S=!1,R=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=z)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function P(z){if(S=!1,E(z),!y)if(n(l)!==null)y=!0,Qt(O);else{var G=n(c);G!==null&&Me(P,G.startTime-z)}}function O(z,G){y=!1,S&&(S=!1,v(_),_=-1),g=!0;var Z=p;try{for(E(G),d=n(l);d!==null&&(!(d.expirationTime>G)||z&&!b());){var de=d.callback;if(typeof de=="function"){d.callback=null,p=d.priorityLevel;var te=de(d.expirationTime<=G);G=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(l)&&r(l),E(G)}else r(l);d=n(l)}if(d!==null)var me=!0;else{var Fe=n(c);Fe!==null&&Me(P,Fe.startTime-G),me=!1}return me}finally{d=null,p=Z,g=!1}}var M=!1,T=null,_=-1,C=5,k=-1;function b(){return!(t.unstable_now()-k<C)}function N(){if(T!==null){var z=t.unstable_now();k=z;var G=!0;try{G=T(!0,z)}finally{G?A():(M=!1,T=null)}}else M=!1}var A;if(typeof w=="function")A=function(){w(N)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,ct=Se.port2;Se.port1.onmessage=N,A=function(){ct.postMessage(null)}}else A=function(){R(N,0)};function Qt(z){T=z,M||(M=!0,A())}function Me(z,G){_=R(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Qt(O))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var Z=p;p=G;try{return z()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=p;p=z;try{return G()}finally{p=Z}},t.unstable_scheduleCallback=function(z,G,Z){var de=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?de+Z:de):Z=de,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Z+te,z={id:h++,callback:G,priorityLevel:z,startTime:Z,expirationTime:te,sortIndex:-1},Z>de?(z.sortIndex=Z,e(c,z),n(l)===null&&z===n(c)&&(S?(v(_),_=-1):S=!0,Me(P,Z-de))):(z.sortIndex=te,e(l,z),y||g||(y=!0,Qt(O))),z},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(z){var G=p;return function(){var Z=p;p=G;try{return z.apply(this,arguments)}finally{p=Z}}}})(yS);_S.exports=yS;var _O=_S.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO=V,In=_O;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vS=new Set,su={};function no(t,e){ia(t,e),ia(t+"Capture",e)}function ia(t,e){for(su[t]=e,t=0;t<e.length;t++)vS.add(e[t])}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cg=Object.prototype.hasOwnProperty,vO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n1={},r1={};function wO(t){return cg.call(r1,t)?!0:cg.call(n1,t)?!1:vO.test(t)?r1[t]=!0:(n1[t]=!0,!1)}function EO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TO(t,e,n,r){if(e===null||typeof e>"u"||EO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var dy=/[\-:]([a-z])/g;function fy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dy,fy);Nt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dy,fy);Nt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dy,fy);Nt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function py(t,e,n,r){var i=Nt.hasOwnProperty(e)?Nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TO(e,n,i,r)&&(n=null),r||i===null?wO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ii=yO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lh=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),hg=Symbol.for("react.profiler"),wS=Symbol.for("react.provider"),ES=Symbol.for("react.context"),gy=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),fg=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),TS=Symbol.for("react.offscreen"),i1=Symbol.iterator;function ul(t){return t===null||typeof t!="object"?null:(t=i1&&t[i1]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,um;function Tl(t){if(um===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);um=e&&e[1]||""}return`
`+um+t}var cm=!1;function hm(t,e){if(!t||cm)return"";cm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tl(t):""}function IO(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=hm(t.type,!1),t;case 11:return t=hm(t.type.render,!1),t;case 1:return t=hm(t.type,!0),t;default:return""}}function pg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ko:return"Fragment";case Ro:return"Portal";case hg:return"Profiler";case my:return"StrictMode";case dg:return"Suspense";case fg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ES:return(t.displayName||"Context")+".Consumer";case wS:return(t._context.displayName||"Context")+".Provider";case gy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _y:return e=t.displayName||null,e!==null?e:pg(t.type)||"Memo";case yi:e=t._payload,t=t._init;try{return pg(t(e))}catch{}}return null}function SO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pg(e);case 8:return e===my?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CO(t){var e=IS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uh(t){t._valueTracker||(t._valueTracker=CO(t))}function SS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=IS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mg(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CS(t,e){e=e.checked,e!=null&&py(t,"checked",e,!1)}function gg(t,e){CS(t,e);var n=Ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_g(t,e.type,n):e.hasOwnProperty("defaultValue")&&_g(t,e.type,Ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function o1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _g(t,e,n){(e!=="number"||gd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Il=Array.isArray;function Wo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function a1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Il(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ki(n)}}function xS(t,e){var n=Ki(e.value),r=Ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function l1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ch,kS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ch=ch||document.createElement("div"),ch.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ch.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ou(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xO=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(t){xO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ll[e]=Ll[t]})});function AS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ll.hasOwnProperty(t)&&Ll[t]?(""+e).trim():e+"px"}function PS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var RO=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wg(t,e){if(e){if(RO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Eg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tg=null;function yy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ig=null,Ho=null,qo=null;function u1(t){if(t=_c(t)){if(typeof Ig!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Bf(e),Ig(t.stateNode,t.type,e))}}function bS(t){Ho?qo?qo.push(t):qo=[t]:Ho=t}function NS(){if(Ho){var t=Ho,e=qo;if(qo=Ho=null,u1(t),e)for(t=0;t<e.length;t++)u1(e[t])}}function OS(t,e){return t(e)}function DS(){}var dm=!1;function MS(t,e,n){if(dm)return t(e,n);dm=!0;try{return OS(t,e,n)}finally{dm=!1,(Ho!==null||qo!==null)&&(DS(),NS())}}function au(t,e){var n=t.stateNode;if(n===null)return null;var r=Bf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Sg=!1;if(Gr)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Sg=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Sg=!1}function kO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Vl=!1,_d=null,yd=!1,Cg=null,AO={onError:function(t){Vl=!0,_d=t}};function PO(t,e,n,r,i,s,o,a,l){Vl=!1,_d=null,kO.apply(AO,arguments)}function bO(t,e,n,r,i,s,o,a,l){if(PO.apply(this,arguments),Vl){if(Vl){var c=_d;Vl=!1,_d=null}else throw Error(U(198));yd||(yd=!0,Cg=c)}}function ro(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c1(t){if(ro(t)!==t)throw Error(U(188))}function NO(t){var e=t.alternate;if(!e){if(e=ro(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c1(i),t;if(s===r)return c1(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function VS(t){return t=NO(t),t!==null?FS(t):null}function FS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FS(t);if(e!==null)return e;t=t.sibling}return null}var jS=In.unstable_scheduleCallback,h1=In.unstable_cancelCallback,OO=In.unstable_shouldYield,DO=In.unstable_requestPaint,rt=In.unstable_now,MO=In.unstable_getCurrentPriorityLevel,vy=In.unstable_ImmediatePriority,US=In.unstable_UserBlockingPriority,vd=In.unstable_NormalPriority,LO=In.unstable_LowPriority,$S=In.unstable_IdlePriority,Ff=null,dr=null;function VO(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Ff,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:UO,FO=Math.log,jO=Math.LN2;function UO(t){return t>>>=0,t===0?32:31-(FO(t)/jO|0)|0}var hh=64,dh=4194304;function Sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Sl(a):(s&=o,s!==0&&(r=Sl(s)))}else o=n&~i,o!==0?r=Sl(o):s!==0&&(r=Sl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),i=1<<n,r|=t[n],e&=~i;return r}function $O(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Yn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=$O(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function xg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BS(){var t=hh;return hh<<=1,!(hh&4194240)&&(hh=64),t}function fm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function zO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function wy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function zS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WS,Ey,HS,qS,KS,Rg=!1,fh=[],Oi=null,Di=null,Mi=null,lu=new Map,uu=new Map,wi=[],WO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d1(t,e){switch(t){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(e.pointerId)}}function hl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_c(e),e!==null&&Ey(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function HO(t,e,n,r,i){switch(e){case"focusin":return Oi=hl(Oi,t,e,n,r,i),!0;case"dragenter":return Di=hl(Di,t,e,n,r,i),!0;case"mouseover":return Mi=hl(Mi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return lu.set(s,hl(lu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,uu.set(s,hl(uu.get(s)||null,t,e,n,r,i)),!0}return!1}function GS(t){var e=Ts(t.target);if(e!==null){var n=ro(e);if(n!==null){if(e=n.tag,e===13){if(e=LS(n),e!==null){t.blockedOn=e,KS(t.priority,function(){HS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tg=r,n.target.dispatchEvent(r),Tg=null}else return e=_c(n),e!==null&&Ey(e),t.blockedOn=n,!1;e.shift()}return!0}function f1(t,e,n){Bh(t)&&n.delete(e)}function qO(){Rg=!1,Oi!==null&&Bh(Oi)&&(Oi=null),Di!==null&&Bh(Di)&&(Di=null),Mi!==null&&Bh(Mi)&&(Mi=null),lu.forEach(f1),uu.forEach(f1)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Rg||(Rg=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,qO)))}function cu(t){function e(i){return dl(i,t)}if(0<fh.length){dl(fh[0],t);for(var n=1;n<fh.length;n++){var r=fh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Oi!==null&&dl(Oi,t),Di!==null&&dl(Di,t),Mi!==null&&dl(Mi,t),lu.forEach(e),uu.forEach(e),n=0;n<wi.length;n++)r=wi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wi.length&&(n=wi[0],n.blockedOn===null);)GS(n),n.blockedOn===null&&wi.shift()}var Ko=ii.ReactCurrentBatchConfig,Ed=!0;function KO(t,e,n,r){var i=be,s=Ko.transition;Ko.transition=null;try{be=1,Ty(t,e,n,r)}finally{be=i,Ko.transition=s}}function GO(t,e,n,r){var i=be,s=Ko.transition;Ko.transition=null;try{be=4,Ty(t,e,n,r)}finally{be=i,Ko.transition=s}}function Ty(t,e,n,r){if(Ed){var i=kg(t,e,n,r);if(i===null)Im(t,e,r,Td,n),d1(t,r);else if(HO(i,t,e,n,r))r.stopPropagation();else if(d1(t,r),e&4&&-1<WO.indexOf(t)){for(;i!==null;){var s=_c(i);if(s!==null&&WS(s),s=kg(t,e,n,r),s===null&&Im(t,e,r,Td,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Im(t,e,r,null,n)}}var Td=null;function kg(t,e,n,r){if(Td=null,t=yy(r),t=Ts(t),t!==null)if(e=ro(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Td=t,null}function QS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MO()){case vy:return 1;case US:return 4;case vd:case LO:return 16;case $S:return 536870912;default:return 16}default:return 16}}var ki=null,Iy=null,zh=null;function YS(){if(zh)return zh;var t,e=Iy,n=e.length,r,i="value"in ki?ki.value:ki.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return zh=i.slice(t,1<r?1-r:void 0)}function Wh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ph(){return!0}function p1(){return!1}function Cn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ph:p1,this.isPropagationStopped=p1,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ph)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ph)},persist:function(){},isPersistent:ph}),e}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sy=Cn(Oa),gc=Ye({},Oa,{view:0,detail:0}),QO=Cn(gc),pm,mm,fl,jf=Ye({},gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fl&&(fl&&t.type==="mousemove"?(pm=t.screenX-fl.screenX,mm=t.screenY-fl.screenY):mm=pm=0,fl=t),pm)},movementY:function(t){return"movementY"in t?t.movementY:mm}}),m1=Cn(jf),YO=Ye({},jf,{dataTransfer:0}),ZO=Cn(YO),XO=Ye({},gc,{relatedTarget:0}),gm=Cn(XO),JO=Ye({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),eD=Cn(JO),tD=Ye({},Oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nD=Cn(tD),rD=Ye({},Oa,{data:0}),g1=Cn(rD),iD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oD[t])?!!e[t]:!1}function Cy(){return aD}var lD=Ye({},gc,{key:function(t){if(t.key){var e=iD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cy,charCode:function(t){return t.type==="keypress"?Wh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uD=Cn(lD),cD=Ye({},jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_1=Cn(cD),hD=Ye({},gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cy}),dD=Cn(hD),fD=Ye({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),pD=Cn(fD),mD=Ye({},jf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gD=Cn(mD),_D=[9,13,27,32],xy=Gr&&"CompositionEvent"in window,Fl=null;Gr&&"documentMode"in document&&(Fl=document.documentMode);var yD=Gr&&"TextEvent"in window&&!Fl,ZS=Gr&&(!xy||Fl&&8<Fl&&11>=Fl),y1=" ",v1=!1;function XS(t,e){switch(t){case"keyup":return _D.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ao=!1;function vD(t,e){switch(t){case"compositionend":return JS(e);case"keypress":return e.which!==32?null:(v1=!0,y1);case"textInput":return t=e.data,t===y1&&v1?null:t;default:return null}}function wD(t,e){if(Ao)return t==="compositionend"||!xy&&XS(t,e)?(t=YS(),zh=Iy=ki=null,Ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZS&&e.locale!=="ko"?null:e.data;default:return null}}var ED={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ED[t.type]:e==="textarea"}function eC(t,e,n,r){bS(r),e=Id(e,"onChange"),0<e.length&&(n=new Sy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jl=null,hu=null;function TD(t){hC(t,0)}function Uf(t){var e=No(t);if(SS(e))return t}function ID(t,e){if(t==="change")return e}var tC=!1;if(Gr){var _m;if(Gr){var ym="oninput"in document;if(!ym){var E1=document.createElement("div");E1.setAttribute("oninput","return;"),ym=typeof E1.oninput=="function"}_m=ym}else _m=!1;tC=_m&&(!document.documentMode||9<document.documentMode)}function T1(){jl&&(jl.detachEvent("onpropertychange",nC),hu=jl=null)}function nC(t){if(t.propertyName==="value"&&Uf(hu)){var e=[];eC(e,hu,t,yy(t)),MS(TD,e)}}function SD(t,e,n){t==="focusin"?(T1(),jl=e,hu=n,jl.attachEvent("onpropertychange",nC)):t==="focusout"&&T1()}function CD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uf(hu)}function xD(t,e){if(t==="click")return Uf(e)}function RD(t,e){if(t==="input"||t==="change")return Uf(e)}function kD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:kD;function du(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cg.call(e,i)||!tr(t[i],e[i]))return!1}return!0}function I1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S1(t,e){var n=I1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=I1(n)}}function rC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iC(){for(var t=window,e=gd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gd(t.document)}return e}function Ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AD(t){var e=iC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rC(n.ownerDocument.documentElement,n)){if(r!==null&&Ry(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=S1(n,s);var o=S1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PD=Gr&&"documentMode"in document&&11>=document.documentMode,Po=null,Ag=null,Ul=null,Pg=!1;function C1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pg||Po==null||Po!==gd(r)||(r=Po,"selectionStart"in r&&Ry(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ul&&du(Ul,r)||(Ul=r,r=Id(Ag,"onSelect"),0<r.length&&(e=new Sy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function mh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:mh("Animation","AnimationEnd"),animationiteration:mh("Animation","AnimationIteration"),animationstart:mh("Animation","AnimationStart"),transitionend:mh("Transition","TransitionEnd")},vm={},sC={};Gr&&(sC=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function $f(t){if(vm[t])return vm[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sC)return vm[t]=e[n];return t}var oC=$f("animationend"),aC=$f("animationiteration"),lC=$f("animationstart"),uC=$f("transitionend"),cC=new Map,x1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(t,e){cC.set(t,e),no(e,[t])}for(var wm=0;wm<x1.length;wm++){var Em=x1[wm],bD=Em.toLowerCase(),ND=Em[0].toUpperCase()+Em.slice(1);os(bD,"on"+ND)}os(oC,"onAnimationEnd");os(aC,"onAnimationIteration");os(lC,"onAnimationStart");os("dblclick","onDoubleClick");os("focusin","onFocus");os("focusout","onBlur");os(uC,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function R1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bO(r,e,void 0,t),t.currentTarget=null}function hC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;R1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;R1(i,a,c),s=l}}}if(yd)throw t=Cg,yd=!1,Cg=null,t}function $e(t,e){var n=e[Mg];n===void 0&&(n=e[Mg]=new Set);var r=t+"__bubble";n.has(r)||(dC(e,t,2,!1),n.add(r))}function Tm(t,e,n){var r=0;e&&(r|=4),dC(n,t,r,e)}var gh="_reactListening"+Math.random().toString(36).slice(2);function fu(t){if(!t[gh]){t[gh]=!0,vS.forEach(function(n){n!=="selectionchange"&&(OD.has(n)||Tm(n,!1,t),Tm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gh]||(e[gh]=!0,Tm("selectionchange",!1,e))}}function dC(t,e,n,r){switch(QS(e)){case 1:var i=KO;break;case 4:i=GO;break;default:i=Ty}n=i.bind(null,e,n,t),i=void 0,!Sg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Im(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ts(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}MS(function(){var c=s,h=yy(n),d=[];e:{var p=cC.get(t);if(p!==void 0){var g=Sy,y=t;switch(t){case"keypress":if(Wh(n)===0)break e;case"keydown":case"keyup":g=uD;break;case"focusin":y="focus",g=gm;break;case"focusout":y="blur",g=gm;break;case"beforeblur":case"afterblur":g=gm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=m1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ZO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=dD;break;case oC:case aC:case lC:g=eD;break;case uC:g=pD;break;case"scroll":g=QO;break;case"wheel":g=gD;break;case"copy":case"cut":case"paste":g=nD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_1}var S=(e&4)!==0,R=!S&&t==="scroll",v=S?p!==null?p+"Capture":null:p;S=[];for(var w=c,E;w!==null;){E=w;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,v!==null&&(P=au(w,v),P!=null&&S.push(pu(w,P,E)))),R)break;w=w.return}0<S.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Tg&&(y=n.relatedTarget||n.fromElement)&&(Ts(y)||y[Qr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Ts(y):null,y!==null&&(R=ro(y),y!==R||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(S=m1,P="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(S=_1,P="onPointerLeave",v="onPointerEnter",w="pointer"),R=g==null?p:No(g),E=y==null?p:No(y),p=new S(P,w+"leave",g,n,h),p.target=R,p.relatedTarget=E,P=null,Ts(h)===c&&(S=new S(v,w+"enter",y,n,h),S.target=E,S.relatedTarget=R,P=S),R=P,g&&y)t:{for(S=g,v=y,w=0,E=S;E;E=yo(E))w++;for(E=0,P=v;P;P=yo(P))E++;for(;0<w-E;)S=yo(S),w--;for(;0<E-w;)v=yo(v),E--;for(;w--;){if(S===v||v!==null&&S===v.alternate)break t;S=yo(S),v=yo(v)}S=null}else S=null;g!==null&&k1(d,p,g,S,!1),y!==null&&R!==null&&k1(d,R,y,S,!0)}}e:{if(p=c?No(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var O=ID;else if(w1(p))if(tC)O=RD;else{O=CD;var M=SD}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=xD);if(O&&(O=O(t,c))){eC(d,O,n,h);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&_g(p,"number",p.value)}switch(M=c?No(c):window,t){case"focusin":(w1(M)||M.contentEditable==="true")&&(Po=M,Ag=c,Ul=null);break;case"focusout":Ul=Ag=Po=null;break;case"mousedown":Pg=!0;break;case"contextmenu":case"mouseup":case"dragend":Pg=!1,C1(d,n,h);break;case"selectionchange":if(PD)break;case"keydown":case"keyup":C1(d,n,h)}var T;if(xy)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ao?XS(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(ZS&&n.locale!=="ko"&&(Ao||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ao&&(T=YS()):(ki=h,Iy="value"in ki?ki.value:ki.textContent,Ao=!0)),M=Id(c,_),0<M.length&&(_=new g1(_,t,null,n,h),d.push({event:_,listeners:M}),T?_.data=T:(T=JS(n),T!==null&&(_.data=T)))),(T=yD?vD(t,n):wD(t,n))&&(c=Id(c,"onBeforeInput"),0<c.length&&(h=new g1("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=T))}hC(d,e)})}function pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Id(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=au(t,n),s!=null&&r.unshift(pu(t,s,i)),s=au(t,e),s!=null&&r.push(pu(t,s,i))),t=t.return}return r}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function k1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=au(n,s),l!=null&&o.unshift(pu(n,l,a))):i||(l=au(n,s),l!=null&&o.push(pu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DD=/\r\n?/g,MD=/\u0000|\uFFFD/g;function A1(t){return(typeof t=="string"?t:""+t).replace(DD,`
`).replace(MD,"")}function _h(t,e,n){if(e=A1(e),A1(t)!==e&&n)throw Error(U(425))}function Sd(){}var bg=null,Ng=null;function Og(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dg=typeof setTimeout=="function"?setTimeout:void 0,LD=typeof clearTimeout=="function"?clearTimeout:void 0,P1=typeof Promise=="function"?Promise:void 0,VD=typeof queueMicrotask=="function"?queueMicrotask:typeof P1<"u"?function(t){return P1.resolve(null).then(t).catch(FD)}:Dg;function FD(t){setTimeout(function(){throw t})}function Sm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),cu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);cu(e)}function Li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Da=Math.random().toString(36).slice(2),ar="__reactFiber$"+Da,mu="__reactProps$"+Da,Qr="__reactContainer$"+Da,Mg="__reactEvents$"+Da,jD="__reactListeners$"+Da,UD="__reactHandles$"+Da;function Ts(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b1(t);t!==null;){if(n=t[ar])return n;t=b1(t)}return e}t=n,n=t.parentNode}return null}function _c(t){return t=t[ar]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function No(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Bf(t){return t[mu]||null}var Lg=[],Oo=-1;function as(t){return{current:t}}function We(t){0>Oo||(t.current=Lg[Oo],Lg[Oo]=null,Oo--)}function Ve(t,e){Oo++,Lg[Oo]=t.current,t.current=e}var Gi={},Ht=as(Gi),cn=as(!1),js=Gi;function sa(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hn(t){return t=t.childContextTypes,t!=null}function Cd(){We(cn),We(Ht)}function N1(t,e,n){if(Ht.current!==Gi)throw Error(U(168));Ve(Ht,e),Ve(cn,n)}function fC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,SO(t)||"Unknown",i));return Ye({},n,r)}function xd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,js=Ht.current,Ve(Ht,t),Ve(cn,cn.current),!0}function O1(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=fC(t,e,js),r.__reactInternalMemoizedMergedChildContext=t,We(cn),We(Ht),Ve(Ht,t)):We(cn),Ve(cn,n)}var Mr=null,zf=!1,Cm=!1;function pC(t){Mr===null?Mr=[t]:Mr.push(t)}function $D(t){zf=!0,pC(t)}function ls(){if(!Cm&&Mr!==null){Cm=!0;var t=0,e=be;try{var n=Mr;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mr=null,zf=!1}catch(i){throw Mr!==null&&(Mr=Mr.slice(t+1)),jS(vy,ls),i}finally{be=e,Cm=!1}}return null}var Do=[],Mo=0,Rd=null,kd=0,Pn=[],bn=0,Us=null,Lr=1,Vr="";function ys(t,e){Do[Mo++]=kd,Do[Mo++]=Rd,Rd=t,kd=e}function mC(t,e,n){Pn[bn++]=Lr,Pn[bn++]=Vr,Pn[bn++]=Us,Us=t;var r=Lr;t=Vr;var i=32-Yn(r)-1;r&=~(1<<i),n+=1;var s=32-Yn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Lr=1<<32-Yn(e)+i|n<<i|r,Vr=s+t}else Lr=1<<s|n<<i|r,Vr=t}function ky(t){t.return!==null&&(ys(t,1),mC(t,1,0))}function Ay(t){for(;t===Rd;)Rd=Do[--Mo],Do[Mo]=null,kd=Do[--Mo],Do[Mo]=null;for(;t===Us;)Us=Pn[--bn],Pn[bn]=null,Vr=Pn[--bn],Pn[bn]=null,Lr=Pn[--bn],Pn[bn]=null}var En=null,vn=null,He=!1,zn=null;function gC(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function D1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,vn=Li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:Lr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,vn=null,!0):!1;default:return!1}}function Vg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fg(t){if(He){var e=vn;if(e){var n=e;if(!D1(t,e)){if(Vg(t))throw Error(U(418));e=Li(n.nextSibling);var r=En;e&&D1(t,e)?gC(r,n):(t.flags=t.flags&-4097|2,He=!1,En=t)}}else{if(Vg(t))throw Error(U(418));t.flags=t.flags&-4097|2,He=!1,En=t}}}function M1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function yh(t){if(t!==En)return!1;if(!He)return M1(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Og(t.type,t.memoizedProps)),e&&(e=vn)){if(Vg(t))throw _C(),Error(U(418));for(;e;)gC(t,e),e=Li(e.nextSibling)}if(M1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=En?Li(t.stateNode.nextSibling):null;return!0}function _C(){for(var t=vn;t;)t=Li(t.nextSibling)}function oa(){vn=En=null,He=!1}function Py(t){zn===null?zn=[t]:zn.push(t)}var BD=ii.ReactCurrentBatchConfig;function pl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function vh(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L1(t){var e=t._init;return e(t._payload)}function yC(t){function e(v,w){if(t){var E=v.deletions;E===null?(v.deletions=[w],v.flags|=16):E.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Ui(v,w),v.index=0,v.sibling=null,v}function s(v,w,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<w?(v.flags|=2,w):E):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,E,P){return w===null||w.tag!==6?(w=Nm(E,v.mode,P),w.return=v,w):(w=i(w,E),w.return=v,w)}function l(v,w,E,P){var O=E.type;return O===ko?h(v,w,E.props.children,P,E.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===yi&&L1(O)===w.type)?(P=i(w,E.props),P.ref=pl(v,w,E),P.return=v,P):(P=Zh(E.type,E.key,E.props,null,v.mode,P),P.ref=pl(v,w,E),P.return=v,P)}function c(v,w,E,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Om(E,v.mode,P),w.return=v,w):(w=i(w,E.children||[]),w.return=v,w)}function h(v,w,E,P,O){return w===null||w.tag!==7?(w=bs(E,v.mode,P,O),w.return=v,w):(w=i(w,E),w.return=v,w)}function d(v,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nm(""+w,v.mode,E),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lh:return E=Zh(w.type,w.key,w.props,null,v.mode,E),E.ref=pl(v,null,w),E.return=v,E;case Ro:return w=Om(w,v.mode,E),w.return=v,w;case yi:var P=w._init;return d(v,P(w._payload),E)}if(Il(w)||ul(w))return w=bs(w,v.mode,E,null),w.return=v,w;vh(v,w)}return null}function p(v,w,E,P){var O=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:a(v,w,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lh:return E.key===O?l(v,w,E,P):null;case Ro:return E.key===O?c(v,w,E,P):null;case yi:return O=E._init,p(v,w,O(E._payload),P)}if(Il(E)||ul(E))return O!==null?null:h(v,w,E,P,null);vh(v,E)}return null}function g(v,w,E,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(E)||null,a(w,v,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case lh:return v=v.get(P.key===null?E:P.key)||null,l(w,v,P,O);case Ro:return v=v.get(P.key===null?E:P.key)||null,c(w,v,P,O);case yi:var M=P._init;return g(v,w,E,M(P._payload),O)}if(Il(P)||ul(P))return v=v.get(E)||null,h(w,v,P,O,null);vh(w,P)}return null}function y(v,w,E,P){for(var O=null,M=null,T=w,_=w=0,C=null;T!==null&&_<E.length;_++){T.index>_?(C=T,T=null):C=T.sibling;var k=p(v,T,E[_],P);if(k===null){T===null&&(T=C);break}t&&T&&k.alternate===null&&e(v,T),w=s(k,w,_),M===null?O=k:M.sibling=k,M=k,T=C}if(_===E.length)return n(v,T),He&&ys(v,_),O;if(T===null){for(;_<E.length;_++)T=d(v,E[_],P),T!==null&&(w=s(T,w,_),M===null?O=T:M.sibling=T,M=T);return He&&ys(v,_),O}for(T=r(v,T);_<E.length;_++)C=g(T,v,_,E[_],P),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?_:C.key),w=s(C,w,_),M===null?O=C:M.sibling=C,M=C);return t&&T.forEach(function(b){return e(v,b)}),He&&ys(v,_),O}function S(v,w,E,P){var O=ul(E);if(typeof O!="function")throw Error(U(150));if(E=O.call(E),E==null)throw Error(U(151));for(var M=O=null,T=w,_=w=0,C=null,k=E.next();T!==null&&!k.done;_++,k=E.next()){T.index>_?(C=T,T=null):C=T.sibling;var b=p(v,T,k.value,P);if(b===null){T===null&&(T=C);break}t&&T&&b.alternate===null&&e(v,T),w=s(b,w,_),M===null?O=b:M.sibling=b,M=b,T=C}if(k.done)return n(v,T),He&&ys(v,_),O;if(T===null){for(;!k.done;_++,k=E.next())k=d(v,k.value,P),k!==null&&(w=s(k,w,_),M===null?O=k:M.sibling=k,M=k);return He&&ys(v,_),O}for(T=r(v,T);!k.done;_++,k=E.next())k=g(T,v,_,k.value,P),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?_:k.key),w=s(k,w,_),M===null?O=k:M.sibling=k,M=k);return t&&T.forEach(function(N){return e(v,N)}),He&&ys(v,_),O}function R(v,w,E,P){if(typeof E=="object"&&E!==null&&E.type===ko&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case lh:e:{for(var O=E.key,M=w;M!==null;){if(M.key===O){if(O=E.type,O===ko){if(M.tag===7){n(v,M.sibling),w=i(M,E.props.children),w.return=v,v=w;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===yi&&L1(O)===M.type){n(v,M.sibling),w=i(M,E.props),w.ref=pl(v,M,E),w.return=v,v=w;break e}n(v,M);break}else e(v,M);M=M.sibling}E.type===ko?(w=bs(E.props.children,v.mode,P,E.key),w.return=v,v=w):(P=Zh(E.type,E.key,E.props,null,v.mode,P),P.ref=pl(v,w,E),P.return=v,v=P)}return o(v);case Ro:e:{for(M=E.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(v,w.sibling),w=i(w,E.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Om(E,v.mode,P),w.return=v,v=w}return o(v);case yi:return M=E._init,R(v,w,M(E._payload),P)}if(Il(E))return y(v,w,E,P);if(ul(E))return S(v,w,E,P);vh(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,E),w.return=v,v=w):(n(v,w),w=Nm(E,v.mode,P),w.return=v,v=w),o(v)):n(v,w)}return R}var aa=yC(!0),vC=yC(!1),Ad=as(null),Pd=null,Lo=null,by=null;function Ny(){by=Lo=Pd=null}function Oy(t){var e=Ad.current;We(Ad),t._currentValue=e}function jg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Go(t,e){Pd=t,by=Lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(by!==t)if(t={context:t,memoizedValue:e,next:null},Lo===null){if(Pd===null)throw Error(U(308));Lo=t,Pd.dependencies={lanes:0,firstContext:t}}else Lo=Lo.next=t;return e}var Is=null;function Dy(t){Is===null?Is=[t]:Is.push(t)}function wC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yr(t,r)}function Yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vi=!1;function My(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yr(t,n)}return i=r.interleaved,i===null?(e.next=e,Dy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yr(t,n)}function Hh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}function V1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bd(t,e,n,r){var i=t.updateQueue;vi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,S=a;switch(p=e,g=n,S.tag){case 1:if(y=S.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=Ye({},d,p);break e;case 2:vi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Bs|=o,t.lanes=o,t.memoizedState=d}}function F1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var yc={},fr=as(yc),gu=as(yc),_u=as(yc);function Ss(t){if(t===yc)throw Error(U(174));return t}function Ly(t,e){switch(Ve(_u,e),Ve(gu,t),Ve(fr,yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vg(e,t)}We(fr),Ve(fr,e)}function la(){We(fr),We(gu),We(_u)}function TC(t){Ss(_u.current);var e=Ss(fr.current),n=vg(e,t.type);e!==n&&(Ve(gu,t),Ve(fr,n))}function Vy(t){gu.current===t&&(We(fr),We(gu))}var Ge=as(0);function Nd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xm=[];function Fy(){for(var t=0;t<xm.length;t++)xm[t]._workInProgressVersionPrimary=null;xm.length=0}var qh=ii.ReactCurrentDispatcher,Rm=ii.ReactCurrentBatchConfig,$s=0,Qe=null,ht=null,vt=null,Od=!1,$l=!1,yu=0,zD=0;function Vt(){throw Error(U(321))}function jy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function Uy(t,e,n,r,i,s){if($s=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qh.current=t===null||t.memoizedState===null?KD:GD,t=n(r,i),$l){s=0;do{if($l=!1,yu=0,25<=s)throw Error(U(301));s+=1,vt=ht=null,e.updateQueue=null,qh.current=QD,t=n(r,i)}while($l)}if(qh.current=Dd,e=ht!==null&&ht.next!==null,$s=0,vt=ht=Qe=null,Od=!1,e)throw Error(U(300));return t}function $y(){var t=yu!==0;return yu=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Qe.memoizedState=vt=t:vt=vt.next=t,vt}function Vn(){if(ht===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=vt===null?Qe.memoizedState:vt.next;if(e!==null)vt=e,ht=t;else{if(t===null)throw Error(U(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},vt===null?Qe.memoizedState=vt=t:vt=vt.next=t}return vt}function vu(t,e){return typeof e=="function"?e(t):e}function km(t){var e=Vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if(($s&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Qe.lanes|=h,Bs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,tr(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qe.lanes|=s,Bs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Am(t){var e=Vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);tr(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function IC(){}function SC(t,e){var n=Qe,r=Vn(),i=e(),s=!tr(r.memoizedState,i);if(s&&(r.memoizedState=i,ln=!0),r=r.queue,By(RC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,wu(9,xC.bind(null,n,r,i,e),void 0,null),Tt===null)throw Error(U(349));$s&30||CC(n,e,i)}return i}function CC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xC(t,e,n,r){e.value=n,e.getSnapshot=r,kC(e)&&AC(t)}function RC(t,e,n){return n(function(){kC(e)&&AC(t)})}function kC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function AC(t){var e=Yr(t,1);e!==null&&Zn(e,t,1,-1)}function j1(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:t},e.queue=t,t=t.dispatch=qD.bind(null,Qe,t),[e.memoizedState,t]}function wu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PC(){return Vn().memoizedState}function Kh(t,e,n,r){var i=sr();Qe.flags|=t,i.memoizedState=wu(1|e,n,void 0,r===void 0?null:r)}function Wf(t,e,n,r){var i=Vn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&jy(r,o.deps)){i.memoizedState=wu(e,n,s,r);return}}Qe.flags|=t,i.memoizedState=wu(1|e,n,s,r)}function U1(t,e){return Kh(8390656,8,t,e)}function By(t,e){return Wf(2048,8,t,e)}function bC(t,e){return Wf(4,2,t,e)}function NC(t,e){return Wf(4,4,t,e)}function OC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DC(t,e,n){return n=n!=null?n.concat([t]):null,Wf(4,4,OC.bind(null,e,t),n)}function zy(){}function MC(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function LC(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VC(t,e,n){return $s&21?(tr(n,e)||(n=BS(),Qe.lanes|=n,Bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function WD(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Rm.transition;Rm.transition={};try{t(!1),e()}finally{be=n,Rm.transition=r}}function FC(){return Vn().memoizedState}function HD(t,e,n){var r=ji(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jC(t))UC(e,n);else if(n=wC(t,e,n,r),n!==null){var i=nn();Zn(n,t,r,i),$C(n,e,r)}}function qD(t,e,n){var r=ji(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jC(t))UC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,tr(a,o)){var l=e.interleaved;l===null?(i.next=i,Dy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=wC(t,e,i,r),n!==null&&(i=nn(),Zn(n,t,r,i),$C(n,e,r))}}function jC(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function UC(t,e){$l=Od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $C(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}var Dd={readContext:Ln,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},KD={readContext:Ln,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:U1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kh(4194308,4,OC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kh(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HD.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:j1,useDebugValue:zy,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=j1(!1),e=t[0];return t=WD.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,i=sr();if(He){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Tt===null)throw Error(U(349));$s&30||CC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,U1(RC.bind(null,r,s,t),[t]),r.flags|=2048,wu(9,xC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sr(),e=Tt.identifierPrefix;if(He){var n=Vr,r=Lr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GD={readContext:Ln,useCallback:MC,useContext:Ln,useEffect:By,useImperativeHandle:DC,useInsertionEffect:bC,useLayoutEffect:NC,useMemo:LC,useReducer:km,useRef:PC,useState:function(){return km(vu)},useDebugValue:zy,useDeferredValue:function(t){var e=Vn();return VC(e,ht.memoizedState,t)},useTransition:function(){var t=km(vu)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:IC,useSyncExternalStore:SC,useId:FC,unstable_isNewReconciler:!1},QD={readContext:Ln,useCallback:MC,useContext:Ln,useEffect:By,useImperativeHandle:DC,useInsertionEffect:bC,useLayoutEffect:NC,useMemo:LC,useReducer:Am,useRef:PC,useState:function(){return Am(vu)},useDebugValue:zy,useDeferredValue:function(t){var e=Vn();return ht===null?e.memoizedState=t:VC(e,ht.memoizedState,t)},useTransition:function(){var t=Am(vu)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:IC,useSyncExternalStore:SC,useId:FC,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ug(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hf={isMounted:function(t){return(t=t._reactInternals)?ro(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),i=ji(t),s=Br(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vi(t,s,i),e!==null&&(Zn(e,t,i,r),Hh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),i=ji(t),s=Br(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vi(t,s,i),e!==null&&(Zn(e,t,i,r),Hh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=ji(t),i=Br(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vi(t,i,r),e!==null&&(Zn(e,t,r,n),Hh(e,t,r))}};function $1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!du(n,r)||!du(i,s):!0}function BC(t,e,n){var r=!1,i=Gi,s=e.contextType;return typeof s=="object"&&s!==null?s=Ln(s):(i=hn(e)?js:Ht.current,r=e.contextTypes,s=(r=r!=null)?sa(t,i):Gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function B1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hf.enqueueReplaceState(e,e.state,null)}function $g(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},My(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ln(s):(s=hn(e)?js:Ht.current,i.context=sa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ug(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Hf.enqueueReplaceState(i,i.state,null),bd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ua(t,e){try{var n="",r=e;do n+=IO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YD=typeof WeakMap=="function"?WeakMap:Map;function zC(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ld||(Ld=!0,Xg=r),Bg(t,e)},n}function WC(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bg(t,e),typeof r!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function z1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=c2.bind(null,t,e,n),e.then(t,t))}function W1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Vi(n,e,1))),n.lanes|=1),t)}var ZD=ii.ReactCurrentOwner,ln=!1;function Xt(t,e,n,r){e.child=t===null?vC(e,null,n,r):aa(e,t.child,n,r)}function q1(t,e,n,r,i){n=n.render;var s=e.ref;return Go(e,i),r=Uy(t,e,n,r,s,i),n=$y(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(He&&n&&ky(e),e.flags|=1,Xt(t,e,r,i),e.child)}function K1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Zy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,HC(t,e,s,r,i)):(t=Zh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:du,n(o,r)&&t.ref===e.ref)return Zr(t,e,i)}return e.flags|=1,t=Ui(s,r),t.ref=e.ref,t.return=e,e.child=t}function HC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(du(s,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Zr(t,e,i)}return zg(t,e,n,r,i)}function qC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Fo,_n),_n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Fo,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(Fo,_n),_n|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(Fo,_n),_n|=r;return Xt(t,e,i,n),e.child}function KC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zg(t,e,n,r,i){var s=hn(n)?js:Ht.current;return s=sa(e,s),Go(e,i),n=Uy(t,e,n,r,s,i),r=$y(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(He&&r&&ky(e),e.flags|=1,Xt(t,e,n,i),e.child)}function G1(t,e,n,r,i){if(hn(n)){var s=!0;xd(e)}else s=!1;if(Go(e,i),e.stateNode===null)Gh(t,e),BC(e,n,r),$g(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=hn(n)?js:Ht.current,c=sa(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&B1(e,o,r,c),vi=!1;var p=e.memoizedState;o.state=p,bd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||cn.current||vi?(typeof h=="function"&&(Ug(e,n,h,r),l=e.memoizedState),(a=vi||$1(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,EC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$n(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ln(l):(l=hn(n)?js:Ht.current,l=sa(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&B1(e,o,r,l),vi=!1,p=e.memoizedState,o.state=p,bd(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||cn.current||vi?(typeof g=="function"&&(Ug(e,n,g,r),y=e.memoizedState),(c=vi||$1(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Wg(t,e,n,r,s,i)}function Wg(t,e,n,r,i,s){KC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&O1(e,n,!1),Zr(t,e,s);r=e.stateNode,ZD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=aa(e,t.child,null,s),e.child=aa(e,null,a,s)):Xt(t,e,a,s),e.memoizedState=r.state,i&&O1(e,n,!0),e.child}function GC(t){var e=t.stateNode;e.pendingContext?N1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N1(t,e.context,!1),Ly(t,e.containerInfo)}function Q1(t,e,n,r,i){return oa(),Py(i),e.flags|=256,Xt(t,e,n,r),e.child}var Hg={dehydrated:null,treeContext:null,retryLane:0};function qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function QC(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(Ge,i&1),t===null)return Fg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gf(o,r,0,null),t=bs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qg(n),e.memoizedState=Hg,t):Wy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return XD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ui(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ui(a,s):(s=bs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hg,r}return s=t.child,t=s.sibling,r=Ui(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wy(t,e){return e=Gf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wh(t,e,n,r){return r!==null&&Py(r),aa(e,t.child,null,n),t=Wy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Pm(Error(U(422))),wh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Gf({mode:"visible",children:r.children},i,0,null),s=bs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&aa(e,t.child,null,o),e.child.memoizedState=qg(o),e.memoizedState=Hg,s);if(!(e.mode&1))return wh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=Pm(s,r,void 0),wh(t,e,o,r)}if(a=(o&t.childLanes)!==0,ln||a){if(r=Tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yr(t,i),Zn(r,t,i,-1))}return Yy(),r=Pm(Error(U(421))),wh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=h2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vn=Li(i.nextSibling),En=e,He=!0,zn=null,t!==null&&(Pn[bn++]=Lr,Pn[bn++]=Vr,Pn[bn++]=Us,Lr=t.id,Vr=t.overflow,Us=e),e=Wy(e,r.children),e.flags|=4096,e)}function Y1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jg(t.return,e,n)}function bm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function YC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Y1(t,n,e);else if(t.tag===19)Y1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),bm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}bm(e,!0,n,null,s);break;case"together":bm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ui(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ui(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JD(t,e,n){switch(e.tag){case 3:GC(e),oa();break;case 5:TC(e);break;case 1:hn(e.type)&&xd(e);break;case 4:Ly(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(Ad,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?QC(t,e,n):(Ve(Ge,Ge.current&1),t=Zr(t,e,n),t!==null?t.sibling:null);Ve(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return YC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,qC(t,e,n)}return Zr(t,e,n)}var ZC,Kg,XC,JC;ZC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kg=function(){};XC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ss(fr.current);var s=null;switch(n){case"input":i=mg(t,i),r=mg(t,r),s=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),s=[];break;case"textarea":i=yg(t,i),r=yg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sd)}wg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(su.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(su.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$e("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};JC=function(t,e,n,r){n!==r&&(e.flags|=4)};function ml(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function e2(t,e,n){var r=e.pendingProps;switch(Ay(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return hn(e.type)&&Cd(),Ft(e),null;case 3:return r=e.stateNode,la(),We(cn),We(Ht),Fy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(t_(zn),zn=null))),Kg(t,e),Ft(e),null;case 5:Vy(e);var i=Ss(_u.current);if(n=e.type,t!==null&&e.stateNode!=null)XC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ft(e),null}if(t=Ss(fr.current),yh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ar]=e,r[mu]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<Cl.length;i++)$e(Cl[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":s1(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":a1(r,s),$e("invalid",r)}wg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&_h(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_h(r.textContent,a,t),i=["children",""+a]):su.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":uh(r),o1(r,s,!0);break;case"textarea":uh(r),l1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[mu]=r,ZC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Eg(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<Cl.length;i++)$e(Cl[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":s1(t,r),i=mg(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),$e("invalid",t);break;case"textarea":a1(t,r),i=yg(t,r),$e("invalid",t);break;default:i=r}wg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ou(t,l):typeof l=="number"&&ou(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(su.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$e("scroll",t):l!=null&&py(t,s,l,o))}switch(n){case"input":uh(t),o1(t,r,!1);break;case"textarea":uh(t),l1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Sd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)JC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ss(_u.current),Ss(fr.current),yh(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(s=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:_h(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_h(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Ft(e),null;case 13:if(We(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&vn!==null&&e.mode&1&&!(e.flags&128))_C(),oa(),e.flags|=98560,s=!1;else if(s=yh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[ar]=e}else oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),s=!1}else zn!==null&&(t_(zn),zn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?mt===0&&(mt=3):Yy())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return la(),Kg(t,e),t===null&&fu(e.stateNode.containerInfo),Ft(e),null;case 10:return Oy(e.type._context),Ft(e),null;case 17:return hn(e.type)&&Cd(),Ft(e),null;case 19:if(We(Ge),s=e.memoizedState,s===null)return Ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ml(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nd(t),o!==null){for(e.flags|=128,ml(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>ca&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ml(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Ft(e),null}else 2*rt()-s.renderingStartTime>ca&&n!==1073741824&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Ve(Ge,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Qy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function t2(t,e){switch(Ay(e),e.tag){case 1:return hn(e.type)&&Cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return la(),We(cn),We(Ht),Fy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vy(e),null;case 13:if(We(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ge),null;case 4:return la(),null;case 10:return Oy(e.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var Eh=!1,Bt=!1,n2=typeof WeakSet=="function"?WeakSet:Set,K=null;function Vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Gg(t,e,n){try{n()}catch(r){Je(t,e,r)}}var Z1=!1;function r2(t,e){if(bg=Ed,t=iC(),Ry(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ng={focusedElem:t,selectionRange:n},Ed=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,R=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?S:$n(e.type,S),R);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(P){Je(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return y=Z1,Z1=!1,y}function Bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gg(e,n,s)}i=i.next}while(i!==r)}}function qf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ex(t){var e=t.alternate;e!==null&&(t.alternate=null,ex(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[mu],delete e[Mg],delete e[jD],delete e[UD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tx(t){return t.tag===5||t.tag===3||t.tag===4}function X1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sd));else if(r!==4&&(t=t.child,t!==null))for(Yg(t,e,n),t=t.sibling;t!==null;)Yg(t,e,n),t=t.sibling}function Zg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zg(t,e,n),t=t.sibling;t!==null;)Zg(t,e,n),t=t.sibling}var xt=null,Bn=!1;function fi(t,e,n){for(n=n.child;n!==null;)nx(t,e,n),n=n.sibling}function nx(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Ff,n)}catch{}switch(n.tag){case 5:Bt||Vo(n,e);case 6:var r=xt,i=Bn;xt=null,fi(t,e,n),xt=r,Bn=i,xt!==null&&(Bn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Bn?(t=xt,n=n.stateNode,t.nodeType===8?Sm(t.parentNode,n):t.nodeType===1&&Sm(t,n),cu(t)):Sm(xt,n.stateNode));break;case 4:r=xt,i=Bn,xt=n.stateNode.containerInfo,Bn=!0,fi(t,e,n),xt=r,Bn=i;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gg(n,e,o),i=i.next}while(i!==r)}fi(t,e,n);break;case 1:if(!Bt&&(Vo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}fi(t,e,n);break;case 21:fi(t,e,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,fi(t,e,n),Bt=r):fi(t,e,n);break;default:fi(t,e,n)}}function J1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new n2),e.forEach(function(r){var i=d2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,Bn=!1;break e;case 3:xt=a.stateNode.containerInfo,Bn=!0;break e;case 4:xt=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(xt===null)throw Error(U(160));nx(s,o,i),xt=null,Bn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rx(e,t),e=e.sibling}function rx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),ir(t),r&4){try{Bl(3,t,t.return),qf(3,t)}catch(S){Je(t,t.return,S)}try{Bl(5,t,t.return)}catch(S){Je(t,t.return,S)}}break;case 1:Un(e,t),ir(t),r&512&&n!==null&&Vo(n,n.return);break;case 5:if(Un(e,t),ir(t),r&512&&n!==null&&Vo(n,n.return),t.flags&32){var i=t.stateNode;try{ou(i,"")}catch(S){Je(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CS(i,s),Eg(a,o);var c=Eg(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?PS(i,d):h==="dangerouslySetInnerHTML"?kS(i,d):h==="children"?ou(i,d):py(i,h,d,c)}switch(a){case"input":gg(i,s);break;case"textarea":xS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Wo(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Wo(i,!!s.multiple,s.defaultValue,!0):Wo(i,!!s.multiple,s.multiple?[]:"",!1))}i[mu]=s}catch(S){Je(t,t.return,S)}}break;case 6:if(Un(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Je(t,t.return,S)}}break;case 3:if(Un(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cu(e.containerInfo)}catch(S){Je(t,t.return,S)}break;case 4:Un(e,t),ir(t);break;case 13:Un(e,t),ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ky=rt())),r&4&&J1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(c=Bt)||h,Un(e,t),Bt=c):Un(e,t),ir(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(d=K=h;K!==null;){switch(p=K,g=p.child,p.tag){case 0:case 11:case 14:case 15:Bl(4,p,p.return);break;case 1:Vo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){Je(r,n,S)}}break;case 5:Vo(p,p.return);break;case 22:if(p.memoizedState!==null){tE(d);continue}}g!==null?(g.return=p,K=g):tE(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AS("display",o))}catch(S){Je(t,t.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){Je(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Un(e,t),ir(t),r&4&&J1(t);break;case 21:break;default:Un(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tx(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ou(i,""),r.flags&=-33);var s=X1(t);Zg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=X1(t);Yg(t,a,o);break;default:throw Error(U(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i2(t,e,n){K=t,ix(t)}function ix(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Eh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Bt;a=Eh;var c=Bt;if(Eh=o,(Bt=l)&&!c)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?nE(i):l!==null?(l.return=o,K=l):nE(i);for(;s!==null;)K=s,ix(s),s=s.sibling;K=i,Eh=a,Bt=c}eE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):eE(t)}}function eE(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||qf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&F1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}F1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&cu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Bt||e.flags&512&&Qg(e)}catch(p){Je(e,e.return,p)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function tE(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function nE(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qf(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Je(e,i,l)}}var s=e.return;try{Qg(e)}catch(l){Je(e,s,l)}break;case 5:var o=e.return;try{Qg(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var s2=Math.ceil,Md=ii.ReactCurrentDispatcher,Hy=ii.ReactCurrentOwner,Dn=ii.ReactCurrentBatchConfig,xe=0,Tt=null,lt=null,Pt=0,_n=0,Fo=as(0),mt=0,Eu=null,Bs=0,Kf=0,qy=0,zl=null,an=null,Ky=0,ca=1/0,Or=null,Ld=!1,Xg=null,Fi=null,Th=!1,Ai=null,Vd=0,Wl=0,Jg=null,Qh=-1,Yh=0;function nn(){return xe&6?rt():Qh!==-1?Qh:Qh=rt()}function ji(t){return t.mode&1?xe&2&&Pt!==0?Pt&-Pt:BD.transition!==null?(Yh===0&&(Yh=BS()),Yh):(t=be,t!==0||(t=window.event,t=t===void 0?16:QS(t.type)),t):1}function Zn(t,e,n,r){if(50<Wl)throw Wl=0,Jg=null,Error(U(185));mc(t,n,r),(!(xe&2)||t!==Tt)&&(t===Tt&&(!(xe&2)&&(Kf|=n),mt===4&&Ei(t,Pt)),dn(t,r),n===1&&xe===0&&!(e.mode&1)&&(ca=rt()+500,zf&&ls()))}function dn(t,e){var n=t.callbackNode;BO(t,e);var r=wd(t,t===Tt?Pt:0);if(r===0)n!==null&&h1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&h1(n),e===1)t.tag===0?$D(rE.bind(null,t)):pC(rE.bind(null,t)),VD(function(){!(xe&6)&&ls()}),n=null;else{switch(zS(r)){case 1:n=vy;break;case 4:n=US;break;case 16:n=vd;break;case 536870912:n=$S;break;default:n=vd}n=dx(n,sx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sx(t,e){if(Qh=-1,Yh=0,xe&6)throw Error(U(327));var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var r=wd(t,t===Tt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fd(t,r);else{e=r;var i=xe;xe|=2;var s=ax();(Tt!==t||Pt!==e)&&(Or=null,ca=rt()+500,Ps(t,e));do try{l2();break}catch(a){ox(t,a)}while(!0);Ny(),Md.current=s,xe=i,lt!==null?e=0:(Tt=null,Pt=0,e=mt)}if(e!==0){if(e===2&&(i=xg(t),i!==0&&(r=i,e=e_(t,i))),e===1)throw n=Eu,Ps(t,0),Ei(t,r),dn(t,rt()),n;if(e===6)Ei(t,r);else{if(i=t.current.alternate,!(r&30)&&!o2(i)&&(e=Fd(t,r),e===2&&(s=xg(t),s!==0&&(r=s,e=e_(t,s))),e===1))throw n=Eu,Ps(t,0),Ei(t,r),dn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:vs(t,an,Or);break;case 3:if(Ei(t,r),(r&130023424)===r&&(e=Ky+500-rt(),10<e)){if(wd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Dg(vs.bind(null,t,an,Or),e);break}vs(t,an,Or);break;case 4:if(Ei(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Yn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*s2(r/1960))-r,10<r){t.timeoutHandle=Dg(vs.bind(null,t,an,Or),r);break}vs(t,an,Or);break;case 5:vs(t,an,Or);break;default:throw Error(U(329))}}}return dn(t,rt()),t.callbackNode===n?sx.bind(null,t):null}function e_(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(Ps(t,e).flags|=256),t=Fd(t,e),t!==2&&(e=an,an=n,e!==null&&t_(e)),t}function t_(t){an===null?an=t:an.push.apply(an,t)}function o2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ei(t,e){for(e&=~qy,e&=~Kf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function rE(t){if(xe&6)throw Error(U(327));Qo();var e=wd(t,0);if(!(e&1))return dn(t,rt()),null;var n=Fd(t,e);if(t.tag!==0&&n===2){var r=xg(t);r!==0&&(e=r,n=e_(t,r))}if(n===1)throw n=Eu,Ps(t,0),Ei(t,e),dn(t,rt()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vs(t,an,Or),dn(t,rt()),null}function Gy(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(ca=rt()+500,zf&&ls())}}function zs(t){Ai!==null&&Ai.tag===0&&!(xe&6)&&Qo();var e=xe;xe|=1;var n=Dn.transition,r=be;try{if(Dn.transition=null,be=1,t)return t()}finally{be=r,Dn.transition=n,xe=e,!(xe&6)&&ls()}}function Qy(){_n=Fo.current,We(Fo)}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LD(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Ay(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cd();break;case 3:la(),We(cn),We(Ht),Fy();break;case 5:Vy(r);break;case 4:la();break;case 13:We(Ge);break;case 19:We(Ge);break;case 10:Oy(r.type._context);break;case 22:case 23:Qy()}n=n.return}if(Tt=t,lt=t=Ui(t.current,null),Pt=_n=e,mt=0,Eu=null,qy=Kf=Bs=0,an=zl=null,Is!==null){for(e=0;e<Is.length;e++)if(n=Is[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return t}function ox(t,e){do{var n=lt;try{if(Ny(),qh.current=Dd,Od){for(var r=Qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Od=!1}if($s=0,vt=ht=Qe=null,$l=!1,yu=0,Hy.current=null,n===null||n.return===null){mt=1,Eu=e,lt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=W1(o);if(g!==null){g.flags&=-257,H1(g,o,a,s,e),g.mode&1&&z1(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var S=new Set;S.add(l),e.updateQueue=S}else y.add(l);break e}else{if(!(e&1)){z1(s,c,e),Yy();break e}l=Error(U(426))}}else if(He&&a.mode&1){var R=W1(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),H1(R,o,a,s,e),Py(ua(l,a));break e}}s=l=ua(l,a),mt!==4&&(mt=2),zl===null?zl=[s]:zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=zC(s,l,e);V1(s,v);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Fi===null||!Fi.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=WC(s,a,e);V1(s,P);break e}}s=s.return}while(s!==null)}ux(n)}catch(O){e=O,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function ax(){var t=Md.current;return Md.current=Dd,t===null?Dd:t}function Yy(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(Bs&268435455)&&!(Kf&268435455)||Ei(Tt,Pt)}function Fd(t,e){var n=xe;xe|=2;var r=ax();(Tt!==t||Pt!==e)&&(Or=null,Ps(t,e));do try{a2();break}catch(i){ox(t,i)}while(!0);if(Ny(),xe=n,Md.current=r,lt!==null)throw Error(U(261));return Tt=null,Pt=0,mt}function a2(){for(;lt!==null;)lx(lt)}function l2(){for(;lt!==null&&!OO();)lx(lt)}function lx(t){var e=hx(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?ux(t):lt=e,Hy.current=null}function ux(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=t2(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,lt=null;return}}else if(n=e2(n,e,_n),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);mt===0&&(mt=5)}function vs(t,e,n){var r=be,i=Dn.transition;try{Dn.transition=null,be=1,u2(t,e,n,r)}finally{Dn.transition=i,be=r}return null}function u2(t,e,n,r){do Qo();while(Ai!==null);if(xe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zO(t,s),t===Tt&&(lt=Tt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Th||(Th=!0,dx(vd,function(){return Qo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dn.transition,Dn.transition=null;var o=be;be=1;var a=xe;xe|=4,Hy.current=null,r2(t,n),rx(n,t),AD(Ng),Ed=!!bg,Ng=bg=null,t.current=n,i2(n),DO(),xe=a,be=o,Dn.transition=s}else t.current=n;if(Th&&(Th=!1,Ai=t,Vd=i),s=t.pendingLanes,s===0&&(Fi=null),VO(n.stateNode),dn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ld)throw Ld=!1,t=Xg,Xg=null,t;return Vd&1&&t.tag!==0&&Qo(),s=t.pendingLanes,s&1?t===Jg?Wl++:(Wl=0,Jg=t):Wl=0,ls(),null}function Qo(){if(Ai!==null){var t=zS(Vd),e=Dn.transition,n=be;try{if(Dn.transition=null,be=16>t?16:t,Ai===null)var r=!1;else{if(t=Ai,Ai=null,Vd=0,xe&6)throw Error(U(331));var i=xe;for(xe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Bl(8,h,s)}var d=h.child;if(d!==null)d.return=h,K=d;else for(;K!==null;){h=K;var p=h.sibling,g=h.return;if(ex(h),h===c){K=null;break}if(p!==null){p.return=g,K=p;break}K=g}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var R=S.sibling;S.sibling=null,S=R}while(S!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,K=v;break e}K=s.return}}var w=t.current;for(K=w;K!==null;){o=K;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,K=E;else e:for(o=w;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qf(9,a)}}catch(O){Je(a,a.return,O)}if(a===o){K=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,K=P;break e}K=a.return}}if(xe=i,ls(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Ff,t)}catch{}r=!0}return r}finally{be=n,Dn.transition=e}}return!1}function iE(t,e,n){e=ua(n,e),e=zC(t,e,1),t=Vi(t,e,1),e=nn(),t!==null&&(mc(t,1,e),dn(t,e))}function Je(t,e,n){if(t.tag===3)iE(t,t,n);else for(;e!==null;){if(e.tag===3){iE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fi===null||!Fi.has(r))){t=ua(n,t),t=WC(e,t,1),e=Vi(e,t,1),t=nn(),e!==null&&(mc(e,1,t),dn(e,t));break}}e=e.return}}function c2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Pt&n)===n&&(mt===4||mt===3&&(Pt&130023424)===Pt&&500>rt()-Ky?Ps(t,0):qy|=n),dn(t,e)}function cx(t,e){e===0&&(t.mode&1?(e=dh,dh<<=1,!(dh&130023424)&&(dh=4194304)):e=1);var n=nn();t=Yr(t,e),t!==null&&(mc(t,e,n),dn(t,n))}function h2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cx(t,n)}function d2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),cx(t,n)}var hx;hx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,JD(t,e,n);ln=!!(t.flags&131072)}else ln=!1,He&&e.flags&1048576&&mC(e,kd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gh(t,e),t=e.pendingProps;var i=sa(e,Ht.current);Go(e,n),i=Uy(null,e,r,t,i,n);var s=$y();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(s=!0,xd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,My(e),i.updater=Hf,e.stateNode=i,i._reactInternals=e,$g(e,r,t,n),e=Wg(null,e,r,!0,s,n)):(e.tag=0,He&&s&&ky(e),Xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=p2(r),t=$n(r,t),i){case 0:e=zg(null,e,r,t,n);break e;case 1:e=G1(null,e,r,t,n);break e;case 11:e=q1(null,e,r,t,n);break e;case 14:e=K1(null,e,r,$n(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),zg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),G1(t,e,r,i,n);case 3:e:{if(GC(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,EC(t,e),bd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ua(Error(U(423)),e),e=Q1(t,e,r,n,i);break e}else if(r!==i){i=ua(Error(U(424)),e),e=Q1(t,e,r,n,i);break e}else for(vn=Li(e.stateNode.containerInfo.firstChild),En=e,He=!0,zn=null,n=vC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oa(),r===i){e=Zr(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return TC(e),t===null&&Fg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Og(r,i)?o=null:s!==null&&Og(r,s)&&(e.flags|=32),KC(t,e),Xt(t,e,o,n),e.child;case 6:return t===null&&Fg(e),null;case 13:return QC(t,e,n);case 4:return Ly(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=aa(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),q1(t,e,r,i,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(Ad,r._currentValue),r._currentValue=o,s!==null)if(tr(s.value,o)){if(s.children===i.children&&!cn.current){e=Zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Br(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Go(e,n),i=Ln(i),r=r(i),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,i=$n(r,e.pendingProps),i=$n(r.type,i),K1(t,e,r,i,n);case 15:return HC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),Gh(t,e),e.tag=1,hn(r)?(t=!0,xd(e)):t=!1,Go(e,n),BC(e,r,i),$g(e,r,i,n),Wg(null,e,r,!0,t,n);case 19:return YC(t,e,n);case 22:return qC(t,e,n)}throw Error(U(156,e.tag))};function dx(t,e){return jS(t,e)}function f2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new f2(t,e,n,r)}function Zy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p2(t){if(typeof t=="function")return Zy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gy)return 11;if(t===_y)return 14}return 2}function Ui(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Zy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ko:return bs(n.children,i,s,e);case my:o=8,i|=8;break;case hg:return t=On(12,n,e,i|2),t.elementType=hg,t.lanes=s,t;case dg:return t=On(13,n,e,i),t.elementType=dg,t.lanes=s,t;case fg:return t=On(19,n,e,i),t.elementType=fg,t.lanes=s,t;case TS:return Gf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wS:o=10;break e;case ES:o=9;break e;case gy:o=11;break e;case _y:o=14;break e;case yi:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=On(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bs(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function Gf(t,e,n,r){return t=On(22,t,r,e),t.elementType=TS,t.lanes=n,t.stateNode={isHidden:!1},t}function Nm(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function Om(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function m2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fm(0),this.expirationTimes=fm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xy(t,e,n,r,i,s,o,a,l){return t=new m2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=On(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},My(s),t}function g2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fx(t){if(!t)return Gi;t=t._reactInternals;e:{if(ro(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(hn(n))return fC(t,n,e)}return e}function px(t,e,n,r,i,s,o,a,l){return t=Xy(n,r,!0,t,i,s,o,a,l),t.context=fx(null),n=t.current,r=nn(),i=ji(n),s=Br(r,i),s.callback=e??null,Vi(n,s,i),t.current.lanes=i,mc(t,i,r),dn(t,r),t}function Qf(t,e,n,r){var i=e.current,s=nn(),o=ji(i);return n=fx(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vi(i,e,o),t!==null&&(Zn(t,i,o,s),Hh(t,i,o)),o}function jd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jy(t,e){sE(t,e),(t=t.alternate)&&sE(t,e)}function _2(){return null}var mx=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}Yf.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Qf(t,e,null,null)};Yf.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){Qf(null,t,null,null)}),e[Qr]=null}};function Yf(t){this._internalRoot=t}Yf.prototype.unstable_scheduleHydration=function(t){if(t){var e=qS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wi.length&&e!==0&&e<wi[n].priority;n++);wi.splice(n,0,t),n===0&&GS(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oE(){}function y2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=jd(o);s.call(c)}}var o=px(e,r,t,0,null,!1,!1,"",oE);return t._reactRootContainer=o,t[Qr]=o.current,fu(t.nodeType===8?t.parentNode:t),zs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=jd(l);a.call(c)}}var l=Xy(t,0,!1,null,null,!1,!1,"",oE);return t._reactRootContainer=l,t[Qr]=l.current,fu(t.nodeType===8?t.parentNode:t),zs(function(){Qf(e,l,n,r)}),l}function Xf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jd(o);a.call(l)}}Qf(e,o,t,i)}else o=y2(n,e,t,i,r);return jd(o)}WS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sl(e.pendingLanes);n!==0&&(wy(e,n|1),dn(e,rt()),!(xe&6)&&(ca=rt()+500,ls()))}break;case 13:zs(function(){var r=Yr(t,1);if(r!==null){var i=nn();Zn(r,t,1,i)}}),Jy(t,1)}};Ey=function(t){if(t.tag===13){var e=Yr(t,134217728);if(e!==null){var n=nn();Zn(e,t,134217728,n)}Jy(t,134217728)}};HS=function(t){if(t.tag===13){var e=ji(t),n=Yr(t,e);if(n!==null){var r=nn();Zn(n,t,e,r)}Jy(t,e)}};qS=function(){return be};KS=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Ig=function(t,e,n){switch(e){case"input":if(gg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bf(r);if(!i)throw Error(U(90));SS(r),gg(r,i)}}}break;case"textarea":xS(t,n);break;case"select":e=n.value,e!=null&&Wo(t,!!n.multiple,e,!1)}};OS=Gy;DS=zs;var v2={usingClientEntryPoint:!1,Events:[_c,No,Bf,bS,NS,Gy]},gl={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w2={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VS(t),t===null?null:t.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||_2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{Ff=Ih.inject(w2),dr=Ih}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v2;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error(U(200));return g2(t,e,null,n)};Sn.createRoot=function(t,e){if(!tv(t))throw Error(U(299));var n=!1,r="",i=mx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xy(t,1,!1,null,null,n,!1,r,i),t[Qr]=e.current,fu(t.nodeType===8?t.parentNode:t),new ev(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=VS(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return zs(t)};Sn.hydrate=function(t,e,n){if(!Zf(e))throw Error(U(200));return Xf(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!tv(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=px(e,null,t,1,n??null,i,!1,s,o),t[Qr]=e.current,fu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Yf(e)};Sn.render=function(t,e,n){if(!Zf(e))throw Error(U(200));return Xf(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Zf(t))throw Error(U(40));return t._reactRootContainer?(zs(function(){Xf(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};Sn.unstable_batchedUpdates=Gy;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zf(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Xf(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gx)}catch(t){console.error(t)}}gx(),gS.exports=Sn;var E2=gS.exports,_x,aE=E2;_x=aE.createRoot,aE.hydrateRoot;const yx=V.createContext(null);function T2(t){const[e,n]=X.useState(void 0);return x.jsx(yx.Provider,{value:{chosenItem:e,setOpen:n},children:t.children})}function vx(){const t=X.useContext(yx);if(!t)throw new Error("useExtrasModalContext must be used within a ExtrasModalContextProvider");return t}const wx=X.createContext(null),I2=({children:t})=>{const[e,n]=V.useState(!1);return x.jsx(wx.Provider,{value:{loading:e,setLoading:n},children:t})},nv=()=>{const t=X.useContext(wx);if(!t)throw new Error("Spinner context not provided");return t};function Ex(){const{loading:t}=nv();return x.jsx("div",{className:`spinner ${t?"loading":"idle"}`})}var lE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(t,e){if(!t)throw Ma(e)},Ma=function(t){return new Error("Firebase Database ("+Tx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},S2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ix(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):S2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new C2;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sx=function(t){const e=Ix(t);return rv.encodeByteArray(e,!0)},Ud=function(t){return Sx(t).replace(/\./g,"")},$d=function(t){try{return rv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){return Cx(void 0,t)}function Cx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!R2(n)||(t[n]=Cx(t[n],e[n]));return t}function R2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=()=>k2().__FIREBASE_DEFAULTS__,P2=()=>{if(typeof process>"u"||typeof lE>"u")return;const t=lE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},b2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$d(t[1]);return e&&JSON.parse(e)},Jf=()=>{try{return A2()||P2()||b2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xx=t=>{var e,n;return(n=(e=Jf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rx=t=>{const e=xx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kx=()=>{var t;return(t=Jf())===null||t===void 0?void 0:t.config},Ax=t=>{var e;return(e=Jf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ud(JSON.stringify(n)),Ud(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function N2(){var t;const e=(t=Jf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D2(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nx(){return Tx.NODE_ADMIN===!0}function M2(){return!N2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L2(){try{return typeof indexedDB=="object"}catch{return!1}}function V2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=F2,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?j2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new si(i,a,r)}}function j2(t,e){return t.replace(U2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const U2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return JSON.parse(t)}function dt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Tu($d(s[0])||""),n=Tu($d(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},$2=function(t){const e=Ox(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},B2=function(t){const e=Ox(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ha(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function n_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function zd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(uE(s)&&uE(o)){if(!zd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Rl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function W2(t,e){const n=new H2(t,e);return n.subscribe.bind(n)}class H2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");q2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dm),i.error===void 0&&(i.error=Dm),i.complete===void 0&&(i.complete=Dm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dm(){}function sv(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,B(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ep;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y2(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q2(t){return t===ws?void 0:t}function Y2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new G2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const X2={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},J2=ve.INFO,eM={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},tM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class np{constructor(e){this.name=e,this._logLevel=J2,this._logHandler=tM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const nM=(t,e)=>e.some(n=>t instanceof n);let cE,hE;function rM(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iM(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dx=new WeakMap,r_=new WeakMap,Mx=new WeakMap,Mm=new WeakMap,ov=new WeakMap;function sM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n($i(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dx.set(n,t)}).catch(()=>{}),ov.set(e,t),e}function oM(t){if(r_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});r_.set(t,e)}let i_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return r_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aM(t){i_=t(i_)}function lM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lm(this),e,...n);return Mx.set(r,e.sort?e.sort():[e]),$i(r)}:iM().includes(t)?function(...e){return t.apply(Lm(this),e),$i(Dx.get(this))}:function(...e){return $i(t.apply(Lm(this),e))}}function uM(t){return typeof t=="function"?lM(t):(t instanceof IDBTransaction&&oM(t),nM(t,rM())?new Proxy(t,i_):t)}function $i(t){if(t instanceof IDBRequest)return sM(t);if(Mm.has(t))return Mm.get(t);const e=uM(t);return e!==t&&(Mm.set(t,e),ov.set(e,t)),e}const Lm=t=>ov.get(t);function cM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=$i(o);return r&&o.addEventListener("upgradeneeded",l=>{r($i(o.result),l.oldVersion,l.newVersion,$i(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const hM=["get","getKey","getAll","getAllKeys","count"],dM=["put","add","delete","clear"],Vm=new Map;function dE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hM.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Vm.set(e,s),s}aM(t=>({...t,get:(e,n,r)=>dE(e,n)||t.get(e,n,r),has:(e,n)=>!!dE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const s_="@firebase/app",fE="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new np("@firebase/app"),mM="@firebase/app-compat",gM="@firebase/analytics-compat",_M="@firebase/analytics",yM="@firebase/app-check-compat",vM="@firebase/app-check",wM="@firebase/auth",EM="@firebase/auth-compat",TM="@firebase/database",IM="@firebase/database-compat",SM="@firebase/functions",CM="@firebase/functions-compat",xM="@firebase/installations",RM="@firebase/installations-compat",kM="@firebase/messaging",AM="@firebase/messaging-compat",PM="@firebase/performance",bM="@firebase/performance-compat",NM="@firebase/remote-config",OM="@firebase/remote-config-compat",DM="@firebase/storage",MM="@firebase/storage-compat",LM="@firebase/firestore",VM="@firebase/vertexai-preview",FM="@firebase/firestore-compat",jM="firebase",UM="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="[DEFAULT]",$M={[s_]:"fire-core",[mM]:"fire-core-compat",[_M]:"fire-analytics",[gM]:"fire-analytics-compat",[vM]:"fire-app-check",[yM]:"fire-app-check-compat",[wM]:"fire-auth",[EM]:"fire-auth-compat",[TM]:"fire-rtdb",[IM]:"fire-rtdb-compat",[SM]:"fire-fn",[CM]:"fire-fn-compat",[xM]:"fire-iid",[RM]:"fire-iid-compat",[kM]:"fire-fcm",[AM]:"fire-fcm-compat",[PM]:"fire-perf",[bM]:"fire-perf-compat",[NM]:"fire-rc",[OM]:"fire-rc-compat",[DM]:"fire-gcs",[MM]:"fire-gcs-compat",[LM]:"fire-fst",[FM]:"fire-fst-compat",[VM]:"fire-vertex","fire-js":"fire-js",[jM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Map,BM=new Map,a_=new Map;function pE(t,e){try{t.container.addComponent(e)}catch(n){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ws(t){const e=t.name;if(a_.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;a_.set(e,t);for(const n of Wd.values())pE(n,t);for(const n of BM.values())pE(n,t);return!0}function rp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ur(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new vc("app","Firebase",zM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=UM;function Lx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:o_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bi.create("bad-app-name",{appName:String(i)});if(n||(n=kx()),!n)throw Bi.create("no-options");const s=Wd.get(i);if(s){if(zd(n,s.options)&&zd(r,s.config))return s;throw Bi.create("duplicate-app",{appName:i})}const o=new Z2(i);for(const l of a_.values())o.addComponent(l);const a=new WM(n,r,o);return Wd.set(i,a),a}function av(t=o_){const e=Wd.get(t);if(!e&&t===o_&&kx())return Lx();if(!e)throw Bi.create("no-app",{appName:t});return e}function pr(t,e,n){var r;let i=(r=$M[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(a.join(" "));return}Ws(new Qi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="firebase-heartbeat-database",qM=1,Iu="firebase-heartbeat-store";let Fm=null;function Vx(){return Fm||(Fm=cM(HM,qM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Iu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bi.create("idb-open",{originalErrorMessage:t.message})})),Fm}async function KM(t){try{const n=(await Vx()).transaction(Iu),r=await n.objectStore(Iu).get(Fx(t));return await n.done,r}catch(e){if(e instanceof si)Xr.warn(e.message);else{const n=Bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(n.message)}}}async function mE(t,e){try{const r=(await Vx()).transaction(Iu,"readwrite");await r.objectStore(Iu).put(e,Fx(t)),await r.done}catch(n){if(n instanceof si)Xr.warn(n.message);else{const r=Bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xr.warn(r.message)}}}function Fx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=1024,QM=30*24*60*60*1e3;class YM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gE();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=QM}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Xr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gE(),{heartbeatsToSend:r,unsentEntries:i}=ZM(this._heartbeatsCache.heartbeats),s=Ud(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xr.warn(n),""}}}function gE(){return new Date().toISOString().substring(0,10)}function ZM(t,e=GM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_E(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_E(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L2()?V2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _E(t){return Ud(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){Ws(new Qi("platform-logger",e=>new fM(e),"PRIVATE")),Ws(new Qi("heartbeat",e=>new YM(e),"PRIVATE")),pr(s_,fE,t),pr(s_,fE,"esm2017"),pr("fire-js","")}JM("");var eL="firebase",tL="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(eL,tL,"app");function lv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function jx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nL=jx,Ux=new vc("auth","Firebase",jx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new np("@firebase/auth");function rL(t,...e){Hd.logLevel<=ve.WARN&&Hd.warn(`Auth (${io}): ${t}`,...e)}function Xh(t,...e){Hd.logLevel<=ve.ERROR&&Hd.error(`Auth (${io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,...e){throw uv(t,...e)}function mr(t,...e){return uv(t,...e)}function $x(t,e,n){const r=Object.assign(Object.assign({},nL()),{[e]:n});return new vc("auth","Firebase",r).create(e,{appName:t.name})}function zr(t){return $x(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ux.create(t,...e)}function se(t,e,...n){if(!t)throw uv(e,...n)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xh(e),new Error(e)}function Jr(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iL(){return yE()==="http:"||yE()==="https:"}function yE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iL()||O2()||"connection"in navigator)?navigator.onLine:!0}function oL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=iv()||bx()}get(){return sL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t,e){Jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new wc(3e4,6e4);function us(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cs(t,e,n,r,i={}){return zx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=La(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Bx.fetch()(Wx(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function zx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aL),e);try{const i=new cL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Sh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Sh(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $x(t,h,c);nr(t,h)}}catch(i){if(i instanceof si)throw i;nr(t,"network-request-failed",{message:String(i)})}}async function Ec(t,e,n,r,i={}){const s=await cs(t,e,n,r,i);return"mfaPendingCredential"in s&&nr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Wx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?cv(t.config,i):`${t.config.apiScheme}://${i}`}function uL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),lL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mr(t,e,r);return i.customData._tokenResponse=n,i}function vE(t){return t!==void 0&&t.enterprise!==void 0}class hL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function dL(t,e){return cs(t,"GET","/v2/recaptchaConfig",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e){return cs(t,"POST","/v1/accounts:delete",e)}async function Hx(t,e){return cs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pL(t,e=!1){const n=it(t),r=await n.getIdToken(e),i=hv(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Hl(jm(i.auth_time)),issuedAtTime:Hl(jm(i.iat)),expirationTime:Hl(jm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jm(t){return Number(t)*1e3}function hv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const i=$d(n);return i?JSON.parse(i):(Xh("Failed to decode base64 JWT payload"),null)}catch(i){return Xh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wE(t){const e=hv(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof si&&mL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Su(t,Hx(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qx(s.providerUserInfo):[],a=yL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new u_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function _L(t){const e=it(t);await qd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qx(t){return t.map(e=>{var{providerId:n}=e,r=lv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(t,e){const n=await zx(t,{},async()=>{const r=La({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Wx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Bx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wL(t,e){return cs(t,"POST","/v2/accounts:revokeToken",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=wE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await vL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Yo;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=lv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new u_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Su(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pL(this,e)}reload(){return _L(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await Su(this,fL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:P,isAnonymous:O,providerData:M,stsTokenManager:T}=n;se(E&&T,e,"internal-error");const _=Yo.fromJSON(this.name,T);se(typeof E=="string",e,"internal-error"),pi(d,e.name),pi(p,e.name),se(typeof P=="boolean",e,"internal-error"),se(typeof O=="boolean",e,"internal-error"),pi(g,e.name),pi(y,e.name),pi(S,e.name),pi(R,e.name),pi(v,e.name),pi(w,e.name);const C=new jr({uid:E,auth:e,email:p,emailVerified:P,displayName:d,isAnonymous:O,photoURL:y,phoneNumber:g,tenantId:S,stsTokenManager:_,createdAt:v,lastLoginAt:w});return M&&Array.isArray(M)&&(C.providerData=M.map(k=>Object.assign({},k))),R&&(C._redirectEventId=R),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Yo;i.updateFromServerResponse(n);const s=new jr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?qx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Yo;a.updateFromIdToken(r);const l=new jr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new u_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;function Ur(t){Jr(t instanceof Function,"Expected a class definition");let e=EE.get(t);return e?(Jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Kx.type="NONE";const TE=Kx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e,n){return`firebase:${t}:${e}:${n}`}class Zo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zo(Ur(TE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ur(TE);const o=Jh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=jr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Zo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Zo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jx(e))return"Blackberry";if(eR(e))return"Webos";if(Qx(e))return"Safari";if((e.includes("chrome/")||Yx(e))&&!e.includes("edge/"))return"Chrome";if(Xx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gx(t=qt()){return/firefox\//i.test(t)}function Qx(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yx(t=qt()){return/crios\//i.test(t)}function Zx(t=qt()){return/iemobile/i.test(t)}function Xx(t=qt()){return/android/i.test(t)}function Jx(t=qt()){return/blackberry/i.test(t)}function eR(t=qt()){return/webos/i.test(t)}function dv(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EL(t=qt()){var e;return dv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TL(){return D2()&&document.documentMode===10}function tR(t=qt()){return dv(t)||Xx(t)||eR(t)||Jx(t)||/windows phone/i.test(t)||Zx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t,e=[]){let n;switch(t){case"Browser":n=IE(qt());break;case"Worker":n=`${IE(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e={}){return cs(t,"GET","/v2/passwordPolicy",us(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=6;class xL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:CL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new IL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ux,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hx(this,{idToken:e}),r=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(zr(this));const n=e?it(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SL(this),n=new xL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function so(t){return it(t)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=W2(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kL(t){ip=t}function rR(t){return ip.loadJS(t)}function AL(){return ip.recaptchaEnterpriseScript}function PL(){return ip.gapiScript}function bL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const NL="recaptcha-enterprise",OL="NO_RECAPTCHA";class DL{constructor(e){this.type=NL,this.auth=so(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{dL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new hL(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;vE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(OL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&vE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=AL();l.length!==0&&(l+=a),rR(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function CE(t,e,n,r=!1){const i=new DL(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function c_(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await CE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await CE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t,e){const n=rp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(zd(s,e??{}))return i;nr(i,"already-initialized")}return n.initialize({options:e})}function LL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VL(t,e,n){const r=so(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=iR(e),{host:o,port:a}=FL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),jL()}function iR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function FL(t){const e=iR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:xE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:xE(o)}}}function xE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function UL(t,e){return cs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t,e){return Ec(t,"POST","/v1/accounts:signInWithPassword",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e){return Ec(t,"POST","/v1/accounts:signInWithEmailLink",us(t,e))}async function zL(t,e){return Ec(t,"POST","/v1/accounts:signInWithEmailLink",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends fv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Cu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Cu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c_(e,n,"signInWithPassword",$L);case"emailLink":return BL(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c_(e,r,"signUpPassword",UL);case"emailLink":return zL(e,{idToken:n,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t,e){return Ec(t,"POST","/v1/accounts:signInWithIdp",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL="http://localhost";class Hs extends fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=lv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Hs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}buildRequest(){const e={requestUri:WL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=La(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qL(t){const e=xl(Rl(t)).link,n=e?xl(Rl(e)).deep_link_id:null,r=xl(Rl(t)).deep_link_id;return(r?xl(Rl(r)).link:null)||r||n||e||t}class pv{constructor(e){var n,r,i,s,o,a;const l=xl(Rl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=HL((i=l.mode)!==null&&i!==void 0?i:null);se(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qL(e);try{return new pv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.providerId=Va.PROVIDER_ID}static credential(e,n){return Cu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pv.parseLink(n);return se(r,"argument-error"),Cu._fromEmailAndCode(e,r.code,r.tenantId)}}Va.PROVIDER_ID="password";Va.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends sR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Tc{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hs._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ii.credential(n,r)}catch{return null}}}Ii.GOOGLE_SIGN_IN_METHOD="google.com";Ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Tc{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Tc{constructor(){super("twitter.com")}static credential(e,n){return Hs._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ci.credential(n,r)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e){return Ec(t,"POST","/v1/accounts:signUp",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await jr._fromIdTokenResponse(e,r,i),o=RE(r);return new qs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RE(r);return new qs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends si{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kd(e,n,r,i)}}function oR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kd._fromErrorAndOperation(t,s,e,r):s})}async function GL(t,e,n=!1){const r=await Su(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e,n=!1){const{auth:r}=t;if(ur(r.app))return Promise.reject(zr(r));const i="reauthenticate";try{const s=await Su(t,oR(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=hv(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),qs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e,n=!1){if(ur(t.app))return Promise.reject(zr(t));const r="signIn",i=await oR(t,r,e),s=await qs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function YL(t,e){return aR(so(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t){const e=so(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZL(t,e,n){if(ur(t.app))return Promise.reject(zr(t));const r=so(t),o=await c_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lR(t),l}),a=await qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function XL(t,e,n){return ur(t.app)?Promise.reject(zr(t)):YL(it(t),Va.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lR(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t,e){return it(t).setPersistence(e)}function e4(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function t4(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function n4(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function uR(t){return it(t).signOut()}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=1e3,i4=10;class hR extends cR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);TL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,i4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},r4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hR.type="LOCAL";const s4=hR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR extends cR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dR.type="SESSION";const mv=dR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new sp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await o4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=gv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function l4(t){gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function u4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function h4(){return fR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="firebaseLocalStorageDb",d4=1,Qd="firebaseLocalStorage",mR="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function op(t,e){return t.transaction([Qd],e?"readwrite":"readonly").objectStore(Qd)}function f4(){const t=indexedDB.deleteDatabase(pR);return new Ic(t).toPromise()}function h_(){const t=indexedDB.open(pR,d4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qd,{keyPath:mR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qd)?e(r):(r.close(),await f4(),e(await h_()))})})}async function kE(t,e,n){const r=op(t,!0).put({[mR]:e,value:n});return new Ic(r).toPromise()}async function p4(t,e){const n=op(t,!1).get(e),r=await new Ic(n).toPromise();return r===void 0?null:r.value}function AE(t,e){const n=op(t,!0).delete(e);return new Ic(n).toPromise()}const m4=800,g4=3;class gR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>g4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sp._getInstance(h4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await u4(),!this.activeServiceWorker)return;this.sender=new a4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await h_();return await kE(e,Gd,"1"),await AE(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>p4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>AE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=op(i,!1).getAll();return new Ic(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),m4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gR.type="LOCAL";const _4=gR;new wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t,e){return e?Ur(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends fv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function v4(t){return aR(t.auth,new _v(t),t.bypassAuthState)}function w4(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),QL(n,new _v(t),t.bypassAuthState)}async function E4(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),GL(n,new _v(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v4;case"linkViaPopup":case"linkViaRedirect":return E4;case"reauthViaPopup":case"reauthViaRedirect":return w4;default:nr(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=new wc(2e3,1e4);class jo extends _R{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=gv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T4.get())};e()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="pendingRedirect",ed=new Map;class S4 extends _R{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const r=await C4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C4(t,e){const n=k4(e),r=R4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function x4(t,e){ed.set(t._key(),e)}function R4(t){return Ur(t._redirectPersistence)}function k4(t){return Jh(I4,t.config.apiKey,t.name)}async function A4(t,e,n=!1){if(ur(t.app))return Promise.reject(zr(t));const r=so(t),i=y4(r,e),o=await new S4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=10*60*1e3;class b4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P4&&this.cachedEventUids.clear(),this.cachedEventUids.has(PE(e))}saveEventToCache(e){this.cachedEventUids.add(PE(e)),this.lastProcessedEventTime=Date.now()}}function PE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t,e={}){return cs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M4=/^https?/;async function L4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await O4(t);for(const n of e)try{if(V4(n))return}catch{}nr(t,"unauthorized-domain")}function V4(t){const e=l_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!M4.test(n))return!1;if(D4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new wc(3e4,6e4);function bE(){const t=gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j4(t){return new Promise((e,n)=>{var r,i,s;function o(){bE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bE(),n(mr(t,"network-request-failed"))},timeout:F4.get()})}if(!((i=(r=gr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=gr().gapi)===null||s===void 0)&&s.load)o();else{const a=bL("iframefcb");return gr()[a]=()=>{gapi.load?o():n(mr(t,"network-request-failed"))},rR(`${PL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw td=null,e})}let td=null;function U4(t){return td=td||j4(t),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new wc(5e3,15e3),B4="__/auth/iframe",z4="emulator/auth/iframe",W4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q4(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cv(e,z4):`https://${t.config.authDomain}/${B4}`,r={apiKey:e.apiKey,appName:t.name,v:io},i=H4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${La(r).slice(1)}`}async function K4(t){const e=await U4(t),n=gr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:q4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=mr(t,"network-request-failed"),a=gr().setTimeout(()=>{s(o)},$4.get());function l(){gr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q4=500,Y4=600,Z4="_blank",X4="http://localhost";class NE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J4(t,e,n,r=Q4,i=Y4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},G4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=qt().toLowerCase();n&&(a=Yx(c)?Z4:n),Gx(c)&&(e=e||X4,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(EL(c)&&a!=="_self")return eV(e||"",a),new NE(null);const d=window.open(e||"",a,h);se(d,t,"popup-blocked");try{d.focus()}catch{}return new NE(d)}function eV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="__/auth/handler",nV="emulator/auth/handler",rV=encodeURIComponent("fac");async function OE(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:io,eventId:i};if(e instanceof sR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",n_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Tc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${rV}=${encodeURIComponent(l)}`:"";return`${iV(t)}?${La(a).slice(1)}${c}`}function iV({config:t}){return t.emulator?cv(t,nV):`https://${t.authDomain}/${tV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class sV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mv,this._completeRedirectFn=A4,this._overrideRedirectResult=x4}async _openPopup(e,n,r,i){var s;Jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await OE(e,n,r,l_(),i);return J4(e,o,gv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await OE(e,n,r,l_(),i);return l4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Jr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await K4(e),r=new b4(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Um,{type:Um},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Um];o!==void 0&&n(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tR()||Qx()||dv()}}const oV=sV;var DE="@firebase/auth",ME="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uV(t){Ws(new Qi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nR(t)},c=new RL(r,i,s,l);return LL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ws(new Qi("auth-internal",e=>{const n=so(e.getProvider("auth").getImmediate());return(r=>new aV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(DE,ME,lV(t)),pr(DE,ME,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=5*60,hV=Ax("authIdTokenMaxAge")||cV;let LE=null;const dV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hV)return;const i=n==null?void 0:n.token;LE!==i&&(LE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fV(t=av()){const e=rp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ML(t,{popupRedirectResolver:oV,persistence:[_4,s4,mv]}),r=Ax("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=dV(s.toString());t4(n,o,()=>o(n.currentUser)),e4(n,a=>o(a))}}const i=xx("auth");return i&&VL(n,`http://${i}`),n}function pV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=mr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",pV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uV("Browser");var VE={};const FE="@firebase/database",jE="1.0.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vR="";function mV(t){vR=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),dt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Tu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return oi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gV(e)}}catch{}return new _V},Cs=wR("localStorage"),yV=wR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new np("@firebase/database"),vV=function(){let t=1;return function(){return t++}}(),ER=function(t){const e=K2(t),n=new z2;n.update(e);const r=n.digest();return rv.encodeByteArray(r)},Sc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Sc.apply(null,r):typeof r=="object"?e+=dt(r):e+=r,e+=" "}return e};let ql=null,UE=!0;const wV=function(t,e){B(!e,"Can't turn on custom loggers persistently."),Jo.logLevel=ve.VERBOSE,ql=Jo.log.bind(Jo)},zt=function(...t){if(UE===!0&&(UE=!1,ql===null&&yV.get("logging_enabled")===!0&&wV()),ql){const e=Sc.apply(null,t);ql(e)}},Cc=function(t){return function(...e){zt(t,...e)}},d_=function(...t){const e="FIREBASE INTERNAL ERROR: "+Sc(...t);Jo.error(e)},ei=function(...t){const e=`FIREBASE FATAL ERROR: ${Sc(...t)}`;throw Jo.error(e),new Error(e)},fn=function(...t){const e="FIREBASE WARNING: "+Sc(...t);Jo.warn(e)},EV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},TR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},TV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},da="[MIN_NAME]",Ks="[MAX_NAME]",Fa=function(t,e){if(t===e)return 0;if(t===da||e===Ks)return-1;if(e===da||t===Ks)return 1;{const n=$E(t),r=$E(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},IV=function(t,e){return t===e?0:t<e?-1:1},_l=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+dt(e))},yv=function(t){if(typeof t!="object"||t===null)return dt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=dt(e[r]),n+=":",n+=yv(t[e[r]]);return n+="}",n},IR=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function pn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const SR=function(t){B(!TR(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},SV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function xV(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const RV=new RegExp("^-?(0*)\\d{1,10}$"),kV=-2147483648,AV=2147483647,$E=function(t){if(RV.test(t)){const e=Number(t);if(e>=kV&&e<=AV)return e}return null},ja=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw fn("Exception was thrown by user callback.",n),e},Math.floor(0))}},PV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Kl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fn(e)}}class nd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}nd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="5",CR="v",xR="s",RR="r",kR="f",AR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PR="ls",bR="p",f_="ac",NR="websocket",OR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Cs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function OV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function MR(t,e,n){B(typeof e=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let r;if(e===NR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===OR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);OV(t)&&(n.ns=t.namespace);const i=[];return pn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.counters_={}}incrementCounter(e,n=1){oi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return x2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m={},Bm={};function wv(t){const e=t.toString();return $m[e]||($m[e]=new DV),$m[e]}function MV(t,e){const n=t.toString();return Bm[n]||(Bm[n]=e()),Bm[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ja(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="start",VV="close",FV="pLPCommand",jV="pRTLPCB",LR="id",VR="pw",FR="ser",UV="cb",$V="seg",BV="ts",zV="d",WV="dframe",jR=1870,UR=30,HV=jR-UR,qV=25e3,KV=3e4;class Uo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cc(e),this.stats_=wv(n),this.urlFn=l=>(this.appCheckToken&&(l[f_]=this.appCheckToken),MR(n,OR,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new LV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(KV)),TV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ev((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===BE)this.id=a,this.password=l;else if(o===VV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[BE]="t",r[FR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[UV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[CR]=vv,this.transportSessionId&&(r[xR]=this.transportSessionId),this.lastSessionId&&(r[PR]=this.lastSessionId),this.applicationId&&(r[bR]=this.applicationId),this.appCheckToken&&(r[f_]=this.appCheckToken),typeof location<"u"&&location.hostname&&AR.test(location.hostname)&&(r[RR]=kR);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uo.forceAllow_=!0}static forceDisallow(){Uo.forceDisallow_=!0}static isAvailable(){return Uo.forceAllow_?!0:!Uo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!SV()&&!CV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=dt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Sx(n),i=IR(r,HV);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[WV]="t",r[LR]=e,r[VR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=dt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ev{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=vV(),window[FV+this.uniqueCallbackIdentifier]=e,window[jV+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ev.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){zt("frame writing exception"),a.stack&&zt(a.stack),zt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[LR]=this.myID,e[VR]=this.myPW,e[FR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+UR+r.length<=jR;){const o=this.pendingSegs.shift();r=r+"&"+$V+i+"="+o.seg+"&"+BV+i+"="+o.ts+"&"+zV+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(qV)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=16384,QV=45e3;let Yd=null;typeof MozWebSocket<"u"?Yd=MozWebSocket:typeof WebSocket<"u"&&(Yd=WebSocket);class Wn{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cc(this.connId),this.stats_=wv(n),this.connURL=Wn.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[CR]=vv,typeof location<"u"&&location.hostname&&AR.test(location.hostname)&&(o[RR]=kR),n&&(o[xR]=n),r&&(o[PR]=r),i&&(o[f_]=i),s&&(o[bR]=s),MR(e,NR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cs.set("previous_websocket_failure",!0);try{let r;Nx(),this.mySock=new Yd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Wn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Yd!==null&&!Wn.forceDisallow_}static previouslyFailed(){return Cs.isInMemoryStorage||Cs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Cs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Tu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=dt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=IR(n,GV);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(QV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Wn.responsesRequiredToBeHealthy=2;Wn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Uo,Wn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Wn&&Wn.isAvailable();let r=n&&!Wn.previouslyFailed();if(e.webSocketOnly&&(n||fn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Wn];else{const i=this.transports_=[];for(const s of xu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);xu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=6e4,ZV=5e3,XV=10*1024,JV=100*1024,zm="t",zE="d",eF="s",WE="r",tF="e",HE="o",qE="a",KE="n",GE="p",nF="h";class rF{constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cc("c:"+this.id+":"),this.transportManager_=new xu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Kl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>JV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>XV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zm in e){const n=e[zm];n===qE?this.upgradeIfSecondaryHealthy_():n===WE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===HE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=_l("t",e),r=_l("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:GE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=_l("t",e),r=_l("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=_l(zm,e);if(zE in e){const r=e[zE];if(n===nF){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===KE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===eF?this.onConnectionShutdown_(r):n===WE?this.onReset_(r):n===tF?d_("Server Error: "+r):n===HE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):d_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),vv!==r&&fn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Kl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(YV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Kl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ZV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:GE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){B(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends BR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!iv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Zd}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=32,YE=768;class De{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ae(){return new De("")}function we(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Yi(t){return t.pieces_.length-t.pieceNum_}function Le(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new De(t.pieces_,e)}function zR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function iF(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function WR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function HR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new De(e,0)}function ft(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof De)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new De(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function en(t,e){const n=we(t),r=we(e);if(n===null)return e;if(n===r)return en(Le(t),Le(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function qR(t,e){if(Yi(t)!==Yi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function qn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Yi(t)>Yi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class sF{constructor(e,n){this.errorPrefix_=n,this.parts_=WR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=tp(this.parts_[r]);KR(this)}}function oF(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=tp(e),KR(t)}function aF(t){const e=t.parts_.pop();t.byteLength_-=tp(e),t.parts_.length>0&&(t.byteLength_-=1)}function KR(t){if(t.byteLength_>YE)throw new Error(t.errorPrefix_+"has a key path longer than "+YE+" bytes ("+t.byteLength_+").");if(t.parts_.length>QE)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+QE+") or object contains a cycle "+Es(t))}function Es(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends BR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Tv}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=1e3,lF=60*5*1e3,ZE=30*1e3,uF=1.3,cF=3e4,hF="server_kill",XE=3;class Wr extends $R{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Wr.nextPersistentConnectionId_++,this.log_=Cc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yl,this.maxReconnectDelay_=lF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Nx())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Zd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(dt(s)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ep,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Wr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&oi(e,"w")){const r=ha(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();fn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||B2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+dt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):d_("Unrecognized action received from server: "+dt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=yl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>cF&&(this.reconnectDelay_=yl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*uF)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Wr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){B(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new rF(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{fn(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(hF)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&fn(d),l())}}}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],n_(this.interruptReasons_)&&(this.reconnectDelay_=yl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>yv(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new De(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){zt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=XE&&(this.reconnectDelay_=ZE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){zt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=XE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+vR.replace(/\./g,"-")]=1,iv()?e["framework.cordova"]=1:bx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Zd.getInstance().currentlyOnline();return n_(this.interruptReasons_)&&e}}Wr.nextPersistentConnectionId_=0;Wr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ge(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ge(da,e),i=new ge(da,n);return this.compare(r,i)!==0}minPost(){return ge.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch;class GR extends ap{static get __EMPTY_NODE(){return Ch}static set __EMPTY_NODE(e){Ch=e}compare(e,n){return Fa(e.name,n.name)}isDefinedOn(e){throw Ma("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ge.MIN}maxPost(){return new ge(Ks,Ch)}makePost(e,n){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new ge(e,Ch)}toString(){return".key"}}const ea=new GR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},yn=class kl{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kl.RED,this.left=i??cr.EMPTY_NODE,this.right=s??cr.EMPTY_NODE}copy(e,n,r,i,s){return new kl(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return cr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return cr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,kl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,kl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};yn.RED=!0;yn.BLACK=!1;class dF{copy(e,n,r,i,s){return this}insert(e,n,r){return new yn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let cr=class rd{constructor(e,n=rd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new rd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yn.BLACK,null,null))}remove(e){return new rd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new xh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new xh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new xh(this.root_,null,this.comparator_,!0,e)}};cr.EMPTY_NODE=new dF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(t,e){return Fa(t.name,e.name)}function Iv(t,e){return Fa(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p_;function pF(t){p_=t}const QR=function(t){return typeof t=="number"?"number:"+SR(t):"string:"+t},YR=function(t){if(t.isLeafNode()){const e=t.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&oi(e,".sv"),"Priority must be a string or number.")}else B(t===p_||t.isEmpty(),"priority of unexpected type.");B(t===p_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JE;class _t{constructor(e,n=_t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),YR(this.priorityNode_)}static set __childrenNodeConstructor(e){JE=e}static get __childrenNodeConstructor(){return JE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new _t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _e(e)?this:we(e)===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:_t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=we(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||Yi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,_t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Le(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+QR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=SR(this.value_):e+=this.value_,this.lazyHash_=ER(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===_t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof _t.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=_t.VALUE_TYPE_ORDER.indexOf(n),s=_t.VALUE_TYPE_ORDER.indexOf(r);return B(i>=0,"Unknown leaf type: "+n),B(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}_t.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZR,XR;function mF(t){ZR=t}function gF(t){XR=t}class _F extends ap{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Fa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ge.MIN}maxPost(){return new ge(Ks,new _t("[PRIORITY-POST]",XR))}makePost(e,n){const r=ZR(e);return new ge(n,new _t("[PRIORITY-POST]",r))}toString(){return".priority"}}const tt=new _F;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=Math.log(2);class vF{constructor(e){const n=s=>parseInt(Math.log(s)/yF,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xd=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new yn(p,d.node,yn.BLACK,null,null);{const g=parseInt(h/2,10)+l,y=i(l,g),S=i(g+1,c);return d=t[g],p=n?n(d):d,new yn(p,d.node,yn.BLACK,y,S)}},s=function(l){let c=null,h=null,d=t.length;const p=function(y,S){const R=d-y,v=d;d-=y;const w=i(R+1,v),E=t[R],P=n?n(E):E;g(new yn(P,E.node,S,null,w))},g=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const S=l.nextBitIsOne(),R=Math.pow(2,l.count-(y+1));S?p(R,yn.BLACK):(p(R,yn.BLACK),p(R,yn.RED))}return h},o=new vF(t.length),a=s(o);return new cr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm;const vo={};class $r{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return B(vo&&tt,"ChildrenNode.ts has not been loaded"),Wm=Wm||new $r({".priority":vo},{".priority":tt}),Wm}get(e){const n=ha(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof cr?n:null}hasIndex(e){return oi(this.indexSet_,e.toString())}addIndex(e,n){B(e!==ea,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ge.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Xd(r,e.getCompare()):a=vo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new $r(h,c)}addToIndexes(e,n){const r=Bd(this.indexes_,(i,s)=>{const o=ha(this.indexSet_,s);if(B(o,"Missing index implementation for "+s),i===vo)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ge.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Xd(a,o.getCompare())}else return vo;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new ge(e.name,a))),l.insert(e,e.node)}});return new $r(r,this.indexSet_)}removeFromIndexes(e,n){const r=Bd(this.indexes_,i=>{if(i===vo)return i;{const s=n.get(e.name);return s?i.remove(new ge(e.name,s)):i}});return new $r(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl;class ne{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&YR(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vl||(vl=new ne(new cr(Iv),null,$r.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vl}updatePriority(e){return this.children_.isEmpty()?this:new ne(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?vl:n}}getChild(e){const n=we(e);return n===null?this:this.getImmediateChild(n).getChild(Le(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ge(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?vl:this.priorityNode_;return new ne(i,o,s)}}updateChild(e,n){const r=we(e);if(r===null)return n;{B(we(e)!==".priority"||Yi(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Le(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(tt,(o,a)=>{n[o]=a.val(e),r++,s&&ne.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+QR(this.getPriority().val())+":"),this.forEachChild(tt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":ER(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ge(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ge(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ge(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ge.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ge.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xc?-1:0}withIndex(e){if(e===ea||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ne(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ea||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(tt),i=n.getIterator(tt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ea?null:this.indexMap_.get(e.toString())}}ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class wF extends ne{constructor(){super(new cr(Iv),ne.EMPTY_NODE,$r.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ne.EMPTY_NODE}isEmpty(){return!1}}const xc=new wF;Object.defineProperties(ge,{MIN:{value:new ge(da,ne.EMPTY_NODE)},MAX:{value:new ge(Ks,xc)}});GR.__EMPTY_NODE=ne.EMPTY_NODE;_t.__childrenNodeConstructor=ne;pF(xc);gF(xc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=!0;function Et(t,e=null){if(t===null)return ne.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new _t(n,Et(e))}if(!(t instanceof Array)&&EF){const n=[];let r=!1;if(pn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Et(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ge(o,l)))}}),n.length===0)return ne.EMPTY_NODE;const s=Xd(n,fF,o=>o.name,Iv);if(r){const o=Xd(n,tt.getCompare());return new ne(s,Et(e),new $r({".priority":o},{".priority":tt}))}else return new ne(s,Et(e),$r.Default)}else{let n=ne.EMPTY_NODE;return pn(t,(r,i)=>{if(oi(t,r)&&r.substring(0,1)!=="."){const s=Et(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Et(e))}}mF(Et);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF extends ap{constructor(e){super(),this.indexPath_=e,B(!_e(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Fa(e.name,n.name):s}makePost(e,n){const r=Et(e),i=ne.EMPTY_NODE.updateChild(this.indexPath_,r);return new ge(n,i)}maxPost(){const e=ne.EMPTY_NODE.updateChild(this.indexPath_,xc);return new ge(Ks,e)}toString(){return WR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF extends ap{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Fa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ge.MIN}maxPost(){return ge.MAX}makePost(e,n){const r=Et(e);return new ge(n,r)}toString(){return".value"}}const SF=new IF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){return{type:"value",snapshotNode:t}}function fa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ru(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ku(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function CF(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){B(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ru(n,a)):B(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fa(n,r)):o.trackChildChange(ku(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ru(i,s))}),n.isLeafNode()||n.forEachChild(tt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ku(i,s,o))}else r.trackChildChange(fa(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ne.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this.indexedFilter_=new Sv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Au.getStartPost_(e),this.endPost_=Au.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ge(n,r))||(r=ne.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ne.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ne.EMPTY_NODE);const s=this;return n.forEachChild(tt,(o,a)=>{s.matches(new ge(o,a))||(i=i.updateImmediateChild(o,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Au(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ge(n,r))||(r=ne.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ne.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ne.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,g)=>d(g,p)}else o=this.index_.getCompare();const a=e;B(a.numChildren()===this.limit_,"");const l=new ge(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=i.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);const g=p==null?1:o(p,l);if(h&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(ku(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ru(n,d));const S=a.updateImmediateChild(n,ne.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s!=null&&s.trackChildChange(fa(p.name,p.node)),S.updateImmediateChild(p.name,p.node)):S}}else return r.isEmpty()?e:h&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Ru(c.name,c.node)),s.trackChildChange(fa(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,ne.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:da}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ks}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){const e=new Cv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function RF(t){return t.loadsAllData()?new Sv(t.getIndex()):t.hasLimit()?new xF(t):new Au(t)}function eT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===tt?n="$priority":t.index_===SF?n="$value":t.index_===ea?n="$key":(B(t.index_ instanceof TF,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=dt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=dt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+dt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=dt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+dt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function tT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends $R{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Cc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Jd.getListenId_(e,r),a={};this.listens_[o]=a;const l=eT(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),ha(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,n){const r=Jd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=eT(e._queryParams),r=e._path.toString(),i=new ep;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+La(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Tu(a.responseText)}catch{fn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&fn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.rootNode_=ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){return{value:null,children:new Map}}function ek(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=we(e);t.children.has(r)||t.children.set(r,ef());const i=t.children.get(r);e=Le(e),ek(i,e,n)}}function m_(t,e,n){t.value!==null?n(e,t.value):AF(t,(r,i)=>{const s=new De(e.toString()+"/"+r);m_(i,s,n)})}function AF(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&pn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=10*1e3,bF=30*1e3,NF=5*60*1e3;class OF{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new PF(e);const r=nT+(bF-nT)*Math.random();Kl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;pn(e,(i,s)=>{s>0&&oi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Kl(this.reportStats_.bind(this),Math.floor(Math.random()*2*NF))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Kn||(Kn={}));function tk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Rv(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Kn.ACK_USER_WRITE,this.source=tk()}operationForChild(e){if(_e(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new De(e));return new tf(Ae(),n,this.revert)}}else return B(we(this.path)===e,"operationForChild called for unrelated child."),new tf(Le(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.source=e,this.path=n,this.type=Kn.LISTEN_COMPLETE}operationForChild(e){return _e(this.path)?new Pu(this.source,Ae()):new Pu(this.source,Le(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Kn.OVERWRITE}operationForChild(e){return _e(this.path)?new Gs(this.source,Ae(),this.snap.getImmediateChild(e)):new Gs(this.source,Le(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Kn.MERGE}operationForChild(e){if(_e(this.path)){const n=this.children.subtree(new De(e));return n.isEmpty()?null:n.value?new Gs(this.source,Ae(),n.value):new bu(this.source,Ae(),n)}else return B(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bu(this.source,Le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;const n=we(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function MF(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(CF(o.childName,o.snapshotNode))}),wl(t,i,"child_removed",e,r,n),wl(t,i,"child_added",e,r,n),wl(t,i,"child_moved",s,r,n),wl(t,i,"child_changed",e,r,n),wl(t,i,"value",e,r,n),i}function wl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>VF(t,a,l)),o.forEach(a=>{const l=LF(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function LF(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function VF(t,e,n){if(e.childName==null||n.childName==null)throw Ma("Should only compare child_ events.");const r=new ge(e.childName,e.snapshotNode),i=new ge(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t,e){return{eventCache:t,serverCache:e}}function Gl(t,e,n,r){return lp(new Zi(e,n,r),t.serverCache)}function nk(t,e,n,r){return lp(t.eventCache,new Zi(e,n,r))}function nf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm;const FF=()=>(Hm||(Hm=new cr(IV)),Hm);class ze{constructor(e,n=FF()){this.value=e,this.children=n}static fromObject(e){let n=new ze(null);return pn(e,(r,i)=>{n=n.set(new De(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ae(),value:this.value};if(_e(e))return null;{const r=we(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Le(e),n);return s!=null?{path:ft(new De(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{const n=we(e),r=this.children.get(n);return r!==null?r.subtree(Le(e)):new ze(null)}}set(e,n){if(_e(e))return new ze(n,this.children);{const r=we(e),s=(this.children.get(r)||new ze(null)).set(Le(e),n),o=this.children.insert(r,s);return new ze(this.value,o)}}remove(e){if(_e(e))return this.children.isEmpty()?new ze(null):new ze(null,this.children);{const n=we(e),r=this.children.get(n);if(r){const i=r.remove(Le(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ze(null):new ze(this.value,s)}else return this}}get(e){if(_e(e))return this.value;{const n=we(e),r=this.children.get(n);return r?r.get(Le(e)):null}}setTree(e,n){if(_e(e))return n;{const r=we(e),s=(this.children.get(r)||new ze(null)).setTree(Le(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ze(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ft(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ae(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(_e(e))return null;{const s=we(e),o=this.children.get(s);return o?o.findOnPath_(Le(e),ft(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ae(),n)}foreachOnPath_(e,n,r){if(_e(e))return this;{this.value&&r(n,this.value);const i=we(e),s=this.children.get(i);return s?s.foreachOnPath_(Le(e),ft(n,i),r):new ze(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ft(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.writeTree_=e}static empty(){return new Xn(new ze(null))}}function Ql(t,e,n){if(_e(e))return new Xn(new ze(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=en(i,e);return s=s.updateChild(o,n),new Xn(t.writeTree_.set(i,s))}else{const i=new ze(n),s=t.writeTree_.setTree(e,i);return new Xn(s)}}}function rT(t,e,n){let r=t;return pn(n,(i,s)=>{r=Ql(r,ft(e,i),s)}),r}function iT(t,e){if(_e(e))return Xn.empty();{const n=t.writeTree_.setTree(e,new ze(null));return new Xn(n)}}function g_(t,e){return oo(t,e)!=null}function oo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(en(n.path,e)):null}function sT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tt,(r,i)=>{e.push(new ge(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ge(r,i.value))}),e}function zi(t,e){if(_e(e))return t;{const n=oo(t,e);return n!=null?new Xn(new ze(n)):new Xn(t.writeTree_.subtree(e))}}function __(t){return t.writeTree_.isEmpty()}function pa(t,e){return rk(Ae(),t.writeTree_,e)}function rk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(B(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=rk(ft(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ft(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t,e){return ak(e,t)}function jF(t,e,n,r,i){B(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ql(t.visibleWrites,e,n)),t.lastWriteId=r}function UF(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function $F(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);B(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&BF(a,r.path)?i=!1:qn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return zF(t),!0;if(r.snap)t.visibleWrites=iT(t.visibleWrites,r.path);else{const a=r.children;pn(a,l=>{t.visibleWrites=iT(t.visibleWrites,ft(r.path,l))})}return!0}else return!1}function BF(t,e){if(t.snap)return qn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&qn(ft(t.path,n),e))return!0;return!1}function zF(t){t.visibleWrites=ik(t.allWrites,WF,Ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function WF(t){return t.visible}function ik(t,e,n){let r=Xn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)qn(n,o)?(a=en(n,o),r=Ql(r,a,s.snap)):qn(o,n)&&(a=en(o,n),r=Ql(r,Ae(),s.snap.getChild(a)));else if(s.children){if(qn(n,o))a=en(n,o),r=rT(r,a,s.children);else if(qn(o,n))if(a=en(o,n),_e(a))r=rT(r,Ae(),s.children);else{const l=ha(s.children,we(a));if(l){const c=l.getChild(Le(a));r=Ql(r,Ae(),c)}}}else throw Ma("WriteRecord should have .snap or .children")}}return r}function sk(t,e,n,r,i){if(!r&&!i){const s=oo(t.visibleWrites,e);if(s!=null)return s;{const o=zi(t.visibleWrites,e);if(__(o))return n;if(n==null&&!g_(o,Ae()))return null;{const a=n||ne.EMPTY_NODE;return pa(o,a)}}}else{const s=zi(t.visibleWrites,e);if(!i&&__(s))return n;if(!i&&n==null&&!g_(s,Ae()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(qn(c.path,e)||qn(e,c.path))},a=ik(t.allWrites,o,e),l=n||ne.EMPTY_NODE;return pa(a,l)}}}function HF(t,e,n){let r=ne.EMPTY_NODE;const i=oo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=zi(t.visibleWrites,e);return n.forEachChild(tt,(o,a)=>{const l=pa(zi(s,new De(o)),a);r=r.updateImmediateChild(o,l)}),sT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=zi(t.visibleWrites,e);return sT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function qF(t,e,n,r,i){B(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ft(e,n);if(g_(t.visibleWrites,s))return null;{const o=zi(t.visibleWrites,s);return __(o)?i.getChild(n):pa(o,i.getChild(n))}}function KF(t,e,n,r){const i=ft(e,n),s=oo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=zi(t.visibleWrites,i);return pa(o,r.getNode().getImmediateChild(n))}else return null}function GF(t,e){return oo(t.visibleWrites,e)}function QF(t,e,n,r,i,s,o){let a;const l=zi(t.visibleWrites,e),c=oo(l,Ae());if(c!=null)a=c;else if(n!=null)a=pa(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=p.getNext();for(;g&&h.length<i;)d(g,r)!==0&&h.push(g),g=p.getNext();return h}else return[]}function YF(){return{visibleWrites:Xn.empty(),allWrites:[],lastWriteId:-1}}function rf(t,e,n,r){return sk(t.writeTree,t.treePath,e,n,r)}function kv(t,e){return HF(t.writeTree,t.treePath,e)}function oT(t,e,n,r){return qF(t.writeTree,t.treePath,e,n,r)}function sf(t,e){return GF(t.writeTree,ft(t.treePath,e))}function ZF(t,e,n,r,i,s){return QF(t.writeTree,t.treePath,e,n,r,i,s)}function Av(t,e,n){return KF(t.writeTree,t.treePath,e,n)}function ok(t,e){return ak(ft(t.treePath,e),t.writeTree)}function ak(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ku(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ru(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,fa(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ku(r,e.snapshotNode,i.oldSnap));else throw Ma("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const lk=new JF;class Pv{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Zi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Av(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qs(this.viewCache_),s=ZF(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){return{filter:t}}function t5(t,e){B(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function n5(t,e,n,r,i){const s=new XF;let o,a;if(n.type===Kn.OVERWRITE){const c=n;c.source.fromUser?o=y_(t,e,c.path,c.snap,r,i,s):(B(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_e(c.path),o=of(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Kn.MERGE){const c=n;c.source.fromUser?o=i5(t,e,c.path,c.children,r,i,s):(B(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=v_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Kn.ACK_USER_WRITE){const c=n;c.revert?o=a5(t,e,c.path,r,i,s):o=s5(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Kn.LISTEN_COMPLETE)o=o5(t,e,n.path,r,s);else throw Ma("Unknown operation type: "+n.type);const l=s.getChanges();return r5(e,o,l),{viewCache:o,changes:l}}function r5(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=nf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(JR(nf(e)))}}function uk(t,e,n,r,i,s){const o=e.eventCache;if(sf(r,n)!=null)return e;{let a,l;if(_e(n))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Qs(e),h=c instanceof ne?c:ne.EMPTY_NODE,d=kv(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=rf(r,Qs(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=we(n);if(c===".priority"){B(Yi(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=oT(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Le(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=oT(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=Av(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return Gl(e,a,o.isFullyInitialized()||_e(n),t.filter.filtersNodes())}}function of(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(_e(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),g,null)}else{const g=we(n);if(!l.isCompleteForPath(n)&&Yi(n)>1)return e;const y=Le(n),R=l.getNode().getImmediateChild(g).updateChild(y,r);g===".priority"?c=h.updatePriority(l.getNode(),R):c=h.updateChild(l.getNode(),g,R,y,lk,null)}const d=nk(e,c,l.isFullyInitialized()||_e(n),h.filtersNodes()),p=new Pv(i,d,s);return uk(t,d,n,i,p,a)}function y_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new Pv(i,e,s);if(_e(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Gl(e,c,!0,t.filter.filtersNodes());else{const d=we(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Gl(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=Le(n),g=a.getNode().getImmediateChild(d);let y;if(_e(p))y=r;else{const S=h.getCompleteChild(d);S!=null?zR(p)===".priority"&&S.getChild(HR(p)).isEmpty()?y=S:y=S.updateChild(p,r):y=ne.EMPTY_NODE}if(g.equals(y))l=e;else{const S=t.filter.updateChild(a.getNode(),d,y,p,h,o);l=Gl(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function aT(t,e){return t.eventCache.isCompleteForChild(e)}function i5(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=ft(n,l);aT(e,we(h))&&(a=y_(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=ft(n,l);aT(e,we(h))||(a=y_(t,a,h,c,i,s,o))}),a}function lT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function v_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;_e(n)?c=r:c=new ze(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),y=lT(t,g,p);l=of(t,l,new De(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const g=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!g){const y=e.serverCache.getNode().getImmediateChild(d),S=lT(t,y,p);l=of(t,l,new De(d),S,i,s,o,a)}}),l}function s5(t,e,n,r,i,s,o){if(sf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(_e(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return of(t,e,n,l.getNode().getChild(n),i,s,a,o);if(_e(n)){let c=new ze(null);return l.getNode().forEachChild(ea,(h,d)=>{c=c.set(new De(h),d)}),v_(t,e,n,c,i,s,a,o)}else return e}else{let c=new ze(null);return r.foreach((h,d)=>{const p=ft(n,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),v_(t,e,n,c,i,s,a,o)}}function o5(t,e,n,r,i){const s=e.serverCache,o=nk(e,s.getNode(),s.isFullyInitialized()||_e(n),s.isFiltered());return uk(t,o,n,r,lk,i)}function a5(t,e,n,r,i,s){let o;if(sf(r,n)!=null)return e;{const a=new Pv(r,e,i),l=e.eventCache.getNode();let c;if(_e(n)||we(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=rf(r,Qs(e));else{const d=e.serverCache.getNode();B(d instanceof ne,"serverChildren would be complete if leaf node"),h=kv(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=we(n);let d=Av(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Le(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,ne.EMPTY_NODE,Le(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=rf(r,Qs(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||sf(r,Ae())!=null,Gl(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Sv(r.getIndex()),s=RF(r);this.processor_=e5(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(ne.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ne.EMPTY_NODE,a.getNode(),null),h=new Zi(l,o.isFullyInitialized(),i.filtersNodes()),d=new Zi(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=lp(d,h),this.eventGenerator_=new DF(this.query_)}get query(){return this.query_}}function u5(t){return t.viewCache_.serverCache.getNode()}function c5(t){return nf(t.viewCache_)}function h5(t,e){const n=Qs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(we(e)).isEmpty())?n.getChild(e):null}function uT(t){return t.eventRegistrations_.length===0}function d5(t,e){t.eventRegistrations_.push(e)}function cT(t,e,n){const r=[];if(n){B(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function hT(t,e,n,r){e.type===Kn.MERGE&&e.source.queryId!==null&&(B(Qs(t.viewCache_),"We should always have a full cache before handling merges"),B(nf(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=n5(t.processor_,i,e,n,r);return t5(t.processor_,s.viewCache),B(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,ck(t,s.changes,s.viewCache.eventCache.getNode(),null)}function f5(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tt,(s,o)=>{r.push(fa(s,o))}),n.isFullyInitialized()&&r.push(JR(n.getNode())),ck(t,r,n.getNode(),e)}function ck(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return MF(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af;class hk{constructor(){this.views=new Map}}function p5(t){B(!af,"__referenceConstructor has already been defined"),af=t}function m5(){return B(af,"Reference.ts has not been loaded"),af}function g5(t){return t.views.size===0}function bv(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return B(s!=null,"SyncTree gave us an op for an invalid query."),hT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(hT(o,e,n,r));return s}}function dk(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=rf(n,i?r:null),l=!1;a?l=!0:r instanceof ne?(a=kv(n,r),l=!1):(a=ne.EMPTY_NODE,l=!1);const c=lp(new Zi(a,l,!1),new Zi(r,i,!1));return new l5(e,c)}return o}function _5(t,e,n,r,i,s){const o=dk(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),d5(o,n),f5(o,n)}function y5(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Xi(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(cT(c,n,r)),uT(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(cT(l,n,r)),uT(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Xi(t)&&s.push(new(m5())(e._repo,e._path)),{removed:s,events:o}}function fk(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Wi(t,e){let n=null;for(const r of t.views.values())n=n||h5(r,e);return n}function pk(t,e){if(e._queryParams.loadsAllData())return cp(t);{const r=e._queryIdentifier;return t.views.get(r)}}function mk(t,e){return pk(t,e)!=null}function Xi(t){return cp(t)!=null}function cp(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf;function v5(t){B(!lf,"__referenceConstructor has already been defined"),lf=t}function w5(){return B(lf,"Reference.ts has not been loaded"),lf}let E5=1;class dT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ze(null),this.pendingWriteTree_=YF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gk(t,e,n,r,i){return jF(t.pendingWriteTree_,e,n,r,i),i?kc(t,new Gs(tk(),e,n)):[]}function xs(t,e,n=!1){const r=UF(t.pendingWriteTree_,e);if($F(t.pendingWriteTree_,e)){let s=new ze(null);return r.snap!=null?s=s.set(Ae(),!0):pn(r.children,o=>{s=s.set(new De(o),!0)}),kc(t,new tf(r.path,s,n))}else return[]}function Rc(t,e,n){return kc(t,new Gs(xv(),e,n))}function T5(t,e,n){const r=ze.fromObject(n);return kc(t,new bu(xv(),e,r))}function I5(t,e){return kc(t,new Pu(xv(),e))}function S5(t,e,n){const r=Ov(t,n);if(r){const i=Dv(r),s=i.path,o=i.queryId,a=en(s,e),l=new Pu(Rv(o),a);return Mv(t,s,l)}else return[]}function _k(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||mk(o,e))){const l=y5(o,e,n,r);g5(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(p,g)=>Xi(g));if(h&&!d){const p=t.syncPointTree_.subtree(s);if(!p.isEmpty()){const g=k5(p);for(let y=0;y<g.length;++y){const S=g[y],R=S.query,v=Ek(t,S);t.listenProvider_.startListening(Yl(R),Nu(t,R),v.hashFn,v.onComplete)}}}!d&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(Yl(e),null):c.forEach(p=>{const g=t.queryToTagMap.get(hp(p));t.listenProvider_.stopListening(Yl(p),g)}))}A5(t,c)}return a}function yk(t,e,n,r){const i=Ov(t,r);if(i!=null){const s=Dv(i),o=s.path,a=s.queryId,l=en(o,e),c=new Gs(Rv(a),l,n);return Mv(t,o,c)}else return[]}function C5(t,e,n,r){const i=Ov(t,r);if(i){const s=Dv(i),o=s.path,a=s.queryId,l=en(o,e),c=ze.fromObject(n),h=new bu(Rv(a),l,c);return Mv(t,o,h)}else return[]}function x5(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(p,g)=>{const y=en(p,i);s=s||Wi(g,y),o=o||Xi(g)});let a=t.syncPointTree_.get(i);a?(o=o||Xi(a),s=s||Wi(a,Ae())):(a=new hk,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=ne.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,y)=>{const S=Wi(y,Ae());S&&(s=s.updateImmediateChild(g,S))}));const c=mk(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=hp(e);B(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const g=P5();t.queryToTagMap.set(p,g),t.tagToQueryMap.set(g,p)}const h=up(t.pendingWriteTree_,i);let d=_5(a,e,n,h,s,l);if(!c&&!o&&!r){const p=pk(a,e);d=d.concat(b5(t,e,p))}return d}function Nv(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=en(o,e),c=Wi(a,l);if(c)return c});return sk(i,e,s,n,!0)}function R5(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=en(c,n);r=r||Wi(h,d)});let i=t.syncPointTree_.get(n);i?r=r||Wi(i,Ae()):(i=new hk,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Zi(r,!0,!1):null,a=up(t.pendingWriteTree_,e._path),l=dk(i,e,a,s?o.getNode():ne.EMPTY_NODE,s);return c5(l)}function kc(t,e){return vk(e,t.syncPointTree_,null,up(t.pendingWriteTree_,Ae()))}function vk(t,e,n,r){if(_e(t.path))return wk(t,e,n,r);{const i=e.get(Ae());n==null&&i!=null&&(n=Wi(i,Ae()));let s=[];const o=we(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=ok(r,o);s=s.concat(vk(a,l,c,h))}return i&&(s=s.concat(bv(i,t,r,n))),s}}function wk(t,e,n,r){const i=e.get(Ae());n==null&&i!=null&&(n=Wi(i,Ae()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=ok(r,o),h=t.operationForChild(o);h&&(s=s.concat(wk(h,a,l,c)))}),i&&(s=s.concat(bv(i,t,r,n))),s}function Ek(t,e){const n=e.query,r=Nu(t,n);return{hashFn:()=>(u5(e)||ne.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?S5(t,n._path,r):I5(t,n._path);{const s=xV(i,n);return _k(t,n,null,s)}}}}function Nu(t,e){const n=hp(e);return t.queryToTagMap.get(n)}function hp(t){return t._path.toString()+"$"+t._queryIdentifier}function Ov(t,e){return t.tagToQueryMap.get(e)}function Dv(t){const e=t.indexOf("$");return B(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new De(t.substr(0,e))}}function Mv(t,e,n){const r=t.syncPointTree_.get(e);B(r,"Missing sync point for query tag that we're tracking");const i=up(t.pendingWriteTree_,e);return bv(r,n,i,null)}function k5(t){return t.fold((e,n,r)=>{if(n&&Xi(n))return[cp(n)];{let i=[];return n&&(i=fk(n)),pn(r,(s,o)=>{i=i.concat(o)}),i}})}function Yl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(w5())(t._repo,t._path):t}function A5(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=hp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function P5(){return E5++}function b5(t,e,n){const r=e._path,i=Nu(t,e),s=Ek(t,n),o=t.listenProvider_.startListening(Yl(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)B(!Xi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,d)=>{if(!_e(c)&&h&&Xi(h))return[cp(h).query];{let p=[];return h&&(p=p.concat(fk(h).map(g=>g.query))),pn(d,(g,y)=>{p=p.concat(y)}),p}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(Yl(h),Nu(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Lv(n)}node(){return this.node_}}class Vv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ft(this.path_,e);return new Vv(this.syncTree_,n)}node(){return Nv(this.syncTree_,this.path_)}}const N5=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},fT=function(t,e,n){if(!t||typeof t!="object")return t;if(B(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return O5(t[".sv"],e,n);if(typeof t[".sv"]=="object")return D5(t[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},O5=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+t)}},D5=function(t,e,n){t.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);const i=e.node();if(B(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},M5=function(t,e,n,r){return Fv(e,new Vv(n,t),r)},Tk=function(t,e,n){return Fv(t,new Lv(e),n)};function Fv(t,e,n){const r=t.getPriority().val(),i=fT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=fT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new _t(a,Et(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new _t(i))),o.forEachChild(tt,(a,l)=>{const c=Fv(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Uv(t,e){let n=e instanceof De?e:new De(e),r=t,i=we(n);for(;i!==null;){const s=ha(r.node.children,i)||{children:{},childCount:0};r=new jv(i,r,s),n=Le(n),i=we(n)}return r}function Ua(t){return t.node.value}function Ik(t,e){t.node.value=e,w_(t)}function Sk(t){return t.node.childCount>0}function L5(t){return Ua(t)===void 0&&!Sk(t)}function dp(t,e){pn(t.node.children,(n,r)=>{e(new jv(n,t,r))})}function Ck(t,e,n,r){n&&!r&&e(t),dp(t,i=>{Ck(i,e,!0,r)}),n&&r&&e(t)}function V5(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ac(t){return new De(t.parent===null?t.name:Ac(t.parent)+"/"+t.name)}function w_(t){t.parent!==null&&F5(t.parent,t.name,t)}function F5(t,e,n){const r=L5(n),i=oi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,w_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,w_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=/[\[\].#$\/\u0000-\u001F\u007F]/,U5=/[\[\].#$\u0000-\u001F\u007F]/,qm=10*1024*1024,xk=function(t){return typeof t=="string"&&t.length!==0&&!j5.test(t)},Rk=function(t){return typeof t=="string"&&t.length!==0&&!U5.test(t)},$5=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rk(t)},kk=function(t,e,n,r){r&&e===void 0||$v(sv(t,"value"),e,n)},$v=function(t,e,n){const r=n instanceof De?new sF(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Es(r));if(typeof e=="function")throw new Error(t+"contains a function "+Es(r)+" with contents = "+e.toString());if(TR(e))throw new Error(t+"contains "+e.toString()+" "+Es(r));if(typeof e=="string"&&e.length>qm/3&&tp(e)>qm)throw new Error(t+"contains a string greater than "+qm+" utf8 bytes "+Es(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(pn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!xk(o)))throw new Error(t+" contains an invalid key ("+o+") "+Es(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);oF(r,o),$v(t,a,r),aF(r)}),i&&s)throw new Error(t+' contains ".value" child '+Es(r)+" in addition to actual children.")}},Ak=function(t,e,n,r){if(!Rk(n))throw new Error(sv(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},B5=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ak(t,e,n)},Pk=function(t,e){if(we(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},z5=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$5(n))throw new Error(sv(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bk(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!qR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function wr(t,e,n){bk(t,n),H5(t,r=>qn(r,e)||qn(e,r))}function H5(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(q5(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function q5(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ql&&zt("event: "+n.toString()),ja(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5="repo_interrupt",G5=25;class Q5{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new W5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ef(),this.transactionQueueTree_=new jv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Y5(t,e,n){if(t.stats_=wv(t.repoInfo_),t.forceRestClient_||PV())t.server_=new Jd(t.repoInfo_,(r,i,s,o)=>{pT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>mT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{dt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Wr(t.repoInfo_,e,(r,i,s,o)=>{pT(t,r,i,s,o)},r=>{mT(t,r)},r=>{Z5(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=MV(t.repoInfo_,()=>new OF(t.stats_,t.server_)),t.infoData_=new kF,t.infoSyncTree_=new dT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Rc(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),zv(t,"connected",!1),t.serverSyncTree_=new dT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);wr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Nk(t){const n=t.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Bv(t){return N5({timestamp:Nk(t)})}function pT(t,e,n,r,i){t.dataUpdateCount++;const s=new De(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Bd(n,c=>Et(c));o=C5(t.serverSyncTree_,s,l,i)}else{const l=Et(n);o=yk(t.serverSyncTree_,s,l,i)}else if(r){const l=Bd(n,c=>Et(c));o=T5(t.serverSyncTree_,s,l)}else{const l=Et(n);o=Rc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=pp(t,s)),wr(t.eventQueue_,a,o)}function mT(t,e){zv(t,"connected",e),e===!1&&e3(t)}function Z5(t,e){pn(e,(n,r)=>{zv(t,n,r)})}function zv(t,e,n){const r=new De("/.info/"+e),i=Et(n);t.infoData_.updateSnapshot(r,i);const s=Rc(t.infoSyncTree_,r,i);wr(t.eventQueue_,r,s)}function Ok(t){return t.nextWriteId_++}function X5(t,e,n){const r=R5(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Et(i).withIndex(e._queryParams.getIndex());x5(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Rc(t.serverSyncTree_,e._path,s);else{const a=Nu(t.serverSyncTree_,e);o=yk(t.serverSyncTree_,e._path,s,a)}return wr(t.eventQueue_,e._path,o),_k(t.serverSyncTree_,e,n,null,!0),s},i=>(fp(t,"get for query "+dt(e)+" failed: "+i),Promise.reject(new Error(i))))}function J5(t,e,n,r,i){fp(t,"set",{path:e.toString(),value:n,priority:r});const s=Bv(t),o=Et(n,r),a=Nv(t.serverSyncTree_,e),l=Tk(o,a,s),c=Ok(t),h=gk(t.serverSyncTree_,e,l,c,!0);bk(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,g)=>{const y=p==="ok";y||fn("set at "+e+" failed: "+p);const S=xs(t.serverSyncTree_,c,!y);wr(t.eventQueue_,e,S),n3(t,i,p,g)});const d=Fk(t,e);pp(t,d),wr(t.eventQueue_,d,[])}function e3(t){fp(t,"onDisconnectEvents");const e=Bv(t),n=ef();m_(t.onDisconnect_,Ae(),(i,s)=>{const o=M5(i,s,t.serverSyncTree_,e);ek(n,i,o)});let r=[];m_(n,Ae(),(i,s)=>{r=r.concat(Rc(t.serverSyncTree_,i,s));const o=Fk(t,i);pp(t,o)}),t.onDisconnect_=ef(),wr(t.eventQueue_,Ae(),r)}function t3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(K5)}function fp(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),zt(n,...e)}function n3(t,e,n,r){e&&ja(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Dk(t,e,n){return Nv(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function Wv(t,e=t.transactionQueueTree_){if(e||mp(t,e),Ua(e)){const n=Lk(t,e);B(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&r3(t,Ac(e),n)}else Sk(e)&&dp(e,n=>{Wv(t,n)})}function r3(t,e,n){const r=n.map(c=>c.currentWriteId),i=Dk(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];B(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=en(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{fp(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(xs(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();mp(t,Uv(t.transactionQueueTree_,e)),Wv(t,t.transactionQueueTree_),wr(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)ja(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{fn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}pp(t,e)}},o)}function pp(t,e){const n=Mk(t,e),r=Ac(n),i=Lk(t,n);return i3(t,i,r),r}function i3(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=en(n,l.path);let h=!1,d;if(B(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(xs(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=G5)h=!0,d="maxretry",i=i.concat(xs(t.serverSyncTree_,l.currentWriteId,!0));else{const p=Dk(t,l.path,o);l.currentInputSnapshot=p;const g=e[a].update(p.val());if(g!==void 0){$v("transaction failed: Data returned ",g,l.path);let y=Et(g);typeof g=="object"&&g!=null&&oi(g,".priority")||(y=y.updatePriority(p.getPriority()));const R=l.currentWriteId,v=Bv(t),w=Tk(y,p,v);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=w,l.currentWriteId=Ok(t),o.splice(o.indexOf(R),1),i=i.concat(gk(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),i=i.concat(xs(t.serverSyncTree_,R,!0))}else h=!0,d="nodata",i=i.concat(xs(t.serverSyncTree_,l.currentWriteId,!0))}wr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}mp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ja(r[a]);Wv(t,t.transactionQueueTree_)}function Mk(t,e){let n,r=t.transactionQueueTree_;for(n=we(e);n!==null&&Ua(r)===void 0;)r=Uv(r,n),e=Le(e),n=we(e);return r}function Lk(t,e){const n=[];return Vk(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Vk(t,e,n){const r=Ua(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);dp(e,i=>{Vk(t,i,n)})}function mp(t,e){const n=Ua(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Ik(e,n.length>0?n:void 0)}dp(e,r=>{mp(t,r)})}function Fk(t,e){const n=Ac(Mk(t,e)),r=Uv(t.transactionQueueTree_,e);return V5(r,i=>{Km(t,i)}),Km(t,r),Ck(r,i=>{Km(t,i)}),n}function Km(t,e){const n=Ua(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(B(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(B(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(xs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Ik(e,void 0):n.length=s+1,wr(t.eventQueue_,Ac(e),i);for(let o=0;o<r.length;o++)ja(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function o3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fn(`Invalid query segment '${n}' in query '${t}'`)}return e}const gT=function(t,e){const n=a3(t),r=n.namespace;n.domain==="firebase.com"&&ei(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||EV();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new DR(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new De(n.pathString)}},a3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=s3(t.substring(h,d)));const p=o3(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",l3=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=_T.charAt(n%64),n=Math.floor(n/64);B(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=_T.charAt(e[i]);return B(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+dt(this.snapshot.exportVal())}}class c3{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return _e(this._path)?null:zR(this._path)}get ref(){return new ai(this._repo,this._path)}get _queryIdentifier(){const e=tT(this._queryParams),n=yv(e);return n==="{}"?"default":n}get _queryObject(){return tT(this._queryParams)}isEqual(e){if(e=it(e),!(e instanceof Hv))return!1;const n=this._repo===e._repo,r=qR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+iF(this._path)}}class ai extends Hv{constructor(e,n){super(e,n,new Cv,!1)}get parent(){const e=HR(this._path);return e===null?null:new ai(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ou{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new De(e),r=Mu(this.ref,e);return new Ou(this._node.getChild(n),r,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ou(i,Mu(this.ref,r),tt)))}hasChild(e){const n=new De(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Du(t,e){return t=it(t),t._checkNotDeleted("ref"),e!==void 0?Mu(t._root,e):t._root}function Mu(t,e){return t=it(t),we(t._path)===null?B5("child","path",e):Ak("child","path",e),new ai(t._repo,ft(t._path,e))}function d3(t,e){t=it(t),Pk("push",t._path),kk("push",e,t._path,!0);const n=Nk(t._repo),r=l3(n),i=Mu(t,r),s=Mu(t,r);let o;return e!=null?o=qv(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function qv(t,e){t=it(t),Pk("set",t._path),kk("set",e,t._path,!1);const n=new ep;return J5(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function jk(t){t=it(t);const e=new h3(()=>{}),n=new Kv(e);return X5(t._repo,t,n).then(r=>new Ou(r,new ai(t._repo,t._path),t._queryParams.getIndex()))}class Kv{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new u3("value",this,new Ou(e.snapshotNode,new ai(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new c3(this,e,n):null}matches(e){return e instanceof Kv?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}p5(ai);v5(ai);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="FIREBASE_DATABASE_EMULATOR_HOST",E_={};let p3=!1;function m3(t,e,n,r){t.repoInfo_=new DR(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function g3(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=gT(s,i),a=o.repoInfo,l;typeof process<"u"&&VE&&(l=VE[f3]),l?(s=`http://${l}?ns=${a.namespace}`,o=gT(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new NV(t.name,t.options,e);z5("Invalid Firebase Database URL",o),_e(o.path)||ei("Database URL must point to the root of a Firebase Database (not including a child path).");const h=y3(a,t,c,new bV(t.name,n));return new v3(h,t)}function _3(t,e){const n=E_[e];(!n||n[t.key]!==t)&&ei(`Database ${e}(${t.repoInfo_}) has already been deleted.`),t3(t),delete n[t.key]}function y3(t,e,n,r){let i=E_[e.name];i||(i={},E_[e.name]=i);let s=i[t.toURLString()];return s&&ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Q5(t,p3,n,r),i[t.toURLString()]=s,s}class v3{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Y5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ai(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ei("Cannot call "+e+" on a deleted database.")}}function w3(t=av(),e){const n=rp(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Rx("database");r&&E3(n,...r)}return n}function E3(t,e,n,r={}){t=it(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ei("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new nd(nd.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Px(r.mockUserToken,t.app.options.projectId);s=new nd(o)}m3(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){mV(io),Ws(new Qi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return g3(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),pr(FE,jE,t),pr(FE,jE,"esm2017")}Wr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Wr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};T3();var yT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ns,Uk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function C(){}C.prototype=_.prototype,T.D=_.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(k,b,N){for(var A=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)A[Se-2]=arguments[Se];return _.prototype[b].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,C){C||(C=0);var k=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)k[b]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(b=0;16>b;++b)k[b]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=T.g[0],C=T.g[1],b=T.g[2];var N=T.g[3],A=_+(N^C&(b^N))+k[0]+3614090360&4294967295;_=C+(A<<7&4294967295|A>>>25),A=N+(b^_&(C^b))+k[1]+3905402710&4294967295,N=_+(A<<12&4294967295|A>>>20),A=b+(C^N&(_^C))+k[2]+606105819&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(_^b&(N^_))+k[3]+3250441966&4294967295,C=b+(A<<22&4294967295|A>>>10),A=_+(N^C&(b^N))+k[4]+4118548399&4294967295,_=C+(A<<7&4294967295|A>>>25),A=N+(b^_&(C^b))+k[5]+1200080426&4294967295,N=_+(A<<12&4294967295|A>>>20),A=b+(C^N&(_^C))+k[6]+2821735955&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(_^b&(N^_))+k[7]+4249261313&4294967295,C=b+(A<<22&4294967295|A>>>10),A=_+(N^C&(b^N))+k[8]+1770035416&4294967295,_=C+(A<<7&4294967295|A>>>25),A=N+(b^_&(C^b))+k[9]+2336552879&4294967295,N=_+(A<<12&4294967295|A>>>20),A=b+(C^N&(_^C))+k[10]+4294925233&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(_^b&(N^_))+k[11]+2304563134&4294967295,C=b+(A<<22&4294967295|A>>>10),A=_+(N^C&(b^N))+k[12]+1804603682&4294967295,_=C+(A<<7&4294967295|A>>>25),A=N+(b^_&(C^b))+k[13]+4254626195&4294967295,N=_+(A<<12&4294967295|A>>>20),A=b+(C^N&(_^C))+k[14]+2792965006&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(_^b&(N^_))+k[15]+1236535329&4294967295,C=b+(A<<22&4294967295|A>>>10),A=_+(b^N&(C^b))+k[1]+4129170786&4294967295,_=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(_^C))+k[6]+3225465664&4294967295,N=_+(A<<9&4294967295|A>>>23),A=b+(_^C&(N^_))+k[11]+643717713&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^_&(b^N))+k[0]+3921069994&4294967295,C=b+(A<<20&4294967295|A>>>12),A=_+(b^N&(C^b))+k[5]+3593408605&4294967295,_=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(_^C))+k[10]+38016083&4294967295,N=_+(A<<9&4294967295|A>>>23),A=b+(_^C&(N^_))+k[15]+3634488961&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^_&(b^N))+k[4]+3889429448&4294967295,C=b+(A<<20&4294967295|A>>>12),A=_+(b^N&(C^b))+k[9]+568446438&4294967295,_=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(_^C))+k[14]+3275163606&4294967295,N=_+(A<<9&4294967295|A>>>23),A=b+(_^C&(N^_))+k[3]+4107603335&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^_&(b^N))+k[8]+1163531501&4294967295,C=b+(A<<20&4294967295|A>>>12),A=_+(b^N&(C^b))+k[13]+2850285829&4294967295,_=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(_^C))+k[2]+4243563512&4294967295,N=_+(A<<9&4294967295|A>>>23),A=b+(_^C&(N^_))+k[7]+1735328473&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^_&(b^N))+k[12]+2368359562&4294967295,C=b+(A<<20&4294967295|A>>>12),A=_+(C^b^N)+k[5]+4294588738&4294967295,_=C+(A<<4&4294967295|A>>>28),A=N+(_^C^b)+k[8]+2272392833&4294967295,N=_+(A<<11&4294967295|A>>>21),A=b+(N^_^C)+k[11]+1839030562&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^_)+k[14]+4259657740&4294967295,C=b+(A<<23&4294967295|A>>>9),A=_+(C^b^N)+k[1]+2763975236&4294967295,_=C+(A<<4&4294967295|A>>>28),A=N+(_^C^b)+k[4]+1272893353&4294967295,N=_+(A<<11&4294967295|A>>>21),A=b+(N^_^C)+k[7]+4139469664&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^_)+k[10]+3200236656&4294967295,C=b+(A<<23&4294967295|A>>>9),A=_+(C^b^N)+k[13]+681279174&4294967295,_=C+(A<<4&4294967295|A>>>28),A=N+(_^C^b)+k[0]+3936430074&4294967295,N=_+(A<<11&4294967295|A>>>21),A=b+(N^_^C)+k[3]+3572445317&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^_)+k[6]+76029189&4294967295,C=b+(A<<23&4294967295|A>>>9),A=_+(C^b^N)+k[9]+3654602809&4294967295,_=C+(A<<4&4294967295|A>>>28),A=N+(_^C^b)+k[12]+3873151461&4294967295,N=_+(A<<11&4294967295|A>>>21),A=b+(N^_^C)+k[15]+530742520&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^_)+k[2]+3299628645&4294967295,C=b+(A<<23&4294967295|A>>>9),A=_+(b^(C|~N))+k[0]+4096336452&4294967295,_=C+(A<<6&4294967295|A>>>26),A=N+(C^(_|~b))+k[7]+1126891415&4294967295,N=_+(A<<10&4294967295|A>>>22),A=b+(_^(N|~C))+k[14]+2878612391&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~_))+k[5]+4237533241&4294967295,C=b+(A<<21&4294967295|A>>>11),A=_+(b^(C|~N))+k[12]+1700485571&4294967295,_=C+(A<<6&4294967295|A>>>26),A=N+(C^(_|~b))+k[3]+2399980690&4294967295,N=_+(A<<10&4294967295|A>>>22),A=b+(_^(N|~C))+k[10]+4293915773&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~_))+k[1]+2240044497&4294967295,C=b+(A<<21&4294967295|A>>>11),A=_+(b^(C|~N))+k[8]+1873313359&4294967295,_=C+(A<<6&4294967295|A>>>26),A=N+(C^(_|~b))+k[15]+4264355552&4294967295,N=_+(A<<10&4294967295|A>>>22),A=b+(_^(N|~C))+k[6]+2734768916&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~_))+k[13]+1309151649&4294967295,C=b+(A<<21&4294967295|A>>>11),A=_+(b^(C|~N))+k[4]+4149444226&4294967295,_=C+(A<<6&4294967295|A>>>26),A=N+(C^(_|~b))+k[11]+3174756917&4294967295,N=_+(A<<10&4294967295|A>>>22),A=b+(_^(N|~C))+k[2]+718787259&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~_))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var C=_-this.blockSize,k=this.B,b=this.h,N=0;N<_;){if(b==0)for(;N<=C;)i(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<_;)if(k[b++]=T.charCodeAt(N++),b==this.blockSize){i(this,k),b=0;break}}else for(;N<_;)if(k[b++]=T[N++],b==this.blockSize){i(this,k),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var C=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=C&255,C/=256;for(this.u(T),T=Array(16),_=C=0;4>_;++_)for(var k=0;32>k;k+=8)T[C++]=this.g[_]>>>k&255;return T};function s(T,_){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=_(T)}function o(T,_){this.h=_;for(var C=[],k=!0,b=T.length-1;0<=b;b--){var N=T[b]|0;k&&N==_||(C[b]=N,k=!1)}this.g=C}var a={};function l(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return R(c(-T));for(var _=[],C=1,k=0;T>=C;k++)_[k]=T/C|0,C*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return R(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(_,8)),k=d,b=0;b<T.length;b+=8){var N=Math.min(8,T.length-b),A=parseInt(T.substring(b,b+N),_);8>N?(N=c(Math.pow(_,N)),k=k.j(N).add(c(A))):(k=k.j(C),k=k.add(c(A)))}return k}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-R(this).m();for(var T=0,_=1,C=0;C<this.g.length;C++){var k=this.i(C);T+=(0<=k?k:4294967296+k)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(S(this))return"-"+R(this).toString(T);for(var _=c(Math.pow(T,6)),C=this,k="";;){var b=P(C,_).g;C=v(C,b.j(_));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=b,y(C))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function S(T){return T.h==-1}t.l=function(T){return T=v(this,T),S(T)?-1:y(T)?0:1};function R(T){for(var _=T.g.length,C=[],k=0;k<_;k++)C[k]=~T.g[k];return new o(C,~T.h).add(p)}t.abs=function(){return S(this)?R(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),C=[],k=0,b=0;b<=_;b++){var N=k+(this.i(b)&65535)+(T.i(b)&65535),A=(N>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);k=A>>>16,N&=65535,A&=65535,C[b]=A<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function v(T,_){return T.add(R(_))}t.j=function(T){if(y(this)||y(T))return d;if(S(this))return S(T)?R(this).j(R(T)):R(R(this).j(T));if(S(T))return R(this.j(R(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var _=this.g.length+T.g.length,C=[],k=0;k<2*_;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var b=0;b<T.g.length;b++){var N=this.i(k)>>>16,A=this.i(k)&65535,Se=T.i(b)>>>16,ct=T.i(b)&65535;C[2*k+2*b]+=A*ct,w(C,2*k+2*b),C[2*k+2*b+1]+=N*ct,w(C,2*k+2*b+1),C[2*k+2*b+1]+=A*Se,w(C,2*k+2*b+1),C[2*k+2*b+2]+=N*Se,w(C,2*k+2*b+2)}for(k=0;k<_;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=_;k<2*_;k++)C[k]=0;return new o(C,0)};function w(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function E(T,_){this.g=T,this.h=_}function P(T,_){if(y(_))throw Error("division by zero");if(y(T))return new E(d,d);if(S(T))return _=P(R(T),_),new E(R(_.g),R(_.h));if(S(_))return _=P(T,R(_)),new E(R(_.g),_.h);if(30<T.g.length){if(S(T)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var C=p,k=_;0>=k.l(T);)C=O(C),k=O(k);var b=M(C,1),N=M(k,1);for(k=M(k,2),C=M(C,2);!y(k);){var A=N.add(k);0>=A.l(T)&&(b=b.add(C),N=A),k=M(k,1),C=M(C,1)}return _=v(T,b.j(_)),new E(b,_)}for(b=d;0<=T.l(_);){for(C=Math.max(1,Math.floor(T.m()/_.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=c(C),A=N.j(_);S(A)||0<A.l(T);)C-=k,N=c(C),A=N.j(_);y(N)&&(N=p),b=b.add(N),T=v(T,A)}return new E(b,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),C=[],k=0;k<_;k++)C[k]=this.i(k)&T.i(k);return new o(C,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),C=[],k=0;k<_;k++)C[k]=this.i(k)|T.i(k);return new o(C,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),C=[],k=0;k<_;k++)C[k]=this.i(k)^T.i(k);return new o(C,this.h^T.h)};function O(T){for(var _=T.g.length+1,C=[],k=0;k<_;k++)C[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(C,T.h)}function M(T,_){var C=_>>5;_%=32;for(var k=T.g.length-C,b=[],N=0;N<k;N++)b[N]=0<_?T.i(N+C)>>>_|T.i(N+C+1)<<32-_:T.i(N+C);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Uk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ns=o}).apply(typeof yT<"u"?yT:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $k,Bk,Al,zk,id,T_,Wk,Hk,qk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var D=u[I];if(!(D in m))break e;m=m[D]}u=u[u.length-1],I=m[u],f=f(I),f!=I&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,I=!1,D={next:function(){if(!I&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return I=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,I),u.apply(f,D)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(I,D,L){for(var W=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)W[Ne-2]=arguments[Ne];return f.prototype[D].apply(I,W)}}function S(u){const f=u.length;if(0<f){const m=Array(f);for(let I=0;I<f;I++)m[I]=u[I];return m}return[]}function R(u,f){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const D=u.length||0,L=I.length||0;u.length=D+L;for(let W=0;W<L;W++)u[D+W]=I[W]}else u.push(I)}}class v{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(u,f,m){for(const I in u)f.call(m,u[I],I,u)}function T(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function _(u){const f={};for(const m in u)f[m]=u[m];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let m,I;for(let D=1;D<arguments.length;D++){I=arguments[D];for(m in I)u[m]=I[m];for(let L=0;L<C.length;L++)m=C[L],Object.prototype.hasOwnProperty.call(I,m)&&(u[m]=I[m])}}function b(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function A(){var u=G;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Se{constructor(){this.h=this.g=null}add(f,m){const I=ct.get();I.set(f,m),this.h?this.h.next=I:this.g=I,this.h=I}}var ct=new v(()=>new Qt,u=>u.reset());class Qt{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,z=!1,G=new Se,Z=()=>{const u=a.Promise.resolve(void 0);Me=()=>{u.then(de)}};var de=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(m){N(m)}var f=ct;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}z=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function je(u,f){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(O){e:{try{P(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:qe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&je.aa.h.call(this)}}y(je,me);var qe={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),xr=0;function Rr(u,f,m,I,D){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!I,this.ha=D,this.key=++xr,this.da=this.fa=!1}function ui(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function kr(u){this.src=u,this.g={},this.h=0}kr.prototype.add=function(u,f,m,I,D){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var W=Up(u,f,I,D);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new Rr(f,this.src,L,!!I,D),f.fa=m,u.push(f)),f};function Rn(u,f){var m=f.type;if(m in u.g){var I=u.g[m],D=Array.prototype.indexOf.call(I,f,void 0),L;(L=0<=D)&&Array.prototype.splice.call(I,D,1),L&&(ui(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Up(u,f,m,I){for(var D=0;D<u.length;++D){var L=u[D];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==I)return D}return-1}var $p="closure_lm_"+(1e6*Math.random()|0),Bp={};function ew(u,f,m,I,D){if(Array.isArray(f)){for(var L=0;L<f.length;L++)ew(u,f[L],m,I,D);return null}return m=rw(m),u&&u[st]?u.K(f,m,c(I)?!!I.capture:!!I,D):yN(u,f,m,!1,I,D)}function yN(u,f,m,I,D,L){if(!f)throw Error("Invalid event type");var W=c(D)?!!D.capture:!!D,Ne=Wp(u);if(Ne||(u[$p]=Ne=new kr(u)),m=Ne.add(f,m,I,W,L),m.proxy)return m;if(I=vN(),m.proxy=I,I.src=u,I.listener=m,u.addEventListener)Fe||(D=W),D===void 0&&(D=!1),u.addEventListener(f.toString(),I,D);else if(u.attachEvent)u.attachEvent(nw(f.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function vN(){function u(m){return f.call(u.src,u.listener,m)}const f=wN;return u}function tw(u,f,m,I,D){if(Array.isArray(f))for(var L=0;L<f.length;L++)tw(u,f[L],m,I,D);else I=c(I)?!!I.capture:!!I,m=rw(m),u&&u[st]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=Up(L,m,I,D),-1<m&&(ui(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=Wp(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Up(f,m,I,D)),(m=-1<u?f[u]:null)&&zp(m))}function zp(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[st])Rn(f.i,u);else{var m=u.type,I=u.proxy;f.removeEventListener?f.removeEventListener(m,I,u.capture):f.detachEvent?f.detachEvent(nw(m),I):f.addListener&&f.removeListener&&f.removeListener(I),(m=Wp(f))?(Rn(m,u),m.h==0&&(m.src=null,f[$p]=null)):ui(u)}}}function nw(u){return u in Bp?Bp[u]:Bp[u]="on"+u}function wN(u,f){if(u.da)u=!0;else{f=new je(f,this);var m=u.listener,I=u.ha||u.src;u.fa&&zp(u),u=m.call(I,f)}return u}function Wp(u){return u=u[$p],u instanceof kr?u:null}var Hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function rw(u){return typeof u=="function"?u:(u[Hp]||(u[Hp]=function(f){return u.handleEvent(f)}),u[Hp])}function Dt(){te.call(this),this.i=new kr(this),this.M=this,this.F=null}y(Dt,te),Dt.prototype[st]=!0,Dt.prototype.removeEventListener=function(u,f,m,I){tw(this,u,f,m,I)};function Yt(u,f){var m,I=u.F;if(I)for(m=[];I;I=I.F)m.push(I);if(u=u.M,I=f.type||f,typeof f=="string")f=new me(f,u);else if(f instanceof me)f.target=f.target||u;else{var D=f;f=new me(I,u),k(f,D)}if(D=!0,m)for(var L=m.length-1;0<=L;L--){var W=f.g=m[L];D=qc(W,I,!0,f)&&D}if(W=f.g=u,D=qc(W,I,!0,f)&&D,D=qc(W,I,!1,f)&&D,m)for(L=0;L<m.length;L++)W=f.g=m[L],D=qc(W,I,!1,f)&&D}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],I=0;I<m.length;I++)ui(m[I]);delete u.g[f],u.h--}}this.F=null},Dt.prototype.K=function(u,f,m,I){return this.i.add(String(u),f,!1,m,I)},Dt.prototype.L=function(u,f,m,I){return this.i.add(String(u),f,!0,m,I)};function qc(u,f,m,I){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,L=0;L<f.length;++L){var W=f[L];if(W&&!W.da&&W.capture==m){var Ne=W.listener,It=W.ha||W.src;W.fa&&Rn(u.i,W),D=Ne.call(It,I)!==!1&&D}}return D&&!I.defaultPrevented}function iw(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function sw(u){u.g=iw(()=>{u.g=null,u.i&&(u.i=!1,sw(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class EN extends te{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:sw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qa(u){te.call(this),this.h=u,this.g={}}y(Qa,te);var ow=[];function aw(u){M(u.g,function(f,m){this.g.hasOwnProperty(m)&&zp(f)},u),u.g={}}Qa.prototype.N=function(){Qa.aa.N.call(this),aw(this)},Qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qp=a.JSON.stringify,TN=a.JSON.parse,IN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Kp(){}Kp.prototype.h=null;function lw(u){return u.h||(u.h=u.i())}function uw(){}var Ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gp(){me.call(this,"d")}y(Gp,me);function Qp(){me.call(this,"c")}y(Qp,me);var fs={},cw=null;function Kc(){return cw=cw||new Dt}fs.La="serverreachability";function hw(u){me.call(this,fs.La,u)}y(hw,me);function Za(u){const f=Kc();Yt(f,new hw(f))}fs.STAT_EVENT="statevent";function dw(u,f){me.call(this,fs.STAT_EVENT,u),this.stat=f}y(dw,me);function Zt(u){const f=Kc();Yt(f,new dw(f,u))}fs.Ma="timingevent";function fw(u,f){me.call(this,fs.Ma,u),this.size=f}y(fw,me);function Xa(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ja(){this.g=!0}Ja.prototype.xa=function(){this.g=!1};function SN(u,f,m,I,D,L){u.info(function(){if(u.g)if(L)for(var W="",Ne=L.split("&"),It=0;It<Ne.length;It++){var Re=Ne[It].split("=");if(1<Re.length){var Mt=Re[0];Re=Re[1];var Lt=Mt.split("_");W=2<=Lt.length&&Lt[1]=="type"?W+(Mt+"="+Re+"&"):W+(Mt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+I+") [attempt "+D+"]: "+f+`
`+m+`
`+W})}function CN(u,f,m,I,D,L,W){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+D+"]: "+f+`
`+m+`
`+L+" "+W})}function po(u,f,m,I){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+RN(u,m)+(I?" "+I:"")})}function xN(u,f){u.info(function(){return"TIMEOUT: "+f})}Ja.prototype.info=function(){};function RN(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var I=m[u];if(!(2>I.length)){var D=I[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return qp(m)}catch{return f}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yp;function Qc(){}y(Qc,Kp),Qc.prototype.g=function(){return new XMLHttpRequest},Qc.prototype.i=function(){return{}},Yp=new Qc;function ci(u,f,m,I){this.j=u,this.i=f,this.l=m,this.R=I||1,this.U=new Qa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mw}function mw(){this.i=null,this.g="",this.h=!1}var gw={},Zp={};function Xp(u,f,m){u.L=1,u.v=Jc(Ar(f)),u.m=m,u.P=!0,_w(u,null)}function _w(u,f){u.F=Date.now(),Yc(u),u.A=Ar(u.v);var m=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),bw(m.i,"t",I),u.C=0,m=u.j.J,u.h=new mw,u.g=Qw(u.j,m?f:null,!u.m),0<u.O&&(u.M=new EN(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,I=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(ow[0]=D.toString()),D=ow);for(var L=0;L<D.length;L++){var W=ew(m,D[L],I||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Za(),SN(u.i,u.u,u.A,u.l,u.R,u.m)}ci.prototype.ca=function(u){u=u.target;const f=this.M;f&&Pr(u)==3?f.j():this.Y(u)},ci.prototype.Y=function(u){try{if(u==this.g)e:{const Lt=Pr(this.g);var f=this.g.Ba();const _o=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Fw(this.g)))){this.J||Lt!=4||f==7||(f==8||0>=_o?Za(3):Za(2)),Jp(this);var m=this.g.Z();this.X=m;t:if(yw(this)){var I=Fw(this.g);u="";var D=I.length,L=Pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),el(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,u+=this.h.i.decode(I[f],{stream:!(L&&f==D-1)});I.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,CN(this.i,this.u,this.A,this.l,this.R,Lt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,It=this.g;if((Ne=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ne)){var Re=Ne;break t}}Re=null}if(m=Re)po(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,em(this,m);else{this.o=!1,this.s=3,Zt(12),ps(this),el(this);break e}}if(this.P){m=!0;let jn;for(;!this.J&&this.C<W.length;)if(jn=kN(this,W),jn==Zp){Lt==4&&(this.s=4,Zt(14),m=!1),po(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==gw){this.s=4,Zt(15),po(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else po(this.i,this.l,jn,null),em(this,jn);if(yw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||W.length!=0||this.h.h||(this.s=1,Zt(16),m=!1),this.o=this.o&&m,!m)po(this.i,this.l,W,"[Invalid Chunked Response]"),ps(this),el(this);else if(0<W.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),om(Mt),Mt.M=!0,Zt(11))}}else po(this.i,this.l,W,null),em(this,W);Lt==4&&ps(this),this.o&&!this.J&&(Lt==4?Hw(this.j,this):(this.o=!1,Yc(this)))}else HN(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),ps(this),el(this)}}}catch{}finally{}};function yw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function kN(u,f){var m=u.C,I=f.indexOf(`
`,m);return I==-1?Zp:(m=Number(f.substring(m,I)),isNaN(m)?gw:(I+=1,I+m>f.length?Zp:(f=f.slice(I,I+m),u.C=I+m,f)))}ci.prototype.cancel=function(){this.J=!0,ps(this)};function Yc(u){u.S=Date.now()+u.I,vw(u,u.I)}function vw(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Xa(p(u.ba,u),f)}function Jp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ci.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(xN(this.i,this.A),this.L!=2&&(Za(),Zt(17)),ps(this),this.s=2,el(this)):vw(this,this.S-u)};function el(u){u.j.G==0||u.J||Hw(u.j,u)}function ps(u){Jp(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,aw(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function em(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||tm(m.h,u))){if(!u.K&&tm(m.h,u)&&m.G==3){try{var I=m.Da.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var D=I;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)ih(m),nh(m);else break e;sm(m),Zt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=Xa(p(m.Za,m),6e3));if(1>=Tw(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else gs(m,11)}else if((u.K||m.g==u)&&ih(m),!w(f))for(D=m.Da.g.parse(f),f=0;f<D.length;f++){let Re=D[f];if(m.T=Re[0],Re=Re[1],m.G==2)if(Re[0]=="c"){m.K=Re[1],m.ia=Re[2];const Mt=Re[3];Mt!=null&&(m.la=Mt,m.j.info("VER="+m.la));const Lt=Re[4];Lt!=null&&(m.Aa=Lt,m.j.info("SVER="+m.Aa));const _o=Re[5];_o!=null&&typeof _o=="number"&&0<_o&&(I=1.5*_o,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const jn=u.g;if(jn){const oh=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oh){var L=I.h;L.g||oh.indexOf("spdy")==-1&&oh.indexOf("quic")==-1&&oh.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(nm(L,L.h),L.h=null))}if(I.D){const am=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;am&&(I.ya=am,Ue(I.I,I.D,am))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var W=u;if(I.qa=Gw(I,I.J?I.ia:null,I.W),W.K){Iw(I.h,W);var Ne=W,It=I.L;It&&(Ne.I=It),Ne.B&&(Jp(Ne),Yc(Ne)),I.g=W}else zw(I);0<m.i.length&&rh(m)}else Re[0]!="stop"&&Re[0]!="close"||gs(m,7);else m.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?gs(m,7):im(m):Re[0]!="noop"&&m.l&&m.l.ta(Re),m.v=0)}}Za(4)}catch{}}var AN=class{constructor(u,f){this.g=u,this.map=f}};function ww(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ew(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Tw(u){return u.h?1:u.g?u.g.size:0}function tm(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function nm(u,f){u.g?u.g.add(f):u.h=f}function Iw(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}ww.prototype.cancel=function(){if(this.i=Sw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Sw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return S(u.i)}function PN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,I=0;I<m;I++)f.push(u[I]);return f}f=[],m=0;for(I in u)f[m++]=u[I];return f}function bN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const I in u)f[m++]=I;return f}}}function Cw(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=bN(u),I=PN(u),D=I.length,L=0;L<D;L++)f.call(void 0,I[L],m&&m[L],u)}var xw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NN(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var I=u[m].indexOf("="),D=null;if(0<=I){var L=u[m].substring(0,I);D=u[m].substring(I+1)}else L=u[m];f(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ms(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ms){this.h=u.h,Zc(this,u.j),this.o=u.o,this.g=u.g,Xc(this,u.s),this.l=u.l;var f=u.i,m=new rl;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Rw(this,m),this.m=u.m}else u&&(f=String(u).match(xw))?(this.h=!1,Zc(this,f[1]||"",!0),this.o=tl(f[2]||""),this.g=tl(f[3]||"",!0),Xc(this,f[4]),this.l=tl(f[5]||"",!0),Rw(this,f[6]||"",!0),this.m=tl(f[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}ms.prototype.toString=function(){var u=[],f=this.j;f&&u.push(nl(f,kw,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(nl(f,kw,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(nl(m,m.charAt(0)=="/"?MN:DN,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",nl(m,VN)),u.join("")};function Ar(u){return new ms(u)}function Zc(u,f,m){u.j=m?tl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Xc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Rw(u,f,m){f instanceof rl?(u.i=f,FN(u.i,u.h)):(m||(f=nl(f,LN)),u.i=new rl(f,u.h))}function Ue(u,f,m){u.i.set(f,m)}function Jc(u){return Ue(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function tl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nl(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,ON),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ON(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var kw=/[#\/\?@]/g,DN=/[#\?:]/g,MN=/[#\?]/g,LN=/[#\?@]/g,VN=/#/g;function rl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function hi(u){u.g||(u.g=new Map,u.h=0,u.i&&NN(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=rl.prototype,t.add=function(u,f){hi(this),this.i=null,u=mo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Aw(u,f){hi(u),f=mo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Pw(u,f){return hi(u),f=mo(u,f),u.g.has(f)}t.forEach=function(u,f){hi(this),this.g.forEach(function(m,I){m.forEach(function(D){u.call(f,D,I,this)},this)},this)},t.na=function(){hi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let I=0;I<f.length;I++){const D=u[I];for(let L=0;L<D.length;L++)m.push(f[I])}return m},t.V=function(u){hi(this);let f=[];if(typeof u=="string")Pw(this,u)&&(f=f.concat(this.g.get(mo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return hi(this),this.i=null,u=mo(this,u),Pw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function bw(u,f,m){Aw(u,f),0<m.length&&(u.i=null,u.g.set(mo(u,f),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var I=f[m];const L=encodeURIComponent(String(I)),W=this.V(I);for(I=0;I<W.length;I++){var D=L;W[I]!==""&&(D+="="+encodeURIComponent(String(W[I]))),u.push(D)}}return this.i=u.join("&")};function mo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function FN(u,f){f&&!u.j&&(hi(u),u.i=null,u.g.forEach(function(m,I){var D=I.toLowerCase();I!=D&&(Aw(this,I),bw(this,D,m))},u)),u.j=f}function jN(u,f){const m=new Ja;if(a.Image){const I=new Image;I.onload=g(di,m,"TestLoadImage: loaded",!0,f,I),I.onerror=g(di,m,"TestLoadImage: error",!1,f,I),I.onabort=g(di,m,"TestLoadImage: abort",!1,f,I),I.ontimeout=g(di,m,"TestLoadImage: timeout",!1,f,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else f(!1)}function UN(u,f){const m=new Ja,I=new AbortController,D=setTimeout(()=>{I.abort(),di(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:I.signal}).then(L=>{clearTimeout(D),L.ok?di(m,"TestPingServer: ok",!0,f):di(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),di(m,"TestPingServer: error",!1,f)})}function di(u,f,m,I,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),I(m)}catch{}}function $N(){this.g=new IN}function BN(u,f,m){const I=m||"";try{Cw(u,function(D,L){let W=D;c(D)&&(W=qp(D)),f.push(I+L+"="+encodeURIComponent(W))})}catch(D){throw f.push(I+"type="+encodeURIComponent("_badmap")),D}}function il(u){this.l=u.Ub||null,this.j=u.eb||!1}y(il,Kp),il.prototype.g=function(){return new eh(this.l,this.j)},il.prototype.i=function(u){return function(){return u}}({});function eh(u,f){Dt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(eh,Dt),t=eh.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,ol(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?sl(this):ol(this),this.readyState==3&&Nw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,sl(this))},t.Qa=function(u){this.g&&(this.response=u,sl(this))},t.ga=function(){this.g&&sl(this)};function sl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ol(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function ol(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(eh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ow(u){let f="";return M(u,function(m,I){f+=I,f+=":",f+=m,f+=`\r
`}),f}function rm(u,f,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=Ow(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ue(u,f,m))}function Xe(u){Dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Xe,Dt);var zN=/^https?$/i,WN=["POST","PUT"];t=Xe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yp.g(),this.v=this.o?lw(this.o):lw(Yp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){Dw(this,L);return}if(u=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var D in I)m.set(D,I[D]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const L of I.keys())m.set(L,I.get(L));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(WN,f,void 0))||I||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of m)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vw(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Dw(this,L)}};function Dw(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Mw(u),th(u)}function Mw(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Yt(this,"complete"),Yt(this,"abort"),th(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),th(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lw(this):this.bb())},t.bb=function(){Lw(this)};function Lw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Pr(u)!=4||u.Z()!=2)){if(u.u&&Pr(u)==4)iw(u.Ea,0,u);else if(Yt(u,"readystatechange"),Pr(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var I;if(I=W===0){var D=String(u.D).match(xw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),I=!zN.test(D?D.toLowerCase():"")}m=I}if(m)Yt(u,"complete"),Yt(u,"success");else{u.m=6;try{var L=2<Pr(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",Mw(u)}}finally{th(u)}}}}function th(u,f){if(u.g){Vw(u);const m=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Yt(u,"ready");try{m.onreadystatechange=I}catch{}}}function Vw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Pr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),TN(f)}};function Fw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HN(u){const f={};u=(u.g&&2<=Pr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(w(u[I]))continue;var m=b(u[I]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[D]||[];f[D]=L,L.push(m)}T(f,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function al(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function jw(u){this.Aa=0,this.i=[],this.j=new Ja,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=al("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=al("baseRetryDelayMs",5e3,u),this.cb=al("retryDelaySeedMs",1e4,u),this.Wa=al("forwardChannelMaxRetries",2,u),this.wa=al("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ww(u&&u.concurrentRequestLimit),this.Da=new $N,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jw.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,I){Zt(0),this.W=u,this.H=f||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=Gw(this,null,this.W),rh(this)};function im(u){if(Uw(u),u.G==3){var f=u.U++,m=Ar(u.I);if(Ue(m,"SID",u.K),Ue(m,"RID",f),Ue(m,"TYPE","terminate"),ll(u,m),f=new ci(u,u.j,f),f.L=2,f.v=Jc(Ar(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Qw(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Yc(f)}Kw(u)}function nh(u){u.g&&(om(u),u.g.cancel(),u.g=null)}function Uw(u){nh(u),u.u&&(a.clearTimeout(u.u),u.u=null),ih(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function rh(u){if(!Ew(u.h)&&!u.s){u.s=!0;var f=u.Ga;Me||Z(),z||(Me(),z=!0),G.add(f,u),u.B=0}}function qN(u,f){return Tw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Xa(p(u.Ga,u,f),qw(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new ci(this,this.j,u);let L=this.o;if(this.S&&(L?(L=_(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(f+=I,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Bw(this,D,f),m=Ar(this.I),Ue(m,"RID",u),Ue(m,"CVER",22),this.D&&Ue(m,"X-HTTP-Session-Id",this.D),ll(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(Ow(L)))+"&"+f:this.m&&rm(m,this.m,L)),nm(this.h,D),this.Ua&&Ue(m,"TYPE","init"),this.P?(Ue(m,"$req",f),Ue(m,"SID","null"),D.T=!0,Xp(D,m,null)):Xp(D,m,f),this.G=2}}else this.G==3&&(u?$w(this,u):this.i.length==0||Ew(this.h)||$w(this))};function $w(u,f){var m;f?m=f.l:m=u.U++;const I=Ar(u.I);Ue(I,"SID",u.K),Ue(I,"RID",m),Ue(I,"AID",u.T),ll(u,I),u.m&&u.o&&rm(I,u.m,u.o),m=new ci(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Bw(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),nm(u.h,m),Xp(m,I,f)}function ll(u,f){u.H&&M(u.H,function(m,I){Ue(f,I,m)}),u.l&&Cw({},function(m,I){Ue(f,I,m)})}function Bw(u,f,m){m=Math.min(u.i.length,m);var I=u.l?p(u.l.Na,u.l,u):null;e:{var D=u.i;let L=-1;for(;;){const W=["count="+m];L==-1?0<m?(L=D[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Ne=!0;for(let It=0;It<m;It++){let Re=D[It].g;const Mt=D[It].map;if(Re-=L,0>Re)L=Math.max(0,D[It].g-100),Ne=!1;else try{BN(Mt,W,"req"+Re+"_")}catch{I&&I(Mt)}}if(Ne){I=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,I}function zw(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Me||Z(),z||(Me(),z=!0),G.add(f,u),u.v=0}}function sm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Xa(p(u.Fa,u),qw(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ww(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Xa(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),nh(this),Ww(this))};function om(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ww(u){u.g=new ci(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Ar(u.qa);Ue(f,"RID","rpc"),Ue(f,"SID",u.K),Ue(f,"AID",u.T),Ue(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ue(f,"TO",u.ja),Ue(f,"TYPE","xmlhttp"),ll(u,f),u.m&&u.o&&rm(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Jc(Ar(f)),m.m=null,m.P=!0,_w(m,u)}t.Za=function(){this.C!=null&&(this.C=null,nh(this),sm(this),Zt(19))};function ih(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Hw(u,f){var m=null;if(u.g==f){ih(u),om(u),u.g=null;var I=2}else if(tm(u.h,f))m=f.D,Iw(u.h,f),I=1;else return;if(u.G!=0){if(f.o)if(I==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var D=u.B;I=Kc(),Yt(I,new fw(I,m)),rh(u)}else zw(u);else if(D=f.s,D==3||D==0&&0<f.X||!(I==1&&qN(u,f)||I==2&&sm(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),D){case 1:gs(u,5);break;case 4:gs(u,10);break;case 3:gs(u,6);break;default:gs(u,2)}}}function qw(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function gs(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),I=u.Xa;const D=!I;I=new ms(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zc(I,"https"),Jc(I),D?jN(I.toString(),m):UN(I.toString(),m)}else Zt(2);u.G=0,u.l&&u.l.sa(f),Kw(u),Uw(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function Kw(u){if(u.G=0,u.ka=[],u.l){const f=Sw(u.h);(f.length!=0||u.i.length!=0)&&(R(u.ka,f),R(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function Gw(u,f,m){var I=m instanceof ms?Ar(m):new ms(m);if(I.g!="")f&&(I.g=f+"."+I.g),Xc(I,I.s);else{var D=a.location;I=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var L=new ms(null);I&&Zc(L,I),f&&(L.g=f),D&&Xc(L,D),m&&(L.l=m),I=L}return m=u.D,f=u.ya,m&&f&&Ue(I,m,f),Ue(I,"VER",u.la),ll(u,I),I}function Qw(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Xe(new il({eb:m})):new Xe(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yw(){}t=Yw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sh(){}sh.prototype.g=function(u,f){return new mn(u,f)};function mn(u,f){Dt.call(this),this.g=new jw(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new go(this)}y(mn,Dt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){im(this.g)},mn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=qp(u),u=m);f.i.push(new AN(f.Ya++,u)),f.G==3&&rh(f)},mn.prototype.N=function(){this.g.l=null,delete this.j,im(this.g),delete this.g,mn.aa.N.call(this)};function Zw(u){Gp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(Zw,Gp);function Xw(){Qp.call(this),this.status=1}y(Xw,Qp);function go(u){this.g=u}y(go,Yw),go.prototype.ua=function(){Yt(this.g,"a")},go.prototype.ta=function(u){Yt(this.g,new Zw(u))},go.prototype.sa=function(u){Yt(this.g,new Xw)},go.prototype.ra=function(){Yt(this.g,"b")},sh.prototype.createWebChannel=sh.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,qk=function(){return new sh},Hk=function(){return Kc()},Wk=fs,T_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,id=Gc,pw.COMPLETE="complete",zk=pw,uw.EventType=Ya,Ya.OPEN="a",Ya.CLOSE="b",Ya.ERROR="c",Ya.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,Al=uw,Bk=il,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,$k=Xe}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});const vT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new np("@firebase/firestore");function El(){return Ys.logLevel}function Q(t,...e){if(Ys.logLevel<=ve.DEBUG){const n=e.map(Gv);Ys.debug(`Firestore (${$a}): ${t}`,...n)}}function ti(t,...e){if(Ys.logLevel<=ve.ERROR){const n=e.map(Gv);Ys.error(`Firestore (${$a}): ${t}`,...n)}}function ma(t,...e){if(Ys.logLevel<=ve.WARN){const n=e.map(Gv);Ys.warn(`Firestore (${$a}): ${t}`,...n)}}function Gv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: `+t;throw ti(e),new Error(e)}function Oe(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class S3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class C3{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new Kk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new $t(e)}}class x3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class R3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new x3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new k3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=P3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function ga(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new gt(0,0))}static max(){return new le(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends Lu{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new et(n)}static emptyPath(){return new et([])}}const b3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Lu{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return b3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(et.fromString(e))}static fromName(e){return new ee(et.fromString(e).popFirst(5))}static empty(){return new ee(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new et(e.slice()))}}function N3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Ji(i,ee.empty(),e)}function O3(t){return new Ji(t.readTime,t.key,-1)}class Ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ji(le.min(),ee.empty(),-1)}static max(){return new Ji(le.max(),ee.empty(),-1)}}function D3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==M3)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function V3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qv.oe=-1;function gp(t){return t==null}function uf(t){return t===0&&1/t==-1/0}function F3(t){return typeof t=="number"&&Number.isInteger(t)&&!uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ba(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=i??Rt.EMPTY,this.right=s??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ET(this.data.getIterator())}getIteratorFrom(e){return new ET(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class ET{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new bt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Yk("Invalid base64 string: "+s):s}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const j3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(Oe(!!t),typeof t=="string"){let e=0;const n=j3.exec(t);if(Oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zs(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zv(t){const e=t.mapValue.fields.__previous_value__;return Yv(e)?Zv(e):e}function Vu(t){const e=es(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Fu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yv(t)?4:B3(t)?9007199254740991:$3(t)?10:11:ae()}function Er(t,e){if(t===e)return!0;const n=Xs(t);if(n!==Xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vu(t).isEqual(Vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=es(i.timestampValue),a=es(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zs(i.bytesValue).isEqual(Zs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nt(i.doubleValue),a=nt(s.doubleValue);return o===a?uf(o)===uf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wT(o)!==wT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Er(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function ju(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function _a(t,e){if(t===e)return 0;const n=Xs(t),r=Xs(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nt(s.integerValue||s.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return TT(t.timestampValue,e.timestampValue);case 4:return TT(Vu(t),Vu(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Zs(s),l=Zs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ke(a[c],l[c]);if(h!==0)return h}return ke(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ke(nt(s.latitude),nt(o.latitude));return a!==0?a:ke(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return IT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=ke(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:IT(g,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ah.mapValue&&o===Ah.mapValue)return 0;if(s===Ah.mapValue)return 1;if(o===Ah.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=ke(l[d],h[d]);if(p!==0)return p;const g=_a(a[l[d]],c[h[d]]);if(g!==0)return g}return ke(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function TT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=es(t),r=es(e),i=ke(n.seconds,r.seconds);return i!==0?i:ke(n.nanos,r.nanos)}function IT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_a(n[i],r[i]);if(s)return s}return ke(n.length,r.length)}function ya(t){return I_(t)}function I_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=I_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${I_(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function S_(t){return!!t&&"integerValue"in t}function Xv(t){return!!t&&"arrayValue"in t}function ST(t){return!!t&&"nullValue"in t}function CT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sd(t){return!!t&&"mapValue"in t}function $3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Zl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ba(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function B3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(n)}setAll(e){let n=At.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Zl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];sd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ba(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Nn(Zl(this.value))}}function Zk(t){const e=[];return Ba(t.fields,(n,r)=>{const i=new At([n]);if(sd(r)){const s=Zk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Wt(e,0,le.min(),le.min(),le.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,i){return new Wt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Wt(e,2,n,le.min(),le.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,le.min(),le.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.position=e,this.inclusive=n}}function xT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=_a(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function RT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n="asc"){this.field=e,this.dir=n}}function z3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{}class pt extends Xk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H3(e,n,r):n==="array-contains"?new G3(e,r):n==="in"?new Q3(e,r):n==="not-in"?new Y3(e,r):n==="array-contains-any"?new Z3(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new q3(e,r):new K3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_a(n,this.value)):n!==null&&Xs(this.value)===Xs(n)&&this.matchesComparison(_a(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends Xk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tr(e,n)}matches(e){return Jk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jk(t){return t.op==="and"}function eA(t){return W3(t)&&Jk(t)}function W3(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function C_(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+ya(t.value);if(eA(t))return t.filters.map(e=>C_(e)).join(",");{const e=t.filters.map(n=>C_(n)).join(",");return`${t.op}(${e})`}}function tA(t,e){return t instanceof pt?function(r,i){return i instanceof pt&&r.op===i.op&&r.field.isEqual(i.field)&&Er(r.value,i.value)}(t,e):t instanceof Tr?function(r,i){return i instanceof Tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tA(o,i.filters[a]),!0):!1}(t,e):void ae()}function nA(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${ya(n.value)}`}(t):t instanceof Tr?function(n){return n.op.toString()+" {"+n.getFilters().map(nA).join(" ,")+"}"}(t):"Filter"}class H3 extends pt{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class q3 extends pt{constructor(e,n){super(e,"in",n),this.keys=rA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class K3 extends pt{constructor(e,n){super(e,"not-in",n),this.keys=rA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class G3 extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xv(n)&&ju(n.arrayValue,this.value)}}class Q3 extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ju(this.value.arrayValue,n)}}class Y3 extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ju(this.value.arrayValue,n)}}class Z3 extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ju(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function kT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new X3(t,e,n,r,i,s,o)}function Jv(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>C_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),gp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ya(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ya(r)).join(",")),e.ue=n}return e.ue}function e0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!z3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!RT(t.startAt,e.startAt)&&RT(t.endAt,e.endAt)}function x_(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function J3(t,e,n,r,i,s,o,a){return new _p(t,e,n,r,i,s,o,a)}function t0(t){return new _p(t)}function AT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ej(t){return t.collectionGroup!==null}function Xl(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bt(At.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hf(s,r))}),n.has(At.keyField().canonicalString())||e.ce.push(new hf(At.keyField(),r))}return e.ce}function _r(t){const e=ue(t);return e.le||(e.le=tj(e,Xl(t))),e.le}function tj(t,e){if(t.limitType==="F")return kT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hf(i.field,s)});const n=t.endAt?new cf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cf(t.startAt.position,t.startAt.inclusive):null;return kT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function R_(t,e,n){return new _p(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yp(t,e){return e0(_r(t),_r(e))&&t.limitType===e.limitType}function iA(t){return`${Jv(_r(t))}|lt:${t.limitType}`}function Eo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nA(i)).join(", ")}]`),gp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ya(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ya(i)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function vp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=xT(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Xl(r),i)||r.endAt&&!function(o,a,l){const c=xT(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Xl(r),i))}(t,e)}function nj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sA(t){return(e,n)=>{let r=!1;for(const i of Xl(t)){const s=rj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function rj(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?_a(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Qk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Ze(ee.comparator);function ni(){return ij}const oA=new Ze(ee.comparator);function Pl(...t){let e=oA;for(const n of t)e=e.insert(n.key,n);return e}function aA(t){let e=oA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rs(){return Jl()}function lA(){return Jl()}function Jl(){return new za(t=>t.toString(),(t,e)=>t.isEqual(e))}const sj=new Ze(ee.comparator),oj=new bt(ee.comparator);function Ee(...t){let e=oj;for(const n of t)e=e.add(n);return e}const aj=new bt(ke);function lj(){return aj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(e)?"-0":e}}function uA(t){return{integerValue:""+t}}function uj(t,e){return F3(e)?uA(e):n0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this._=void 0}}function cj(t,e,n){return t instanceof df?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yv(s)&&(s=Zv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Uu?hA(t,e):t instanceof $u?dA(t,e):function(i,s){const o=cA(i,s),a=PT(o)+PT(i.Pe);return S_(o)&&S_(i.Pe)?uA(a):n0(i.serializer,a)}(t,e)}function hj(t,e,n){return t instanceof Uu?hA(t,e):t instanceof $u?dA(t,e):n}function cA(t,e){return t instanceof ff?function(r){return S_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class df extends wp{}class Uu extends wp{constructor(e){super(),this.elements=e}}function hA(t,e){const n=fA(e);for(const r of t.elements)n.some(i=>Er(i,r))||n.push(r);return{arrayValue:{values:n}}}class $u extends wp{constructor(e){super(),this.elements=e}}function dA(t,e){let n=fA(e);for(const r of t.elements)n=n.filter(i=>!Er(i,r));return{arrayValue:{values:n}}}class ff extends wp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function PT(t){return nt(t.integerValue||t.doubleValue)}function fA(t){return Xv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Uu&&i instanceof Uu||r instanceof $u&&i instanceof $u?ga(r.elements,i.elements,Er):r instanceof ff&&i instanceof ff?Er(r.Pe,i.Pe):r instanceof df&&i instanceof df}(t.transform,e.transform)}class fj{constructor(e,n){this.version=e,this.transformResults=n}}class Hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function od(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ep{}function pA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gA(t.key,Hr.none()):new Nc(t.key,t.data,Hr.none());{const n=t.data,r=Nn.empty();let i=new bt(At.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ao(t.key,r,new Gn(i.toArray()),Hr.none())}}function pj(t,e,n){t instanceof Nc?function(i,s,o){const a=i.value.clone(),l=NT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ao?function(i,s,o){if(!od(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=NT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(mA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function eu(t,e,n,r){return t instanceof Nc?function(s,o,a,l){if(!od(s.precondition,o))return a;const c=s.value.clone(),h=OT(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ao?function(s,o,a,l){if(!od(s.precondition,o))return a;const c=OT(s.fieldTransforms,l,o),h=o.data;return h.setAll(mA(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return od(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=cA(r.transform,i||null);s!=null&&(n===null&&(n=Nn.empty()),n.set(r.field,s))}return n||null}function bT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ga(r,i,(s,o)=>dj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nc extends Ep{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ao extends Ep{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function mA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function NT(t,e,n){const r=new Map;Oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hj(o,a,n[i]))}return r}function OT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,cj(s,o,e))}return r}class gA extends Ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gj extends Ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&pj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=eu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=eu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=pA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(n,r)=>bT(n,r))&&ga(this.baseMutations,e.baseMutations,(n,r)=>bT(n,r))}}class r0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Oe(e.mutations.length===r.length);let i=function(){return sj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new r0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Te;function wj(t){switch(t){default:return ae();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function _A(t){if(t===void 0)return ti("GRPC error has no .code"),j.UNKNOWN;switch(t){case ot.OK:return j.OK;case ot.CANCELLED:return j.CANCELLED;case ot.UNKNOWN:return j.UNKNOWN;case ot.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ot.INTERNAL:return j.INTERNAL;case ot.UNAVAILABLE:return j.UNAVAILABLE;case ot.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ot.NOT_FOUND:return j.NOT_FOUND;case ot.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ot.ABORTED:return j.ABORTED;case ot.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ot.DATA_LOSS:return j.DATA_LOSS;default:return ae()}}(Te=ot||(ot={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new Ns([4294967295,4294967295],0);function DT(t){const e=Ej().encode(t),n=new Uk;return n.update(e),new Uint8Array(n.digest())}function MT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ns([n,r],0),new Ns([i,s],0)]}class i0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bl(`Invalid padding: ${n}`);if(r<0)throw new bl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ns.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ns.fromNumber(r)));return i.compare(Tj)===1&&(i=new Ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=DT(e),[r,i]=MT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new i0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=DT(e),[r,i]=MT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tp(le.min(),i,new Ze(ke),ni(),Ee())}}class Oc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oc(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class yA{constructor(e,n){this.targetId=e,this.me=n}}class vA{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class LT{constructor(){this.fe=0,this.ge=FT(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Oc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=FT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ij{constructor(e){this.Le=e,this.Be=new Map,this.ke=ni(),this.qe=VT(),this.Qe=new Ze(ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(x_(s))if(r===0){const o=new ee(s.path);this.Ue(n,o,Wt.newNoDocument(o,le.min()))}else Oe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Zs(r).toUint8Array()}catch(l){if(l instanceof Yk)return ma("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new i0(o,i,s)}catch(l){return ma(l instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&x_(a.target)){const l=new ee(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Wt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ee();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Tp(e,n,this.Qe,this.ke,r);return this.ke=ni(),this.qe=VT(),this.Qe=new Ze(ke),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new LT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new bt(ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new LT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function VT(){return new Ze(ee.comparator)}function FT(){return new Ze(ee.comparator)}const Sj={asc:"ASCENDING",desc:"DESCENDING"},Cj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xj={and:"AND",or:"OR"};class Rj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function k_(t,e){return t.useProto3Json||gp(e)?e:{value:e}}function pf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kj(t,e){return pf(t,e.toTimestamp())}function yr(t){return Oe(!!t),le.fromTimestamp(function(n){const r=es(n);return new gt(r.seconds,r.nanos)}(t))}function s0(t,e){return A_(t,e).canonicalString()}function A_(t,e){const n=function(i){return new et(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EA(t){const e=et.fromString(t);return Oe(xA(e)),e}function P_(t,e){return s0(t.databaseId,e.path)}function Gm(t,e){const n=EA(e);if(n.get(1)!==t.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(IA(n))}function TA(t,e){return s0(t.databaseId,e)}function Aj(t){const e=EA(t);return e.length===4?et.emptyPath():IA(e)}function b_(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IA(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jT(t,e,n){return{name:P_(t,e),fields:n.value.mapValue.fields}}function Pj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Oe(h===void 0||typeof h=="string"),Ot.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:_A(c.code);return new J(h,c.message||"")}(o);n=new vA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gm(t,r.document.name),s=yr(r.document.updateTime),o=r.document.createTime?yr(r.document.createTime):le.min(),a=new Nn({mapValue:{fields:r.document.fields}}),l=Wt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new ad(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Gm(t,r.document),s=r.readTime?yr(r.readTime):le.min(),o=Wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ad([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Gm(t,r.document),s=r.removedTargetIds||[];n=new ad([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new vj(i,s),a=r.targetId;n=new yA(a,o)}}return n}function bj(t,e){let n;if(e instanceof Nc)n={update:jT(t,e.key,e.value)};else if(e instanceof gA)n={delete:P_(t,e.key)};else if(e instanceof ao)n={update:jT(t,e.key,e.data),updateMask:Uj(e.fieldMask)};else{if(!(e instanceof gj))return ae();n={verify:P_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof df)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $u)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ff)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:kj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function Nj(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yr(i.updateTime):yr(s);return o.isEqual(le.min())&&(o=yr(s)),new fj(o,i.transformResults||[])}(n,e))):[]}function Oj(t,e){return{documents:[TA(t,e.path)]}}function Dj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TA(t,i);const s=function(c){if(c.length!==0)return CA(Tr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:To(p.field),direction:Vj(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=k_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Mj(t){let e=Aj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Oe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=SA(d);return p instanceof Tr&&eA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new hf(Io(y.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,gp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new cf(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new cf(g,p)}(n.endAt)),J3(e,i,o,s,a,"F",l,c)}function Lj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Io(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Io(n.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Io(n.unaryFilter.field);return pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Io(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return pt.create(Io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tr.create(n.compositeFilter.filters.map(r=>SA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function Vj(t){return Sj[t]}function Fj(t){return Cj[t]}function jj(t){return xj[t]}function To(t){return{fieldPath:t.canonicalString()}}function Io(t){return At.fromServerFormat(t.fieldPath)}function CA(t){return t instanceof pt?function(n){if(n.op==="=="){if(CT(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NAN"}};if(ST(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CT(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NAN"}};if(ST(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(n.field),op:Fj(n.op),value:n.value}}}(t):t instanceof Tr?function(n){const r=n.getFilters().map(i=>CA(i));return r.length===1?r[0]:{compositeFilter:{op:jj(n.op),filters:r}}}(t):ae()}function Uj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n,r,i,s=le.min(),o=le.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.ct=e}}function Bj(t){const e=Mj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?R_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.un=new Wj}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ji.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Wj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new bt(et.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new va(0)}static kn(){return new va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.changes=new za(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&eu(r.mutation,i,Gn.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=Rs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Pl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ni();const o=Jl(),a=function(){return Jl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ao)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),eu(h.mutation,c,h.mutation.getFieldMask(),gt.now())):o.set(c.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new qj(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Jl();let i=new Ze((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Gn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Ee()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=lA();h.forEach(p=>{if(!s.has(p)){const g=pA(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ej(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Rs());let a=-1,l=s;return o.next(c=>F.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ee())).next(h=>({batchId:a,changes:aA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=Pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Pl();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(d,p){return new _p(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Wt.newInvalidDocument(h)))});let a=Pl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&eu(h.mutation,c,Gn.empty(),gt.now()),vp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yr(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Bj(i.bundledQuery),readTime:yr(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.overlays=new Ze(ee.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rs();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Rs(),s=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ze((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Rs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Rs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yj(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ee(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.Tr=new bt(yt.Er),this.dr=new bt(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new et([])),r=new yt(n,e),i=new yt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new et([])),r=new yt(n,e),i=new yt(n,e+1);let s=Ee();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||ke(e.wr,n.wr)}static Ar(e,n){return ke(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new bt(yt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _j(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),i=new yt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new bt(ke);return n.forEach(i=>{const s=new yt(i,0),o=new yt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new yt(new ee(s),0);let a=new bt(ke);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new yt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.Mr=e,this.docs=function(){return new Ze(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=ni();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ni();const o=n.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||D3(O3(h),r)<=0||(i.has(h.key)||vp(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Jj(this)}getSize(e){return F.resolve(this.size)}}class Jj extends Hj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.persistence=e,this.Nr=new za(n=>Jv(n),e0),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new o0,this.targetCount=0,this.kr=va.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new va(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qv(0),this.Kr=!1,this.Kr=!0,this.$r=new Yj,this.referenceDelegate=e(this),this.Ur=new e6(this),this.indexManager=new zj,this.remoteDocumentCache=function(i){return new Xj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $j(n),this.Gr=new Gj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Zj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new n6(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class n6 extends L3{constructor(e){super(),this.currentSequenceNumber=e}}class a0{constructor(e){this.persistence=e,this.Jr=new o0,this.Yr=null}static Zr(e){return new a0(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new l0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return M2()?8:V3(qt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new r6;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(El()<=ve.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(El()<=ve.DEBUG&&Q("QueryEngine","Query:",Eo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(El()<=ve.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):F.resolve())}Yi(e,n){if(AT(n))return F.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=R_(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ee(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,R_(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return AT(n)||i.isEqual(le.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(El()<=ve.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eo(n)),this.rs(e,o,n,N3(i,-1)).next(a=>a))})}ts(e,n){let r=new bt(sA(e));return n.forEach((i,s)=>{vp(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return El()<=ve.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Eo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ji.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ze(ke),this._s=new za(s=>Jv(s),e0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function o6(t,e,n,r){return new s6(t,e,n,r)}async function RA(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ee();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function a6(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=F.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(S=>{const R=c.docVersions.get(y);Oe(R!==null),S.version.compareTo(R)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kA(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function l6(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Ot.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(S,R,v){return S.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=ni(),c=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(u6(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(le.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function u6(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ni();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function c6(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function h6(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Pi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function N_(t,e,n){const r=ue(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!bc(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function UT(t,e,n){const r=ue(t);let i=le.min(),s=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ue(l),p=d._s.get(h);return p!==void 0?F.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,_r(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:Ee())).next(a=>(d6(r,nj(e),a),{documents:a,Ts:s})))}function d6(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class $T{constructor(){this.activeTargetIds=lj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f6{constructor(){this.so=new $T,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $T,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph=null;function Qm(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class _6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Qm(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ma("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$a}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=m6[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Qm();return new Promise((o,a)=>{const l=new $k;l.setWithCredentials(!0),l.listenOnce(zk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case id.NO_ERROR:const h=l.getResponseJson();Q(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case id.TIMEOUT:Q(jt,`RPC '${e}' ${s} timed out`),a(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case id.HTTP_ERROR:const d=l.getStatus();if(Q(jt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(R){const v=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(g.status);a(new J(y,g.message))}else a(new J(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(j.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{Q(jt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Q(jt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Qm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qk(),a=Hk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new Bk({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Q(jt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new g6({Io:R=>{g?Q(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(Q(jt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),Q(jt,`RPC '${e}' stream ${i} sending:`,R),d.send(R))},To:()=>d.close()}),S=(R,v,w)=>{R.listen(v,E=>{try{w(E)}catch(P){setTimeout(()=>{throw P},0)}})};return S(d,Al.EventType.OPEN,()=>{g||(Q(jt,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),S(d,Al.EventType.CLOSE,()=>{g||(g=!0,Q(jt,`RPC '${e}' stream ${i} transport closed`),y.So())}),S(d,Al.EventType.ERROR,R=>{g||(g=!0,ma(jt,`RPC '${e}' stream ${i} transport errored:`,R),y.So(new J(j.UNAVAILABLE,"The operation could not be completed")))}),S(d,Al.EventType.MESSAGE,R=>{var v;if(!g){const w=R.data[0];Oe(!!w);const E=w,P=E.error||((v=E[0])===null||v===void 0?void 0:v.error);if(P){Q(jt,`RPC '${e}' stream ${i} received error:`,P);const O=P.status;let M=function(C){const k=ot[C];if(k!==void 0)return _A(k)}(O),T=P.message;M===void 0&&(M=j.INTERNAL,T="Unknown error status: "+O+" with message "+P.message),g=!0,y.So(new J(M,T)),d.close()}else Q(jt,`RPC '${e}' stream ${i} received:`,w),y.bo(w)}}),S(a,Wk.STAT_EVENT,R=>{R.stat===T_.PROXY?Q(jt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===T_.NOPROXY&&Q(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){return new Rj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new AA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y6 extends PA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Pj(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?yr(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=b_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=x_(l)?{documents:Oj(s,l)}:{query:Dj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wA(s,o.resumeToken);const c=k_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=pf(s,o.snapshotVersion.toTimestamp());const c=k_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Lj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=b_(this.serializer),n.removeTarget=e,this.a_(n)}}class v6 extends PA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Nj(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=b_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,A_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,A_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class E6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ti(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{lo(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await Dc(c),c.q_.set("Unknown"),c.L_.delete(4),await Sp(c)}(this))})}),this.q_=new E6(r,i)}}async function Sp(t){if(lo(t))for(const e of t.B_)await e(!0)}async function Dc(t){for(const e of t.B_)await e(!1)}function bA(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),d0(n)?h0(n):Wa(n).r_()&&c0(n,e))}function u0(t,e){const n=ue(t),r=Wa(n);n.N_.delete(e),r.r_()&&NA(n,e),n.N_.size===0&&(r.r_()?r.o_():lo(n)&&n.q_.set("Unknown"))}function c0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wa(t).A_(e)}function NA(t,e){t.Q_.xe(e),Wa(t).R_(e)}function h0(t){t.Q_=new Ij({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wa(t).start(),t.q_.v_()}function d0(t){return lo(t)&&!Wa(t).n_()&&t.N_.size>0}function lo(t){return ue(t).L_.size===0}function OA(t){t.Q_=void 0}async function I6(t){t.q_.set("Online")}async function S6(t){t.N_.forEach((e,n)=>{c0(t,e)})}async function C6(t,e){OA(t),d0(t)?(t.q_.M_(e),h0(t)):t.q_.set("Unknown")}async function x6(t,e,n){if(t.q_.set("Online"),e instanceof vA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mf(t,r)}else if(e instanceof ad?t.Q_.Ke(e):e instanceof yA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await kA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),NA(s,l);const d=new Pi(h.target,l,c,h.sequenceNumber);c0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await mf(t,r)}}async function mf(t,e,n){if(!bc(e))throw e;t.L_.add(1),await Dc(t),t.q_.set("Offline"),n||(n=()=>kA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Sp(t)})}function DA(t,e){return e().catch(n=>mf(t,n,e))}async function Cp(t){const e=ue(t),n=ts(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;R6(e);)try{const i=await c6(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,k6(e,i)}catch(i){await mf(e,i)}MA(e)&&LA(e)}function R6(t){return lo(t)&&t.O_.length<10}function k6(t,e){t.O_.push(e);const n=ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function MA(t){return lo(t)&&!ts(t).n_()&&t.O_.length>0}function LA(t){ts(t).start()}async function A6(t){ts(t).p_()}async function P6(t){const e=ts(t);for(const n of t.O_)e.m_(n.mutations)}async function b6(t,e,n){const r=t.O_.shift(),i=r0.from(r,e,n);await DA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cp(t)}async function N6(t,e){e&&ts(t).V_&&await async function(r,i){if(function(o){return wj(o)&&o!==j.ABORTED}(i.code)){const s=r.O_.shift();ts(r).s_(),await DA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Cp(r)}}(t,e),MA(t)&&LA(t)}async function zT(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=lo(n);n.L_.add(3),await Dc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Sp(n)}async function O6(t,e){const n=ue(t);e?(n.L_.delete(2),await Sp(n)):e||(n.L_.add(2),await Dc(n),n.q_.set("Unknown"))}function Wa(t){return t.K_||(t.K_=function(n,r,i){const s=ue(n);return s.w_(),new y6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:I6.bind(null,t),Ro:S6.bind(null,t),mo:C6.bind(null,t),d_:x6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),d0(t)?h0(t):t.q_.set("Unknown")):(await t.K_.stop(),OA(t))})),t.K_}function ts(t){return t.U_||(t.U_=function(n,r,i){const s=ue(n);return s.w_(),new v6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:A6.bind(null,t),mo:N6.bind(null,t),f_:P6.bind(null,t),g_:b6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cp(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new f0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function p0(t,e){if(ti("AsyncQueue",`${e}: ${t}`),bc(t))return new J(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Pl(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new ta(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.W_=new Ze(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wa(e,n,ta.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class M6{constructor(){this.queries=HT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),s=i.queries;i.queries=HT(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new J(j.ABORTED,"Firestore shutting down"))}}function HT(){return new za(t=>iA(t),yp)}async function L6(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new D6,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=p0(o,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&m0(n)}async function V6(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F6(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&m0(n)}function j6(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function m0(t){t.Y_.forEach(e=>{e.next()})}var O_,qT;(qT=O_||(O_={})).ea="default",qT.Cache="cache";class U6{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==O_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.key=e}}class FA{constructor(e){this.key=e}}class $6{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=sA(e),this.Ra=new ta(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new WT,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=vp(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let R=!1;p&&g?p.data.isEqual(g.data)?y!==S&&(r.track({type:3,doc:g}),R=!0):this.ga(p,g)||(r.track({type:2,doc:g}),R=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),R=!0):p&&!g&&(r.track({type:1,doc:p}),R=!0,(l||c)&&(a=!0)),R&&(g?(o=o.add(g),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,y){const S=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return S(g)-S(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new wa(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new WT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new FA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new VA(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class B6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class z6{constructor(e){this.key=e,this.va=!1}}class W6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new za(a=>iA(a),yp),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(ee.comparator),this.Na=new Map,this.La=new o0,this.Ba={},this.ka=new Map,this.qa=va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function H6(t,e,n=!0){const r=WA(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await jA(r,e,n,!0),i}async function q6(t,e){const n=WA(t);await jA(n,e,!0,!1)}async function jA(t,e,n,r){const i=await h6(t.localStore,_r(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await K6(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&bA(t.remoteStore,i),a}async function K6(t,e,n,r,i){t.Ka=(d,p,g)=>async function(S,R,v,w){let E=R.view.ma(v);E.ns&&(E=await UT(S.localStore,R.query,!1).then(({documents:T})=>R.view.ma(T,E)));const P=w&&w.targetChanges.get(R.targetId),O=w&&w.targetMismatches.get(R.targetId)!=null,M=R.view.applyChanges(E,S.isPrimaryClient,P,O);return GT(S,R.targetId,M.wa),M.snapshot}(t,d,p,g);const s=await UT(t.localStore,e,!0),o=new $6(e,s.Ts),a=o.ma(s.documents),l=Oc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);GT(t,n,c.wa);const h=new B6(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function G6(t,e,n){const r=ue(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!yp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await N_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&u0(r.remoteStore,i.targetId),D_(r,i.targetId)}).catch(Pc)):(D_(r,i.targetId),await N_(r.localStore,i.targetId,!0))}async function Q6(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),u0(n.remoteStore,r.targetId))}async function Y6(t,e,n){const r=rU(t);try{const i=await function(o,a){const l=ue(o),c=gt.now(),h=a.reduce((g,y)=>g.add(y.key),Ee());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=ni(),S=Ee();return l.cs.getEntries(g,h).next(R=>{y=R,y.forEach((v,w)=>{w.isValidDocument()||(S=S.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(R=>{d=R;const v=[];for(const w of a){const E=mj(w,d.get(w.key).overlayedDocument);E!=null&&v.push(new ao(w.key,E,Zk(E.value.mapValue),Hr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(R=>{p=R;const v=R.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(g,R.batchId,v)})}).then(()=>({batchId:p.batchId,changes:aA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ze(ke)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Mc(r,i.changes),await Cp(r.remoteStore)}catch(i){const s=p0(i,"Failed to persist write");n.reject(s)}}async function UA(t,e){const n=ue(t);try{const r=await l6(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Oe(o.va):i.removedDocuments.size>0&&(Oe(o.va),o.va=!1))}),await Mc(n,r,e)}catch(r){await Pc(r)}}function KT(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&m0(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Z6(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ze(ee.comparator);o=o.insert(s,Wt.newNoDocument(s,le.min()));const a=Ee().add(s),l=new Tp(le.min(),new Map,new Ze(ke),o,a);await UA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),g0(r)}else await N_(r.localStore,e,!1).then(()=>D_(r,e,n)).catch(Pc)}async function X6(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await a6(n.localStore,e);BA(n,r,null),$A(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mc(n,i)}catch(i){await Pc(i)}}async function J6(t,e,n){const r=ue(t);try{const i=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Oe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);BA(r,e,n),$A(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mc(r,i)}catch(i){await Pc(i)}}function $A(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function BA(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function D_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zA(t,r)})}function zA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(u0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),g0(t))}function GT(t,e,n){for(const r of n)r instanceof VA?(t.La.addReference(r.key,e),eU(t,r)):r instanceof FA?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zA(t,r.key)):ae()}function eU(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),g0(t))}function g0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(et.fromString(e)),r=t.qa.next();t.Na.set(r,new z6(n)),t.Oa=t.Oa.insert(n,r),bA(t.remoteStore,new Pi(_r(t0(n.path)),r,"TargetPurposeLimboResolution",Qv.oe))}}async function Mc(t,e,n){const r=ue(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=l0.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ue(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,p=>F.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>F.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!bc(d))throw d;Q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),y=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,S)}}}(r.localStore,s))}async function tU(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await RA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new J(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mc(n,r.hs)}}function nU(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return Ee().add(r.key);{let i=Ee();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function WA(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z6.bind(null,e),e.Ca.d_=F6.bind(null,e.eventManager),e.Ca.$a=j6.bind(null,e.eventManager),e}function rU(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J6.bind(null,e),e}class QT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ip(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return o6(this.persistence,new i6,e.initialUser,this.serializer)}createPersistence(e){return new t6(a0.Zr,this.serializer)}createSharedClientState(e){return new f6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class iU{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tU.bind(null,this.syncEngine),await O6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M6}()}createDatastore(e){const n=Ip(e.databaseInfo.databaseId),r=function(s){return new _6(s)}(e.databaseInfo);return function(s,o,a,l){return new w6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new T6(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>KT(this.syncEngine,n,0),function(){return BT.D()?new BT:new p6}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new W6(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ue(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Dc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$t.UNAUTHENTICATED,this.clientId=Gk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=p0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zm(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await RA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function YT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lU(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zT(e.remoteStore,i)),t._onlineComponents=e}function aU(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function lU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!aU(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await Zm(t,new QT)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Zm(t,new QT);return t._offlineComponents}async function HA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await YT(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await YT(t,new iU))),t._onlineComponents}function uU(t){return HA(t).then(e=>e.syncEngine)}async function cU(t){const e=await HA(t),n=e.eventManager;return n.onListen=H6.bind(null,e.syncEngine),n.onUnlisten=G6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=q6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q6.bind(null,e.syncEngine),n}function hU(t,e,n={}){const r=new Hi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new sU({next:p=>{o.enqueueAndForget(()=>V6(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new U6(t0(a.path),h,{includeMetadataChanges:!0,_a:!0});return L6(s,d)}(await cU(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t,e,n){if(!n)throw new J(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fU(t,e,n,r){if(e===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XT(t){if(!ee.isDocumentKey(t))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Bu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_0(t);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class y0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new I3;switch(r.type){case"firstParty":return new R3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ZT.get(n);r&&(Q("ComponentProvider","Removing Datastore"),ZT.delete(n),r.terminate())}(this),Promise.resolve()}}function pU(t,e,n,r={}){var i;const s=(t=Bu(t,y0))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=$t.MOCK_USER;else{a=Px(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $t(c)}t._authCredentials=new S3(new Kk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new v0(this.firestore,e,this._query)}}class Mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class zu extends v0{constructor(e,n,r){super(e,n,t0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new ee(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function eI(t,e,...n){if(t=it(t),arguments.length===1&&(e=Gk.newId()),dU("doc","path",e),t instanceof y0){const r=et.fromString(e,...n);return XT(r),new Mn(t,null,new ee(r))}{if(!(t instanceof Mn||t instanceof zu))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(et.fromString(e,...n));return XT(r),new Mn(t.firestore,t instanceof zu?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new AA(this,"async_queue_retry"),this.Eu=()=>{const n=Ym();n&&Q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Ym();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Hi;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!bc(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ti("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=f0.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&ae()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class w0 extends y0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new mU}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||GA(this),this._firestoreClient.terminate()}}function gU(t,e){const n=typeof t=="object"?t:av(),r=typeof t=="string"?t:"(default)",i=rp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Rx("firestore");s&&pU(i,...s)}return i}function KA(t){return t._firestoreClient||GA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function GA(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new U3(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new oU(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ea(Ot.fromBase64String(e))}catch(n){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ea(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=/^__.*__$/;class yU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}function YA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class S0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new S0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return gf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(YA(this.wu)&&_U.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class vU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ip(e)}Nu(e,n,r,i=!1){return new S0({wu:e,methodName:n,Ou:r,path:At.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wU(t){const e=t._freezeSettings(),n=Ip(t._databaseId);return new vU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EU(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);eP("Data must be an object, but it was:",o,r);const a=XA(r,o);let l,c;if(s.merge)l=new Gn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=TU(e,d,n);if(!o.contains(p))throw new J(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);SU(h,p)||h.push(p)}l=new Gn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new yU(new Nn(a),l,c)}function ZA(t,e){if(JA(t=it(t)))return eP("Unsupported field value:",e,t),XA(t,e);if(t instanceof QA)return function(r,i){if(!YA(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ZA(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=gt.fromDate(r);return{timestampValue:pf(i.serializer,s)}}if(r instanceof gt){const s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pf(i.serializer,s)}}if(r instanceof T0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ea)return{bytesValue:wA(i.serializer,r._byteString)};if(r instanceof Mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:s0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof I0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return n0(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${_0(r)}`)}(t,e)}function XA(t,e){const n={};return Qk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(t,(r,i)=>{const s=ZA(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function JA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof T0||t instanceof Ea||t instanceof Mn||t instanceof QA||t instanceof I0)}function eP(t,e,n){if(!JA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=_0(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function TU(t,e,n){if((e=it(e))instanceof E0)return e._internalPath;if(typeof e=="string")return tP(t,e);throw gf("Field path arguments must be of type string or ",t,!1,void 0,n)}const IU=new RegExp("[~\\*/\\[\\]]");function tP(t,e,n){if(e.search(IU)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new E0(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new J(j.INVALID_ARGUMENT,a+t+l)}function SU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CU extends nP{data(){return super.data()}}function rP(t,e){return typeof e=="string"?tP(t,e):e instanceof E0?e._internalPath:e._delegate._internalPath}class xU{convertValue(e,n="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ba(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new I0(s)}convertGeoPoint(e){return new T0(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const n=es(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);Oe(xA(r));const i=new Fu(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iP extends nP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new AU(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class AU extends iP{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t){t=Bu(t,Mn);const e=Bu(t.firestore,w0);return hU(KA(e),t._key).then(n=>DU(e,t,n))}class bU extends xU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function NU(t,e,n){t=Bu(t,Mn);const r=Bu(t.firestore,w0),i=RU(t.converter,e);return OU(r,[EU(wU(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Hr.none())])}function OU(t,e){return function(r,i){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>Y6(await uU(r),i,s)),s.promise}(KA(t),e)}function DU(t,e,n){const r=n.docs.get(e._key),i=new bU(t);return new iP(t,i,e._key,r,new kU(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){$a=i})(io),Ws(new Qi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new w0(new C3(r.getProvider("auth-internal")),new A3(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),pr(vT,"4.7.0",e),pr(vT,"4.7.0","esm2017")})();const MU={apiKey:"AIzaSyAwP_KvNqzlcwWKvzFQew79jGEJouIYp98",authDomain:"coco-df960.firebaseapp.com",projectId:"coco-df960",storageBucket:"coco-df960.appspot.com",messagingSenderId:"760786876135",appId:"1:760786876135:web:79a14ad5e60e05c1de9442",databaseURL:"https://coco-df960-default-rtdb.europe-west1.firebasedatabase.app"},C0=Lx(MU),So=fV(C0),Wu=w3(C0),tI=gU(C0);async function LU(t){return jk(Du(Wu,t)).then(e=>e.val())}async function VU(){return LU("items_coco_car").then(t=>Object.entries(t).map(([e,n])=>({type:e,items:n.map(r=>(r.category=e,r))})))}function FU(t){switch(t){case"coffee":return"";case"special drinks":return" ";case"cold drinks":return" ";case"iced coffees":return" ";case"cold brew":return" "}return t}const sP=V.createContext(null);function jU(t){const[e,n]=X.useState([]),[r,i]=V.useState(""),s=()=>{n([]),c([])},[o,a]=X.useState(!1),[l,c]=V.useState([]),[h,d]=X.useState([]),p=O=>{if(O.quantity===0){const T=l.filter(_=>_.id!==O.id);c(T);return}const M=l.map(T=>T.id===O.id?{...O}:T);c(M)},g=V.useMemo(()=>l.reduce((O,M)=>O+parseFloat(M.item.price)*M.quantity,0),[l]),y=V.useMemo(()=>l.reduce((O,M)=>O+M.quantity,0),[l]),S=O=>{c([...l,O])};async function R(){let O;try{let M="items_coco_car_1";const T=localStorage.getItem(M);T?O=JSON.parse(T):(O=await VU(),localStorage.setItem(M,JSON.stringify(O))),O=O.map(_=>(_.items=_.items.map(C=>({...C,category:_.type})),_.type=FU(_.type),_))}catch(M){console.log(M),O=[]}d(O.sort((M,T)=>M.type.localeCompare(T.type)))}V.useEffect(()=>{R()},[]),V.useEffect(()=>{if(r){const T={type:"search",items:h.flatMap(_=>_.items).filter(_=>_.name.includes(r))};w(T)}else h.length>0&&w(h[0])},[r,h]);const[v,w]=X.useState(null),E=(O,M,T)=>{const _=[...e],C=_.find(k=>k.item.name===O.name);C?C.quantity+=M:_.push({item:O,quantity:M,options:T}),n(_)},P=O=>{const M=e.filter(T=>T.item.name!==O.name);n(M)};return x.jsx(sP.Provider,{value:{chosenItems:e,orderItems:l,setCategories:d,addItem:E,updateOrderItem:p,addOrderItem:S,removeItem:P,selectedCategory:v,setSelectedCategory:w,categories:h,totalItems:y,clearOrder:s,totalPriceToPay:g,orderSummary:o,setOrderSummary:a,search:i},children:t.children})}function li(){const t=X.useContext(sP);if(!t)throw new Error("useOrderContext must be used within a OrderContextProvider");return t}const oP=X.createContext(null),UU=({children:t})=>{const[e,n]=V.useState(),[r,i]=V.useState(!0),s=async({email:c,password:h})=>{i(!0);const d=await JL(So,mv).then(()=>XL(So,c,h));return i(!1),await a(d.user.uid)},o=async c=>{i(!0);const h=await ZL(So,c.email,c.password);delete c.password;const d={...c,uid:h.user.uid,image:h.user.photoURL,phone:h.user.phoneNumber,isAdmin:!1};return await NU(eI(tI,`users/${h.user.uid}`),d),n(d),i(!1),d},a=async c=>{try{const d=(await PU(eI(tI,`users/${c}`))).data();return n(d),d}catch{}},l=async()=>{await uR(So),n(void 0)};return V.useEffect(()=>{const c=n4(So,async h=>{if(h){const d=await a(h.uid);d&&n(d),i(!1)}else n(void 0),i(!1)});return()=>{c()}},[]),x.jsx(oP.Provider,{value:{user:e,loadingUser:r,login:s,register:o,logout:l},children:t})},uo=()=>{const t=V.useContext(oP);if(!t)throw new Error("Auth context not provided");return t};/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hu.apply(this,arguments)}var bi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bi||(bi={}));const nI="popstate";function $U(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=co(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),M_("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:_f(s))}function r(i,s){x0(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return zU(e,n,r,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BU(){return Math.random().toString(36).substr(2,8)}function rI(t,e){return{usr:t.state,key:t.key,idx:e}}function M_(t,e,n,r){return n===void 0&&(n=null),Hu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:n,key:e&&e.key||r||BU()})}function _f(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zU(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=bi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Hu({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=bi.Pop;let R=h(),v=R==null?null:R-c;c=R,l&&l({action:a,location:S.location,delta:v})}function p(R,v){a=bi.Push;let w=M_(S.location,R,v);n&&n(w,R),c=h()+1;let E=rI(w,c),P=S.createHref(w);try{o.pushState(E,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(P)}s&&l&&l({action:a,location:S.location,delta:1})}function g(R,v){a=bi.Replace;let w=M_(S.location,R,v);n&&n(w,R),c=h();let E=rI(w,c),P=S.createHref(w);o.replaceState(E,"",P),s&&l&&l({action:a,location:S.location,delta:0})}function y(R){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof R=="string"?R:_f(R);return w=w.replace(/ $/,"%20"),ut(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let S={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(nI,d),l=R,()=>{i.removeEventListener(nI,d),l=null}},createHref(R){return e(i,R)},createURL:y,encodeLocation(R){let v=y(R);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:g,go(R){return o.go(R)}};return S}var iI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(iI||(iI={}));function WU(t,e,n){return n===void 0&&(n="/"),HU(t,e,n,!1)}function HU(t,e,n,r){let i=typeof e=="string"?co(e):e,s=R0(i.pathname||"/",n);if(s==null)return null;let o=aP(t);qU(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=r9(s);a=t9(o[l],c,r)}return a}function aP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ut(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=qi([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(ut(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),aP(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:JU(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of lP(s.path))i(s,o,l)}),e}function lP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=lP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function qU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:e9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KU=/^:[\w-]+$/,GU=3,QU=2,YU=1,ZU=10,XU=-2,sI=t=>t==="*";function JU(t,e){let n=t.split("/"),r=n.length;return n.some(sI)&&(r+=XU),e&&(r+=QU),n.filter(i=>!sI(i)).reduce((i,s)=>i+(KU.test(s)?GU:s===""?YU:ZU),r)}function e9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function t9(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=oI({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=oI({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:qi([s,d.pathname]),pathnameBase:a9(qi([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=qi([s,d.pathnameBase]))}return o}function oI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=n9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let S=a[d]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function n9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),x0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function r9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function R0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function i9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?co(t):t;return{pathname:n?n.startsWith("/")?n:s9(n,e):e,search:l9(r),hash:u9(i)}}function s9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Xm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function uP(t,e){let n=o9(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=co(t):(i=Hu({},t),ut(!i.pathname||!i.pathname.includes("?"),Xm("?","pathname","search",i)),ut(!i.pathname||!i.pathname.includes("#"),Xm("#","pathname","hash",i)),ut(!i.search||!i.search.includes("#"),Xm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=i9(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const qi=t=>t.join("/").replace(/\/\/+/g,"/"),a9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),l9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,u9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function c9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hP=["post","put","patch","delete"];new Set(hP);const h9=["get",...hP];new Set(h9);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(this,arguments)}const k0=V.createContext(null),d9=V.createContext(null),ho=V.createContext(null),xp=V.createContext(null),fo=V.createContext({outlet:null,matches:[],isDataRoute:!1}),dP=V.createContext(null);function f9(t,e){let{relative:n}=e===void 0?{}:e;Lc()||ut(!1);let{basename:r,navigator:i}=V.useContext(ho),{hash:s,pathname:o,search:a}=pP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:qi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Lc(){return V.useContext(xp)!=null}function Vc(){return Lc()||ut(!1),V.useContext(xp).location}function fP(t){V.useContext(ho).static||V.useLayoutEffect(t)}function Ha(){let{isDataRoute:t}=V.useContext(fo);return t?x9():p9()}function p9(){Lc()||ut(!1);let t=V.useContext(k0),{basename:e,future:n,navigator:r}=V.useContext(ho),{matches:i}=V.useContext(fo),{pathname:s}=Vc(),o=JSON.stringify(uP(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return fP(()=>{a.current=!0}),V.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=cP(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qi([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function pP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(ho),{matches:i}=V.useContext(fo),{pathname:s}=Vc(),o=JSON.stringify(uP(i,r.v7_relativeSplatPath));return V.useMemo(()=>cP(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function m9(t,e){return g9(t,e)}function g9(t,e,n,r){Lc()||ut(!1);let{navigator:i}=V.useContext(ho),{matches:s}=V.useContext(fo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Vc(),h;if(e){var d;let R=typeof e=="string"?co(e):e;l==="/"||(d=R.pathname)!=null&&d.startsWith(l)||ut(!1),h=R}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let R=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let y=WU(t,{pathname:g}),S=E9(y&&y.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:qi([l,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:qi([l,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&S?V.createElement(xp.Provider,{value:{location:qu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:bi.Pop}},S):S}function _9(){let t=C9(),e=c9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const y9=V.createElement(_9,null);class v9 extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(fo.Provider,{value:this.props.routeContext},V.createElement(dP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w9(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(k0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(fo.Provider,{value:e},r)}function E9(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||ut(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,S=null,R=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||y9,l&&(c<0&&p===0?(y=!0,R=null):c===p&&(y=!0,R=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let E;return g?E=S:y?E=R:d.route.Component?E=V.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,V.createElement(w9,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?V.createElement(v9,{location:n.location,revalidation:n.revalidation,component:S,error:g,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var mP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mP||{}),yf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yf||{});function T9(t){let e=V.useContext(k0);return e||ut(!1),e}function I9(t){let e=V.useContext(d9);return e||ut(!1),e}function S9(t){let e=V.useContext(fo);return e||ut(!1),e}function gP(t){let e=S9(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function C9(){var t;let e=V.useContext(dP),n=I9(yf.UseRouteError),r=gP(yf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function x9(){let{router:t}=T9(mP.UseNavigateStable),e=gP(yf.UseNavigateStable),n=V.useRef(!1);return fP(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,qu({fromRouteId:e},s)))},[t,e])}function Co(t){ut(!1)}function R9(t){let{basename:e="/",children:n=null,location:r,navigationType:i=bi.Pop,navigator:s,static:o=!1,future:a}=t;Lc()&&ut(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:s,static:o,future:qu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=co(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=r,S=V.useMemo(()=>{let R=R0(h,l);return R==null?null:{location:{pathname:R,search:d,hash:p,state:g,key:y},navigationType:i}},[l,h,d,p,g,y,i]);return S==null?null:V.createElement(ho.Provider,{value:c},V.createElement(xp.Provider,{children:n,value:S}))}function k9(t){let{children:e,location:n}=t;return m9(L_(e),n)}new Promise(()=>{});function L_(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,L_(r.props.children,s));return}r.type!==Co&&ut(!1),!r.props.index||!r.props.children||ut(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=L_(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V_.apply(this,arguments)}function A9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function P9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function b9(t,e){return t.button===0&&(!e||e==="_self")&&!P9(t)}const N9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],O9="6";try{window.__reactRouterVersion=O9}catch{}const D9="startTransition",aI=cO[D9];function M9(t){let{basename:e,children:n,future:r,window:i}=t,s=V.useRef();s.current==null&&(s.current=$U({window:i,v5Compat:!0}));let o=s.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=V.useCallback(d=>{c&&aI?aI(()=>l(d)):l(d)},[l,c]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.createElement(R9,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const L9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_P=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=A9(e,N9),{basename:g}=V.useContext(ho),y,S=!1;if(typeof c=="string"&&V9.test(c)&&(y=c,L9))try{let E=new URL(window.location.href),P=c.startsWith("//")?new URL(E.protocol+c):new URL(c),O=R0(P.pathname,g);P.origin===E.origin&&O!=null?c=O+P.search+P.hash:S=!0}catch{}let R=f9(c,{relative:i}),v=F9(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function w(E){r&&r(E),E.defaultPrevented||v(E)}return V.createElement("a",V_({},p,{href:y||R,onClick:S||s?r:w,ref:n,target:l}))});var lI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lI||(lI={}));var uI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uI||(uI={}));function F9(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Ha(),c=Vc(),h=pP(t,{relative:o});return V.useCallback(d=>{if(b9(d,n)){d.preventDefault();let p=r!==void 0?r:_f(c)===_f(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}const ce={main:"#EBBBAC",second:"#E4B6A7",light:"#FBECE8",dark:"#221E21"};var un=function(){return un=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},un.apply(this,arguments)};function vf(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Be="-ms-",tu="-moz-",Pe="-webkit-",yP="comm",Rp="rule",A0="decl",j9="@import",vP="@keyframes",U9="@layer",wP=Math.abs,P0=String.fromCharCode,F_=Object.assign;function $9(t,e){return wt(t,0)^45?(((e<<2^wt(t,0))<<2^wt(t,1))<<2^wt(t,2))<<2^wt(t,3):0}function EP(t){return t.trim()}function Dr(t,e){return(t=e.exec(t))?t[0]:t}function fe(t,e,n){return t.replace(e,n)}function ld(t,e,n){return t.indexOf(e,n)}function wt(t,e){return t.charCodeAt(e)|0}function Ta(t,e,n){return t.slice(e,n)}function or(t){return t.length}function TP(t){return t.length}function Nl(t,e){return e.push(t),t}function B9(t,e){return t.map(e).join("")}function cI(t,e){return t.filter(function(n){return!Dr(n,e)})}var kp=1,Ia=1,IP=0,Fn=0,at=0,qa="";function Ap(t,e,n,r,i,s,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:kp,column:Ia,length:o,return:"",siblings:a}}function gi(t,e){return F_(Ap("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function wo(t){for(;t.root;)t=gi(t.root,{children:[t]});Nl(t,t.siblings)}function z9(){return at}function W9(){return at=Fn>0?wt(qa,--Fn):0,Ia--,at===10&&(Ia=1,kp--),at}function Jn(){return at=Fn<IP?wt(qa,Fn++):0,Ia++,at===10&&(Ia=1,kp++),at}function Os(){return wt(qa,Fn)}function ud(){return Fn}function Pp(t,e){return Ta(qa,t,e)}function j_(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H9(t){return kp=Ia=1,IP=or(qa=t),Fn=0,[]}function q9(t){return qa="",t}function Jm(t){return EP(Pp(Fn-1,U_(t===91?t+2:t===40?t+1:t)))}function K9(t){for(;(at=Os())&&at<33;)Jn();return j_(t)>2||j_(at)>3?"":" "}function G9(t,e){for(;--e&&Jn()&&!(at<48||at>102||at>57&&at<65||at>70&&at<97););return Pp(t,ud()+(e<6&&Os()==32&&Jn()==32))}function U_(t){for(;Jn();)switch(at){case t:return Fn;case 34:case 39:t!==34&&t!==39&&U_(at);break;case 40:t===41&&U_(t);break;case 92:Jn();break}return Fn}function Q9(t,e){for(;Jn()&&t+at!==57;)if(t+at===84&&Os()===47)break;return"/*"+Pp(e,Fn-1)+"*"+P0(t===47?t:Jn())}function Y9(t){for(;!j_(Os());)Jn();return Pp(t,Fn)}function Z9(t){return q9(cd("",null,null,null,[""],t=H9(t),0,[0],t))}function cd(t,e,n,r,i,s,o,a,l){for(var c=0,h=0,d=o,p=0,g=0,y=0,S=1,R=1,v=1,w=0,E="",P=i,O=s,M=r,T=E;R;)switch(y=w,w=Jn()){case 40:if(y!=108&&wt(T,d-1)==58){ld(T+=fe(Jm(w),"&","&\f"),"&\f",wP(c?a[c-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:T+=Jm(w);break;case 9:case 10:case 13:case 32:T+=K9(y);break;case 92:T+=G9(ud()-1,7);continue;case 47:switch(Os()){case 42:case 47:Nl(X9(Q9(Jn(),ud()),e,n,l),l);break;default:T+="/"}break;case 123*S:a[c++]=or(T)*v;case 125*S:case 59:case 0:switch(w){case 0:case 125:R=0;case 59+h:v==-1&&(T=fe(T,/\f/g,"")),g>0&&or(T)-d&&Nl(g>32?dI(T+";",r,n,d-1,l):dI(fe(T," ","")+";",r,n,d-2,l),l);break;case 59:T+=";";default:if(Nl(M=hI(T,e,n,c,h,i,a,E,P=[],O=[],d,s),s),w===123)if(h===0)cd(T,e,M,M,P,s,d,a,O);else switch(p===99&&wt(T,3)===110?100:p){case 100:case 108:case 109:case 115:cd(t,M,M,r&&Nl(hI(t,M,M,0,0,i,a,E,i,P=[],d,O),O),i,O,d,a,r?P:O);break;default:cd(T,M,M,M,[""],O,0,a,O)}}c=h=g=0,S=v=1,E=T="",d=o;break;case 58:d=1+or(T),g=y;default:if(S<1){if(w==123)--S;else if(w==125&&S++==0&&W9()==125)continue}switch(T+=P0(w),w*S){case 38:v=h>0?1:(T+="\f",-1);break;case 44:a[c++]=(or(T)-1)*v,v=1;break;case 64:Os()===45&&(T+=Jm(Jn())),p=Os(),h=d=or(E=T+=Y9(ud())),w++;break;case 45:y===45&&or(T)==2&&(S=0)}}return s}function hI(t,e,n,r,i,s,o,a,l,c,h,d){for(var p=i-1,g=i===0?s:[""],y=TP(g),S=0,R=0,v=0;S<r;++S)for(var w=0,E=Ta(t,p+1,p=wP(R=o[S])),P=t;w<y;++w)(P=EP(R>0?g[w]+" "+E:fe(E,/&\f/g,g[w])))&&(l[v++]=P);return Ap(t,e,n,i===0?Rp:a,l,c,h,d)}function X9(t,e,n,r){return Ap(t,e,n,yP,P0(z9()),Ta(t,2,-2),0,r)}function dI(t,e,n,r,i){return Ap(t,e,n,A0,Ta(t,0,r),Ta(t,r+1,-1),r,i)}function SP(t,e,n){switch($9(t,e)){case 5103:return Pe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pe+t+t;case 4789:return tu+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Pe+t+tu+t+Be+t+t;case 5936:switch(wt(t,e+11)){case 114:return Pe+t+Be+fe(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Pe+t+Be+fe(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Pe+t+Be+fe(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Pe+t+Be+t+t;case 6165:return Pe+t+Be+"flex-"+t+t;case 5187:return Pe+t+fe(t,/(\w+).+(:[^]+)/,Pe+"box-$1$2"+Be+"flex-$1$2")+t;case 5443:return Pe+t+Be+"flex-item-"+fe(t,/flex-|-self/g,"")+(Dr(t,/flex-|baseline/)?"":Be+"grid-row-"+fe(t,/flex-|-self/g,""))+t;case 4675:return Pe+t+Be+"flex-line-pack"+fe(t,/align-content|flex-|-self/g,"")+t;case 5548:return Pe+t+Be+fe(t,"shrink","negative")+t;case 5292:return Pe+t+Be+fe(t,"basis","preferred-size")+t;case 6060:return Pe+"box-"+fe(t,"-grow","")+Pe+t+Be+fe(t,"grow","positive")+t;case 4554:return Pe+fe(t,/([^-])(transform)/g,"$1"+Pe+"$2")+t;case 6187:return fe(fe(fe(t,/(zoom-|grab)/,Pe+"$1"),/(image-set)/,Pe+"$1"),t,"")+t;case 5495:case 3959:return fe(t,/(image-set\([^]*)/,Pe+"$1$`$1");case 4968:return fe(fe(t,/(.+:)(flex-)?(.*)/,Pe+"box-pack:$3"+Be+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pe+t+t;case 4200:if(!Dr(t,/flex-|baseline/))return Be+"grid-column-align"+Ta(t,e)+t;break;case 2592:case 3360:return Be+fe(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Dr(r.props,/grid-\w+-end/)})?~ld(t+(n=n[e].value),"span",0)?t:Be+fe(t,"-start","")+t+Be+"grid-row-span:"+(~ld(n,"span",0)?Dr(n,/\d+/):+Dr(n,/\d+/)-+Dr(t,/\d+/))+";":Be+fe(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Dr(r.props,/grid-\w+-start/)})?t:Be+fe(fe(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return fe(t,/(.+)-inline(.+)/,Pe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(or(t)-1-e>6)switch(wt(t,e+1)){case 109:if(wt(t,e+4)!==45)break;case 102:return fe(t,/(.+:)(.+)-([^]+)/,"$1"+Pe+"$2-$3$1"+tu+(wt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~ld(t,"stretch",0)?SP(fe(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return fe(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,a,l,c){return Be+i+":"+s+c+(o?Be+i+"-span:"+(a?l:+l-+s)+c:"")+t});case 4949:if(wt(t,e+6)===121)return fe(t,":",":"+Pe)+t;break;case 6444:switch(wt(t,wt(t,14)===45?18:11)){case 120:return fe(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Pe+(wt(t,14)===45?"inline-":"")+"box$3$1"+Pe+"$2$3$1"+Be+"$2box$3")+t;case 100:return fe(t,":",":"+Be)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return fe(t,"scroll-","scroll-snap-")+t}return t}function wf(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function J9(t,e,n,r){switch(t.type){case U9:if(t.children.length)break;case j9:case A0:return t.return=t.return||t.value;case yP:return"";case vP:return t.return=t.value+"{"+wf(t.children,r)+"}";case Rp:if(!or(t.value=t.props.join(",")))return""}return or(n=wf(t.children,r))?t.return=t.value+"{"+n+"}":""}function e$(t){var e=TP(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function t$(t){return function(e){e.root||(e=e.return)&&t(e)}}function n$(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case A0:t.return=SP(t.value,t.length,n);return;case vP:return wf([gi(t,{value:fe(t.value,"@","@"+Pe)})],r);case Rp:if(t.length)return B9(n=t.props,function(i){switch(Dr(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":wo(gi(t,{props:[fe(i,/:(read-\w+)/,":"+tu+"$1")]})),wo(gi(t,{props:[i]})),F_(t,{props:cI(n,r)});break;case"::placeholder":wo(gi(t,{props:[fe(i,/:(plac\w+)/,":"+Pe+"input-$1")]})),wo(gi(t,{props:[fe(i,/:(plac\w+)/,":"+tu+"$1")]})),wo(gi(t,{props:[fe(i,/:(plac\w+)/,Be+"input-$1")]})),wo(gi(t,{props:[i]})),F_(t,{props:cI(n,r)});break}return""})}}var r$={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gn={},Sa=typeof process<"u"&&gn!==void 0&&(gn.REACT_APP_SC_ATTR||gn.SC_ATTR)||"data-styled",CP="active",xP="data-styled-version",bp="6.1.12",b0=`/*!sc*/
`,Ef=typeof window<"u"&&"HTMLElement"in window,i$=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&gn!==void 0&&gn.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&gn.REACT_APP_SC_DISABLE_SPEEDY!==""?gn.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&gn.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&gn!==void 0&&gn.SC_DISABLE_SPEEDY!==void 0&&gn.SC_DISABLE_SPEEDY!==""&&gn.SC_DISABLE_SPEEDY!=="false"&&gn.SC_DISABLE_SPEEDY),Np=Object.freeze([]),Ca=Object.freeze({});function s$(t,e,n){return n===void 0&&(n=Ca),t.theme!==n.theme&&t.theme||e||n.theme}var RP=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),o$=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,a$=/(^-|-$)/g;function fI(t){return t.replace(o$,"-").replace(a$,"")}var l$=/(a)(d)/gi,bh=52,pI=function(t){return String.fromCharCode(t+(t>25?39:97))};function $_(t){var e,n="";for(e=Math.abs(t);e>bh;e=e/bh|0)n=pI(e%bh)+n;return(pI(e%bh)+n).replace(l$,"$1-$2")}var eg,kP=5381,$o=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},AP=function(t){return $o(kP,t)};function u$(t){return $_(AP(t)>>>0)}function c$(t){return t.displayName||t.name||"Component"}function tg(t){return typeof t=="string"&&!0}var PP=typeof Symbol=="function"&&Symbol.for,bP=PP?Symbol.for("react.memo"):60115,h$=PP?Symbol.for("react.forward_ref"):60112,d$={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f$={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},NP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},p$=((eg={})[h$]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eg[bP]=NP,eg);function mI(t){return("type"in(e=t)&&e.type.$$typeof)===bP?NP:"$$typeof"in t?p$[t.$$typeof]:d$;var e}var m$=Object.defineProperty,g$=Object.getOwnPropertyNames,gI=Object.getOwnPropertySymbols,_$=Object.getOwnPropertyDescriptor,y$=Object.getPrototypeOf,_I=Object.prototype;function OP(t,e,n){if(typeof e!="string"){if(_I){var r=y$(e);r&&r!==_I&&OP(t,r,n)}var i=g$(e);gI&&(i=i.concat(gI(e)));for(var s=mI(t),o=mI(e),a=0;a<i.length;++a){var l=i[a];if(!(l in f$||n&&n[l]||o&&l in o||s&&l in s)){var c=_$(e,l);try{m$(t,l,c)}catch{}}}}return t}function xa(t){return typeof t=="function"}function N0(t){return typeof t=="object"&&"styledComponentId"in t}function ks(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function yI(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function Ku(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function B_(t,e,n){if(n===void 0&&(n=!1),!n&&!Ku(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=B_(t[r],e[r]);else if(Ku(e))for(var r in e)t[r]=B_(t[r],e[r]);return t}function O0(t,e){Object.defineProperty(t,"toString",{value:e})}function Fc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var v$=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw Fc(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),l=(o=0,n.length);o<l;o++)this.tag.insertRule(a,n[o])&&(this.groupSizes[e]++,a++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(b0);return n},t}(),hd=new Map,Tf=new Map,dd=1,Nh=function(t){if(hd.has(t))return hd.get(t);for(;Tf.has(dd);)dd++;var e=dd++;return hd.set(t,e),Tf.set(e,t),e},w$=function(t,e){dd=e+1,hd.set(t,e),Tf.set(e,t)},E$="style[".concat(Sa,"][").concat(xP,'="').concat(bp,'"]'),T$=new RegExp("^".concat(Sa,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),I$=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},S$=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(b0),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var l=a.match(T$);if(l){var c=0|parseInt(l[1],10),h=l[2];c!==0&&(w$(h,c),I$(t,h,l[3]),t.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},vI=function(t){for(var e=document.querySelectorAll(E$),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(Sa)!==CP&&(S$(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function C$(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var DP=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(Sa,"]")));return l[l.length-1]}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Sa,CP),r.setAttribute(xP,bp);var o=C$();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},x$=function(){function t(e){this.element=DP(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===n)return o}throw Fc(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),R$=function(){function t(e){this.element=DP(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),k$=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),wI=Ef,A$={isServer:!Ef,useCSSOMInjection:!i$},MP=function(){function t(e,n,r){e===void 0&&(e=Ca),n===void 0&&(n={});var i=this;this.options=un(un({},A$),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Ef&&wI&&(wI=!1,vI(this)),O0(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",c=function(d){var p=function(v){return Tf.get(v)}(d);if(p===void 0)return"continue";var g=s.names.get(p),y=o.getGroup(d);if(g===void 0||!g.size||y.length===0)return"continue";var S="".concat(Sa,".g").concat(d,'[id="').concat(p,'"]'),R="";g!==void 0&&g.forEach(function(v){v.length>0&&(R+="".concat(v,","))}),l+="".concat(y).concat(S,'{content:"').concat(R,'"}').concat(b0)},h=0;h<a;h++)c(h);return l}(i)})}return t.registerId=function(e){return Nh(e)},t.prototype.rehydrate=function(){!this.server&&Ef&&vI(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(un(un({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new k$(i):r?new x$(i):new R$(i)}(this.options),new v$(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Nh(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Nh(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Nh(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),P$=/&/g,b$=/^\s*\/\/.*$/gm;function LP(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=LP(n.children,e)),n})}function N$(t){var e,n,r,i=Ca,s=i.options,o=s===void 0?Ca:s,a=i.plugins,l=a===void 0?Np:a,c=function(p,g,y){return y.startsWith(n)&&y.endsWith(n)&&y.replaceAll(n,"").length>0?".".concat(e):p},h=l.slice();h.push(function(p){p.type===Rp&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(P$,n).replace(r,c))}),o.prefix&&h.push(n$),h.push(J9);var d=function(p,g,y,S){g===void 0&&(g=""),y===void 0&&(y=""),S===void 0&&(S="&"),e=S,n=g,r=new RegExp("\\".concat(n,"\\b"),"g");var R=p.replace(b$,""),v=Z9(y||g?"".concat(y," ").concat(g," { ").concat(R," }"):R);o.namespace&&(v=LP(v,o.namespace));var w=[];return wf(v,e$(h.concat(t$(function(E){return w.push(E)})))),w};return d.hash=l.length?l.reduce(function(p,g){return g.name||Fc(15),$o(p,g.name)},kP).toString():"",d}var O$=new MP,z_=N$(),VP=X.createContext({shouldForwardProp:void 0,styleSheet:O$,stylis:z_});VP.Consumer;X.createContext(void 0);function EI(){return V.useContext(VP)}var D$=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=z_);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,O0(this,function(){throw Fc(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=z_),this.name+e.hash},t}(),M$=function(t){return t>="A"&&t<="Z"};function TI(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;M$(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var FP=function(t){return t==null||t===!1||t===""},jP=function(t){var e,n,r=[];for(var i in t){var s=t[i];t.hasOwnProperty(i)&&!FP(s)&&(Array.isArray(s)&&s.isCss||xa(s)?r.push("".concat(TI(i),":"),s,";"):Ku(s)?r.push.apply(r,vf(vf(["".concat(i," {")],jP(s),!1),["}"],!1)):r.push("".concat(TI(i),": ").concat((e=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in r$||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Ds(t,e,n,r){if(FP(t))return[];if(N0(t))return[".".concat(t.styledComponentId)];if(xa(t)){if(!xa(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var i=t(e);return Ds(i,e,n,r)}var s;return t instanceof D$?n?(t.inject(n,r),[t.getName(r)]):[t]:Ku(t)?jP(t):Array.isArray(t)?Array.prototype.concat.apply(Np,t.map(function(o){return Ds(o,e,n,r)})):[t.toString()]}function L$(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(xa(n)&&!N0(n))return!1}return!0}var V$=AP(bp),F$=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&L$(e),this.componentId=n,this.baseHash=$o(V$,n),this.baseStyle=r,MP.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=ks(i,this.staticRulesId);else{var s=yI(Ds(this.rules,e,n,r)),o=$_($o(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var a=r(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,a)}i=ks(i,o),this.staticRulesId=o}else{for(var l=$o(this.baseHash,r.hash),c="",h=0;h<this.rules.length;h++){var d=this.rules[h];if(typeof d=="string")c+=d;else if(d){var p=yI(Ds(d,e,n,r));l=$o(l,p+h),c+=p}}if(c){var g=$_(l>>>0);n.hasNameForId(this.componentId,g)||n.insertRules(this.componentId,g,r(c,".".concat(g),void 0,this.componentId)),i=ks(i,g)}}return i},t}(),UP=X.createContext(void 0);UP.Consumer;var ng={};function j$(t,e,n){var r=N0(t),i=t,s=!tg(t),o=e.attrs,a=o===void 0?Np:o,l=e.componentId,c=l===void 0?function(P,O){var M=typeof P!="string"?"sc":fI(P);ng[M]=(ng[M]||0)+1;var T="".concat(M,"-").concat(u$(bp+M+ng[M]));return O?"".concat(O,"-").concat(T):T}(e.displayName,e.parentComponentId):l,h=e.displayName,d=h===void 0?function(P){return tg(P)?"styled.".concat(P):"Styled(".concat(c$(P),")")}(t):h,p=e.displayName&&e.componentId?"".concat(fI(e.displayName),"-").concat(e.componentId):e.componentId||c,g=r&&i.attrs?i.attrs.concat(a).filter(Boolean):a,y=e.shouldForwardProp;if(r&&i.shouldForwardProp){var S=i.shouldForwardProp;if(e.shouldForwardProp){var R=e.shouldForwardProp;y=function(P,O){return S(P,O)&&R(P,O)}}else y=S}var v=new F$(n,p,r?i.componentStyle:void 0);function w(P,O){return function(M,T,_){var C=M.attrs,k=M.componentStyle,b=M.defaultProps,N=M.foldedComponentIds,A=M.styledComponentId,Se=M.target,ct=X.useContext(UP),Qt=EI(),Me=M.shouldForwardProp||Qt.shouldForwardProp,z=s$(T,ct,b)||Ca,G=function(je,qe,st){for(var xr,Rr=un(un({},qe),{className:void 0,theme:st}),ui=0;ui<je.length;ui+=1){var kr=xa(xr=je[ui])?xr(Rr):xr;for(var Rn in kr)Rr[Rn]=Rn==="className"?ks(Rr[Rn],kr[Rn]):Rn==="style"?un(un({},Rr[Rn]),kr[Rn]):kr[Rn]}return qe.className&&(Rr.className=ks(Rr.className,qe.className)),Rr}(C,T,z),Z=G.as||Se,de={};for(var te in G)G[te]===void 0||te[0]==="$"||te==="as"||te==="theme"&&G.theme===z||(te==="forwardedAs"?de.as=G.forwardedAs:Me&&!Me(te,Z)||(de[te]=G[te]));var me=function(je,qe){var st=EI(),xr=je.generateAndInjectStyles(qe,st.styleSheet,st.stylis);return xr}(k,G),Fe=ks(N,A);return me&&(Fe+=" "+me),G.className&&(Fe+=" "+G.className),de[tg(Z)&&!RP.has(Z)?"class":"className"]=Fe,de.ref=_,V.createElement(Z,de)}(E,P,O)}w.displayName=d;var E=X.forwardRef(w);return E.attrs=g,E.componentStyle=v,E.displayName=d,E.shouldForwardProp=y,E.foldedComponentIds=r?ks(i.foldedComponentIds,i.styledComponentId):"",E.styledComponentId=p,E.target=r?i.target:t,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(P){this._foldedDefaultProps=r?function(O){for(var M=[],T=1;T<arguments.length;T++)M[T-1]=arguments[T];for(var _=0,C=M;_<C.length;_++)B_(O,C[_],!0);return O}({},i.defaultProps,P):P}}),O0(E,function(){return".".concat(E.styledComponentId)}),s&&OP(E,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function II(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var SI=function(t){return Object.assign(t,{isCss:!0})};function U$(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xa(t)||Ku(t))return SI(Ds(II(Np,vf([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Ds(r):SI(Ds(II(r,e)))}function W_(t,e,n){if(n===void 0&&(n=Ca),!e)throw Fc(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,U$.apply(void 0,vf([i],s,!1)))};return r.attrs=function(i){return W_(t,e,un(un({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return W_(t,e,un(un({},n),i))},r}var $P=function(t){return W_(j$,t)},Gt=$P;RP.forEach(function(t){Gt[t]=$P(t)});const H_=(t=!1)=>`
&:hover {
    cursor: pointer;
    transform: scale(1.01) ${t?"translateX(40px)":""};;
}
`,$$=Gt.div`
  box-shadow: inset rgba(0, 0, 0, 0.4) 1px 0px 30px 5px;
  background: rgba(0, 0, 0, 0.1);
  filter: blur(40%);
  .menu {
    color: black;
    ${H_(!1)}
  }
  width: max(25%, 200px);
  .center {
    color: rgba(0, 0, 0, 0.8);
    right: calc(50% - 30px);
  }
  font-size: 13px;
  .center-2 {
    transform: translateY(-20px) translateX(-2px) rotate(12deg);
  }
  .btn {
    background: rgba(228, 182, 167, 0.9);
    transform: translateX(40px);
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    width: calc(100% + 40px);
    box-shadow: rgba(0, 0, 0, 0.4) 1px 0px 10px 2px;
    ${H_(!0)}
  }
  .text {
    transform: translateX(-12px);
    display: block;
  }
  .image {
  }
`,B$=Gt.div`
  background: ${ce.light};
  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
  padding: 0.5rem;
  margin: 8px;
  position: relative;
  width: 100%;
  justify-content: space-evenly;
  text-align: center;
  align-items: center;

  display: flex;
  flex-direction: row;
  overflow-x: scroll;
  align-items: center;
  gap: 0.25rem;

  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
  ::-webkit-scrollbar {
    display: none;
  }
  p {
    padding-block: 4px;
    padding-inline: 1rem;
    width: max-content;
    display: flex;
    text-align: start;
    font-weight: bold;
    cursor: pointer;
    color: ${ce.dark};
    white-space: nowrap; /* Prevents the text from wrapping */
  }

  @media only screen and (max-width: 800px) {
    margin-inline: auto;
    max-width: 95%;
  }
`,z$=Gt.div`
  position: relative;
  margin-right: 64px;
  width: 100%;
  justify-content: space-evenly;
  text-align: center;
  align-items: center;

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
  ::-webkit-scrollbar {
    display: none;
  }
`,W$=Gt.input`
  position: relative;
  background: ${ce.light};
  outline: none;
  height: 50px;
  padding-block: 4px;
  padding-left: 8px;
  padding-right: 4px;
`,H$=Gt.p`
  position: relative;
  &:after {
    background: ${ce.main};
    content: "";
    display: block;
    position: absolute;
    bottom: 0;
    left: 0;
    height: 4px;
    right: 0;
  }
`,q$=Gt.div`
  display: flex;
  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
  flex-wrap: wrap;
  direction: rtl;
  justify-content: center;
  align-content: flex-start;
  width: 100%;
  height: 700px;
  overflow-y: scroll;
  gap: 1rem;
  padding: 1rem;
  background: ${ce.light};
  margin: 8px;
  .item-card {
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
    border-radius: 8px;
    padding: 1rem;
    width: 250px;
    height: 100px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    background: white;
    gap: 1rem;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    ${H_()}

    @media only screen and (max-width: 800px) {
      // shrink it abit so it fits 2 columns
      width: 200px;
      height: 120px;
    }
    @media only screen and (max-width: 400px) {
      // shrink it abit so it fits 2 columns
      width: 150px;
      height: 130px;
      font-size: 16px;
    }

    @media only screen and (min-width: 900px) {
      height: 120px;
    }
  }
`,K$=()=>{const t=Ha(),{user:e,logout:n}=uo();return x.jsx($$,{className:" absolute bottom-0 right-0 top-0 p-4",children:x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("img",{alt:"No logo",width:200,height:100,className:"image absolute bottom-[380px]",src:"https://firebasestorage.googleapis.com/v0/b/tabitorderprd.appspot.com/o/td-brand-v2%2F63e0f6d7ef3221b153e413f5%2Fthumbnail_%D7%9C%D7%95%D7%92%D7%95%20%D7%A9%D7%97%D7%95%D7%A8.png?alt=media&token=dfe6a43c-0317-4320-a155-3cb8f25eb003"}),x.jsx("div",{className:"menu absolute bottom-44 rounded-md border-[1px] border-[black] bg-[#E4B6A7] w-[55px] min-h-[45px] p-2 text-center center center-2"}),e&&x.jsxs("span",{className:"text-[24px] flex flex-col items-center font-bold translate-x-[2.25rem] absolute bottom-60 rounded-md border-[black]  min-h-[60px] p-2 text-center center",children:[x.jsxs("span",{className:"mb-1",children:[e==null?void 0:e.name," "]}),x.jsx("span",{className:"text-[16px] font-normal translate-y-[-.325rem] cursor-pointer",onClick:()=>{confirm("    ?")&&n()},children:""})]}),x.jsx("div",{onClick:()=>{if(!e){t("/auth/login");return}t("/menu")},className:"menu absolute bottom-44 rounded-md border-[1px] border-[black] bg-[#E4B6A7] w-[60px] min-h-[60px] p-2 text-center center",children:" "}),x.jsx("div",{className:"menu absolute bottom-24 right-0 rounded-full border-[1px] border-[black] min-h-[60px] p-2 btn text-center",children:x.jsxs("span",{className:"text",onClick:()=>{if(!e){t("/auth/login");return}t("/menu")},children:[" "," "]})}),e&&e.isAdmin&&x.jsx("div",{className:"menu absolute bottom-5 right-0 rounded-full border-[1px] border-[black] min-h-[20px] p-2 btn text-center",children:x.jsxs("span",{className:"text",onClick:()=>{t("/admin")},children:[" "," "]})})]})})};function G$(){return x.jsx("main",{className:"flex min-h-full flex-col items-center justify-between p-24",children:x.jsx(K$,{})})}var Ie;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Ie||(Ie={}));var q_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(q_||(q_={}));const q=Ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xi=t=>{switch(typeof t){case"undefined":return q.undefined;case"string":return q.string;case"number":return isNaN(t)?q.nan:q.number;case"boolean":return q.boolean;case"function":return q.function;case"bigint":return q.bigint;case"symbol":return q.symbol;case"object":return Array.isArray(t)?q.array:t===null?q.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?q.promise:typeof Map<"u"&&t instanceof Map?q.map:typeof Set<"u"&&t instanceof Set?q.set:typeof Date<"u"&&t instanceof Date?q.date:q.object;default:return q.unknown}},$=Ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Q$=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Tn extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof Tn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Tn.create=t=>new Tn(t);const Ra=(t,e)=>{let n;switch(t.code){case $.invalid_type:t.received===q.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case $.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ie.jsonStringifyReplacer)}`;break;case $.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ie.joinValues(t.keys,", ")}`;break;case $.invalid_union:n="Invalid input";break;case $.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ie.joinValues(t.options)}`;break;case $.invalid_enum_value:n=`Invalid enum value. Expected ${Ie.joinValues(t.options)}, received '${t.received}'`;break;case $.invalid_arguments:n="Invalid function arguments";break;case $.invalid_return_type:n="Invalid function return type";break;case $.invalid_date:n="Invalid date";break;case $.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ie.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case $.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case $.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case $.custom:n="Invalid input";break;case $.invalid_intersection_types:n="Intersection results could not be merged";break;case $.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case $.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ie.assertNever(t)}return{message:n}};let BP=Ra;function Y$(t){BP=t}function If(){return BP}const Sf=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},Z$=[];function H(t,e){const n=If(),r=Sf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ra?void 0:Ra].filter(i=>!!i)});t.common.issues.push(r)}class Kt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return oe;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Kt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return oe;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const oe=Object.freeze({status:"aborted"}),Bo=t=>({status:"dirty",value:t}),rn=t=>({status:"valid",value:t}),K_=t=>t.status==="aborted",G_=t=>t.status==="dirty",Gu=t=>t.status==="valid",Qu=t=>typeof Promise<"u"&&t instanceof Promise;function Cf(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function zP(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Y;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Y||(Y={}));var Ol,Dl;class Ir{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const CI=(t,e)=>{if(Gu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Tn(t.common.issues);return this._error=n,this._error}}};function he(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:h}=t;return o.code==="invalid_enum_value"?{message:h??a.defaultError}:typeof a.data>"u"?{message:(l=h??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=h??n)!==null&&c!==void 0?c:a.defaultError}},description:i}}class pe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return xi(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:xi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kt,ctx:{common:e.parent.common,data:e.data,parsedType:xi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Qu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xi(e)},s=this._parseSync({data:e,path:i.path,parent:i});return CI(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xi(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Qu(i)?i:Promise.resolve(i));return CI(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:$.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new rr({schema:this,typeName:re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return vr.create(this,this._def)}nullable(){return ss.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return er.create(this,this._def)}promise(){return Aa.create(this,this._def)}or(e){return Ju.create([this,e],this._def)}and(e){return ec.create(this,e,this._def)}transform(e){return new rr({...he(this._def),schema:this,typeName:re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new sc({...he(this._def),innerType:this,defaultValue:n,typeName:re.ZodDefault})}brand(){return new D0({typeName:re.ZodBranded,type:this,...he(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new oc({...he(this._def),innerType:this,catchValue:n,typeName:re.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return jc.create(this,e)}readonly(){return ac.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const X$=/^c[^\s-]{8,}$/i,J$=/^[0-9a-z]+$/,eB=/^[0-9A-HJKMNP-TV-Z]{26}$/,tB=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nB=/^[a-z0-9_-]{21}$/i,rB=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,iB=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rg;const oB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aB=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,lB=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",uB=new RegExp(`^${WP}$`);function HP(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function cB(t){return new RegExp(`^${HP(t)}$`)}function qP(t){let e=`${WP}T${HP(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function hB(t,e){return!!((e==="v4"||!e)&&oB.test(t)||(e==="v6"||!e)&&aB.test(t))}class Qn extends pe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==q.string){const s=this._getOrReturnCtx(e);return H(s,{code:$.invalid_type,expected:q.string,received:s.parsedType}),oe}const r=new Kt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:$.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:$.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?H(i,{code:$.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&H(i,{code:$.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")iB.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"email",code:$.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")rg||(rg=new RegExp(sB,"u")),rg.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"emoji",code:$.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")tB.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"uuid",code:$.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")nB.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"nanoid",code:$.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")X$.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"cuid",code:$.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")J$.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"cuid2",code:$.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")eB.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"ulid",code:$.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),H(i,{validation:"url",code:$.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"regex",code:$.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),H(i,{code:$.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),H(i,{code:$.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),H(i,{code:$.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?qP(s).test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{code:$.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?uB.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{code:$.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?cB(s).test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{code:$.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?rB.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"duration",code:$.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?hB(e.data,s.version)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"ip",code:$.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?lB.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"base64",code:$.invalid_string,message:s.message}),r.dirty()):Ie.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:$.invalid_string,...Y.errToObj(r)})}_addCheck(e){return new Qn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Y.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Y.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Y.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Y.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Y.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Y.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Y.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Y.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Y.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Y.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Y.errToObj(n)})}nonempty(e){return this.min(1,Y.errToObj(e))}trim(){return new Qn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Qn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Qn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Qn.create=t=>{var e;return new Qn({checks:[],typeName:re.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...he(t)})};function dB(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class ns extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==q.number){const s=this._getOrReturnCtx(e);return H(s,{code:$.invalid_type,expected:q.number,received:s.parsedType}),oe}let r;const i=new Kt;for(const s of this._def.checks)s.kind==="int"?Ie.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),H(r,{code:$.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:$.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:$.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?dB(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),H(r,{code:$.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),H(r,{code:$.not_finite,message:s.message}),i.dirty()):Ie.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Y.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Y.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Y.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Y.toString(n))}setLimit(e,n,r,i){return new ns({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Y.toString(i)}]})}_addCheck(e){return new ns({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ie.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ns.create=t=>new ns({checks:[],typeName:re.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...he(t)});class rs extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==q.bigint){const s=this._getOrReturnCtx(e);return H(s,{code:$.invalid_type,expected:q.bigint,received:s.parsedType}),oe}let r;const i=new Kt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:$.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),H(r,{code:$.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),H(r,{code:$.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ie.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Y.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Y.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Y.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Y.toString(n))}setLimit(e,n,r,i){return new rs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Y.toString(i)}]})}_addCheck(e){return new rs({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}rs.create=t=>{var e;return new rs({checks:[],typeName:re.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...he(t)})};class Yu extends pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==q.boolean){const r=this._getOrReturnCtx(e);return H(r,{code:$.invalid_type,expected:q.boolean,received:r.parsedType}),oe}return rn(e.data)}}Yu.create=t=>new Yu({typeName:re.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...he(t)});class Js extends pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==q.date){const s=this._getOrReturnCtx(e);return H(s,{code:$.invalid_type,expected:q.date,received:s.parsedType}),oe}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return H(s,{code:$.invalid_date}),oe}const r=new Kt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:$.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:$.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Ie.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Js({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Y.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Y.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Js.create=t=>new Js({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:re.ZodDate,...he(t)});class xf extends pe{_parse(e){if(this._getType(e)!==q.symbol){const r=this._getOrReturnCtx(e);return H(r,{code:$.invalid_type,expected:q.symbol,received:r.parsedType}),oe}return rn(e.data)}}xf.create=t=>new xf({typeName:re.ZodSymbol,...he(t)});class Zu extends pe{_parse(e){if(this._getType(e)!==q.undefined){const r=this._getOrReturnCtx(e);return H(r,{code:$.invalid_type,expected:q.undefined,received:r.parsedType}),oe}return rn(e.data)}}Zu.create=t=>new Zu({typeName:re.ZodUndefined,...he(t)});class Xu extends pe{_parse(e){if(this._getType(e)!==q.null){const r=this._getOrReturnCtx(e);return H(r,{code:$.invalid_type,expected:q.null,received:r.parsedType}),oe}return rn(e.data)}}Xu.create=t=>new Xu({typeName:re.ZodNull,...he(t)});class ka extends pe{constructor(){super(...arguments),this._any=!0}_parse(e){return rn(e.data)}}ka.create=t=>new ka({typeName:re.ZodAny,...he(t)});class Ms extends pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rn(e.data)}}Ms.create=t=>new Ms({typeName:re.ZodUnknown,...he(t)});class ri extends pe{_parse(e){const n=this._getOrReturnCtx(e);return H(n,{code:$.invalid_type,expected:q.never,received:n.parsedType}),oe}}ri.create=t=>new ri({typeName:re.ZodNever,...he(t)});class Rf extends pe{_parse(e){if(this._getType(e)!==q.undefined){const r=this._getOrReturnCtx(e);return H(r,{code:$.invalid_type,expected:q.void,received:r.parsedType}),oe}return rn(e.data)}}Rf.create=t=>new Rf({typeName:re.ZodVoid,...he(t)});class er extends pe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==q.array)return H(n,{code:$.invalid_type,expected:q.array,received:n.parsedType}),oe;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(H(n,{code:o?$.too_big:$.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(H(n,{code:$.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(H(n,{code:$.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Ir(n,o,n.path,a)))).then(o=>Kt.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Ir(n,o,n.path,a)));return Kt.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new er({...this._def,minLength:{value:e,message:Y.toString(n)}})}max(e,n){return new er({...this._def,maxLength:{value:e,message:Y.toString(n)}})}length(e,n){return new er({...this._def,exactLength:{value:e,message:Y.toString(n)}})}nonempty(e){return this.min(1,e)}}er.create=(t,e)=>new er({type:t,minLength:null,maxLength:null,exactLength:null,typeName:re.ZodArray,...he(e)});function xo(t){if(t instanceof Ke){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=vr.create(xo(r))}return new Ke({...t._def,shape:()=>e})}else return t instanceof er?new er({...t._def,type:xo(t.element)}):t instanceof vr?vr.create(xo(t.unwrap())):t instanceof ss?ss.create(xo(t.unwrap())):t instanceof Sr?Sr.create(t.items.map(e=>xo(e))):t}class Ke extends pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ie.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==q.object){const c=this._getOrReturnCtx(e);return H(c,{code:$.invalid_type,expected:q.object,received:c.parsedType}),oe}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ri&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const h=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new Ir(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ri){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(c==="strict")a.length>0&&(H(i,{code:$.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of a){const d=i.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new Ir(i,d,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of l){const d=await h.key,p=await h.value;c.push({key:d,value:p,alwaysSet:h.alwaysSet})}return c}).then(c=>Kt.mergeObjectSync(r,c)):Kt.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Y.errToObj,new Ke({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Y.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Ke({...this._def,unknownKeys:"strip"})}passthrough(){return new Ke({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ke({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ke({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:re.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ke({...this._def,catchall:e})}pick(e){const n={};return Ie.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ke({...this._def,shape:()=>n})}omit(e){const n={};return Ie.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ke({...this._def,shape:()=>n})}deepPartial(){return xo(this)}partial(e){const n={};return Ie.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Ke({...this._def,shape:()=>n})}required(e){const n={};return Ie.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof vr;)s=s._def.innerType;n[r]=s}}),new Ke({...this._def,shape:()=>n})}keyof(){return KP(Ie.objectKeys(this.shape))}}Ke.create=(t,e)=>new Ke({shape:()=>t,unknownKeys:"strip",catchall:ri.create(),typeName:re.ZodObject,...he(e)});Ke.strictCreate=(t,e)=>new Ke({shape:()=>t,unknownKeys:"strict",catchall:ri.create(),typeName:re.ZodObject,...he(e)});Ke.lazycreate=(t,e)=>new Ke({shape:t,unknownKeys:"strip",catchall:ri.create(),typeName:re.ZodObject,...he(e)});class Ju extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Tn(a.ctx.common.issues));return H(n,{code:$.invalid_union,unionErrors:o}),oe}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},h=l._parseSync({data:n.data,path:n.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Tn(l));return H(n,{code:$.invalid_union,unionErrors:a}),oe}}get options(){return this._def.options}}Ju.create=(t,e)=>new Ju({options:t,typeName:re.ZodUnion,...he(e)});const Nr=t=>t instanceof nc?Nr(t.schema):t instanceof rr?Nr(t.innerType()):t instanceof rc?[t.value]:t instanceof is?t.options:t instanceof ic?Ie.objectValues(t.enum):t instanceof sc?Nr(t._def.innerType):t instanceof Zu?[void 0]:t instanceof Xu?[null]:t instanceof vr?[void 0,...Nr(t.unwrap())]:t instanceof ss?[null,...Nr(t.unwrap())]:t instanceof D0||t instanceof ac?Nr(t.unwrap()):t instanceof oc?Nr(t._def.innerType):[];class Op extends pe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==q.object)return H(n,{code:$.invalid_type,expected:q.object,received:n.parsedType}),oe;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(H(n,{code:$.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),oe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Nr(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Op({typeName:re.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...he(r)})}}function Q_(t,e){const n=xi(t),r=xi(e);if(t===e)return{valid:!0,data:t};if(n===q.object&&r===q.object){const i=Ie.objectKeys(e),s=Ie.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Q_(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===q.array&&r===q.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Q_(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===q.date&&r===q.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ec extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(K_(s)||K_(o))return oe;const a=Q_(s.value,o.value);return a.valid?((G_(s)||G_(o))&&n.dirty(),{status:n.value,value:a.data}):(H(r,{code:$.invalid_intersection_types}),oe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ec.create=(t,e,n)=>new ec({left:t,right:e,typeName:re.ZodIntersection,...he(n)});class Sr extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.array)return H(r,{code:$.invalid_type,expected:q.array,received:r.parsedType}),oe;if(r.data.length<this._def.items.length)return H(r,{code:$.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),oe;!this._def.rest&&r.data.length>this._def.items.length&&(H(r,{code:$.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ir(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Kt.mergeArray(n,o)):Kt.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Sr({...this._def,rest:e})}}Sr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sr({items:t,typeName:re.ZodTuple,rest:null,...he(e)})};class tc extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.object)return H(r,{code:$.invalid_type,expected:q.object,received:r.parsedType}),oe;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Ir(r,a,r.path,a)),value:o._parse(new Ir(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Kt.mergeObjectAsync(n,i):Kt.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof pe?new tc({keyType:e,valueType:n,typeName:re.ZodRecord,...he(r)}):new tc({keyType:Qn.create(),valueType:e,typeName:re.ZodRecord,...he(n)})}}class kf extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.map)return H(r,{code:$.invalid_type,expected:q.map,received:r.parsedType}),oe;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Ir(r,a,r.path,[c,"key"])),value:s._parse(new Ir(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,h=await l.value;if(c.status==="aborted"||h.status==="aborted")return oe;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(c.value,h.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,h=l.value;if(c.status==="aborted"||h.status==="aborted")return oe;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(c.value,h.value)}return{status:n.value,value:a}}}}kf.create=(t,e,n)=>new kf({valueType:e,keyType:t,typeName:re.ZodMap,...he(n)});class eo extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.set)return H(r,{code:$.invalid_type,expected:q.set,received:r.parsedType}),oe;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(H(r,{code:$.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(H(r,{code:$.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const h of l){if(h.status==="aborted")return oe;h.status==="dirty"&&n.dirty(),c.add(h.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new Ir(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new eo({...this._def,minSize:{value:e,message:Y.toString(n)}})}max(e,n){return new eo({...this._def,maxSize:{value:e,message:Y.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}eo.create=(t,e)=>new eo({valueType:t,minSize:null,maxSize:null,typeName:re.ZodSet,...he(e)});class na extends pe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==q.function)return H(n,{code:$.invalid_type,expected:q.function,received:n.parsedType}),oe;function r(a,l){return Sf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,If(),Ra].filter(c=>!!c),issueData:{code:$.invalid_arguments,argumentsError:l}})}function i(a,l){return Sf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,If(),Ra].filter(c=>!!c),issueData:{code:$.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Aa){const a=this;return rn(async function(...l){const c=new Tn([]),h=await a._def.args.parseAsync(l,s).catch(g=>{throw c.addIssue(r(l,g)),c}),d=await Reflect.apply(o,this,h);return await a._def.returns._def.type.parseAsync(d,s).catch(g=>{throw c.addIssue(i(d,g)),c})})}else{const a=this;return rn(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Tn([r(l,c.error)]);const h=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(h,s);if(!d.success)throw new Tn([i(h,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new na({...this._def,args:Sr.create(e).rest(Ms.create())})}returns(e){return new na({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new na({args:e||Sr.create([]).rest(Ms.create()),returns:n||Ms.create(),typeName:re.ZodFunction,...he(r)})}}class nc extends pe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}nc.create=(t,e)=>new nc({getter:t,typeName:re.ZodLazy,...he(e)});class rc extends pe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return H(n,{received:n.data,code:$.invalid_literal,expected:this._def.value}),oe}return{status:"valid",value:e.data}}get value(){return this._def.value}}rc.create=(t,e)=>new rc({value:t,typeName:re.ZodLiteral,...he(e)});function KP(t,e){return new is({values:t,typeName:re.ZodEnum,...he(e)})}class is extends pe{constructor(){super(...arguments),Ol.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return H(n,{expected:Ie.joinValues(r),received:n.parsedType,code:$.invalid_type}),oe}if(Cf(this,Ol)||zP(this,Ol,new Set(this._def.values)),!Cf(this,Ol).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return H(n,{received:n.data,code:$.invalid_enum_value,options:r}),oe}return rn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return is.create(e,{...this._def,...n})}exclude(e,n=this._def){return is.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ol=new WeakMap;is.create=KP;class ic extends pe{constructor(){super(...arguments),Dl.set(this,void 0)}_parse(e){const n=Ie.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==q.string&&r.parsedType!==q.number){const i=Ie.objectValues(n);return H(r,{expected:Ie.joinValues(i),received:r.parsedType,code:$.invalid_type}),oe}if(Cf(this,Dl)||zP(this,Dl,new Set(Ie.getValidEnumValues(this._def.values))),!Cf(this,Dl).has(e.data)){const i=Ie.objectValues(n);return H(r,{received:r.data,code:$.invalid_enum_value,options:i}),oe}return rn(e.data)}get enum(){return this._def.values}}Dl=new WeakMap;ic.create=(t,e)=>new ic({values:t,typeName:re.ZodNativeEnum,...he(e)});class Aa extends pe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==q.promise&&n.common.async===!1)return H(n,{code:$.invalid_type,expected:q.promise,received:n.parsedType}),oe;const r=n.parsedType===q.promise?n.data:Promise.resolve(n.data);return rn(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Aa.create=(t,e)=>new Aa({type:t,typeName:re.ZodPromise,...he(e)});class rr extends pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{H(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return oe;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?oe:l.status==="dirty"||n.value==="dirty"?Bo(l.value):l});{if(n.value==="aborted")return oe;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?oe:a.status==="dirty"||n.value==="dirty"?Bo(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?oe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?oe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Gu(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Gu(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Ie.assertNever(i)}}rr.create=(t,e,n)=>new rr({schema:t,typeName:re.ZodEffects,effect:e,...he(n)});rr.createWithPreprocess=(t,e,n)=>new rr({schema:e,effect:{type:"preprocess",transform:t},typeName:re.ZodEffects,...he(n)});class vr extends pe{_parse(e){return this._getType(e)===q.undefined?rn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vr.create=(t,e)=>new vr({innerType:t,typeName:re.ZodOptional,...he(e)});class ss extends pe{_parse(e){return this._getType(e)===q.null?rn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ss.create=(t,e)=>new ss({innerType:t,typeName:re.ZodNullable,...he(e)});class sc extends pe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===q.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}sc.create=(t,e)=>new sc({innerType:t,typeName:re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...he(e)});class oc extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Qu(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Tn(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Tn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}oc.create=(t,e)=>new oc({innerType:t,typeName:re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...he(e)});class Af extends pe{_parse(e){if(this._getType(e)!==q.nan){const r=this._getOrReturnCtx(e);return H(r,{code:$.invalid_type,expected:q.nan,received:r.parsedType}),oe}return{status:"valid",value:e.data}}}Af.create=t=>new Af({typeName:re.ZodNaN,...he(t)});const fB=Symbol("zod_brand");class D0 extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class jc extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?oe:s.status==="dirty"?(n.dirty(),Bo(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?oe:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new jc({in:e,out:n,typeName:re.ZodPipeline})}}class ac extends pe{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Gu(i)&&(i.value=Object.freeze(i.value)),i);return Qu(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}ac.create=(t,e)=>new ac({innerType:t,typeName:re.ZodReadonly,...he(e)});function GP(t,e={},n){return t?ka.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):ka.create()}const pB={object:Ke.lazycreate};var re;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(re||(re={}));const mB=(t,e={message:`Input not instance of ${t.name}`})=>GP(n=>n instanceof t,e),QP=Qn.create,YP=ns.create,gB=Af.create,_B=rs.create,ZP=Yu.create,yB=Js.create,vB=xf.create,wB=Zu.create,EB=Xu.create,TB=ka.create,IB=Ms.create,SB=ri.create,CB=Rf.create,xB=er.create,RB=Ke.create,kB=Ke.strictCreate,AB=Ju.create,PB=Op.create,bB=ec.create,NB=Sr.create,OB=tc.create,DB=kf.create,MB=eo.create,LB=na.create,VB=nc.create,FB=rc.create,jB=is.create,UB=ic.create,$B=Aa.create,xI=rr.create,BB=vr.create,zB=ss.create,WB=rr.createWithPreprocess,HB=jc.create,qB=()=>QP().optional(),KB=()=>YP().optional(),GB=()=>ZP().optional(),QB={string:t=>Qn.create({...t,coerce:!0}),number:t=>ns.create({...t,coerce:!0}),boolean:t=>Yu.create({...t,coerce:!0}),bigint:t=>rs.create({...t,coerce:!0}),date:t=>Js.create({...t,coerce:!0})},YB=oe;var Ri=Object.freeze({__proto__:null,defaultErrorMap:Ra,setErrorMap:Y$,getErrorMap:If,makeIssue:Sf,EMPTY_PATH:Z$,addIssueToContext:H,ParseStatus:Kt,INVALID:oe,DIRTY:Bo,OK:rn,isAborted:K_,isDirty:G_,isValid:Gu,isAsync:Qu,get util(){return Ie},get objectUtil(){return q_},ZodParsedType:q,getParsedType:xi,ZodType:pe,datetimeRegex:qP,ZodString:Qn,ZodNumber:ns,ZodBigInt:rs,ZodBoolean:Yu,ZodDate:Js,ZodSymbol:xf,ZodUndefined:Zu,ZodNull:Xu,ZodAny:ka,ZodUnknown:Ms,ZodNever:ri,ZodVoid:Rf,ZodArray:er,ZodObject:Ke,ZodUnion:Ju,ZodDiscriminatedUnion:Op,ZodIntersection:ec,ZodTuple:Sr,ZodRecord:tc,ZodMap:kf,ZodSet:eo,ZodFunction:na,ZodLazy:nc,ZodLiteral:rc,ZodEnum:is,ZodNativeEnum:ic,ZodPromise:Aa,ZodEffects:rr,ZodTransformer:rr,ZodOptional:vr,ZodNullable:ss,ZodDefault:sc,ZodCatch:oc,ZodNaN:Af,BRAND:fB,ZodBranded:D0,ZodPipeline:jc,ZodReadonly:ac,custom:GP,Schema:pe,ZodSchema:pe,late:pB,get ZodFirstPartyTypeKind(){return re},coerce:QB,any:TB,array:xB,bigint:_B,boolean:ZP,date:yB,discriminatedUnion:PB,effect:xI,enum:jB,function:LB,instanceof:mB,intersection:bB,lazy:VB,literal:FB,map:DB,nan:gB,nativeEnum:UB,never:SB,null:EB,nullable:zB,number:YP,object:RB,oboolean:GB,onumber:KB,optional:BB,ostring:qB,pipeline:HB,preprocess:WB,promise:$B,record:OB,set:MB,strictObject:kB,string:QP,symbol:vB,transformer:xI,tuple:NB,undefined:wB,union:AB,unknown:IB,void:CB,NEVER:YB,ZodIssueCode:$,quotelessJson:Q$,ZodError:Tn});function XP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=XP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ni(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=XP(t))&&(r&&(r+=" "),r+=e);return r}const lc=t=>typeof t=="number"&&!isNaN(t),Ls=t=>typeof t=="string",wn=t=>typeof t=="function",fd=t=>Ls(t)||wn(t)?t:null,Y_=t=>V.isValidElement(t)||Ls(t)||wn(t)||lc(t);function ZB(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Dp(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:h,nodeRef:d,isIn:p,playToast:g}=o;const y=r?`${e}--${l}`:e,S=r?`${n}--${l}`:n,R=V.useRef(0);return V.useLayoutEffect(()=>{const v=d.current,w=y.split(" "),E=P=>{P.target===d.current&&(g(),v.removeEventListener("animationend",E),v.removeEventListener("animationcancel",E),R.current===0&&P.type!=="animationcancel"&&v.classList.remove(...w))};v.classList.add(...w),v.addEventListener("animationend",E),v.addEventListener("animationcancel",E)},[]),V.useEffect(()=>{const v=d.current,w=()=>{v.removeEventListener("animationend",w),i?ZB(v,h,s):h()};p||(c?w():(R.current=1,v.className+=` ${S}`,v.addEventListener("animationend",w)))},[p]),X.createElement(X.Fragment,null,a)}}function RI(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Jt=new Map;let uc=[];const Z_=new Set,XB=t=>Z_.forEach(e=>e(t)),JP=()=>Jt.size>0;function eb(t,e){var n;if(e)return!((n=Jt.get(e))==null||!n.isToastActive(t));let r=!1;return Jt.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function tb(t,e){Y_(t)&&(JP()||uc.push({content:t,options:e}),Jt.forEach(n=>{n.buildToast(t,e)}))}function kI(t,e){Jt.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function JB(t){const{subscribe:e,getSnapshot:n,setProps:r}=V.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(h,d,p){let g=1,y=0,S=[],R=[],v=[],w=d;const E=new Map,P=new Set,O=()=>{v=Array.from(E.values()),P.forEach(_=>_())},M=_=>{R=_==null?[]:R.filter(C=>C!==_),O()},T=_=>{const{toastId:C,onOpen:k,updateId:b,children:N}=_.props,A=b==null;_.staleId&&E.delete(_.staleId),E.set(C,_),R=[...R,_.props.toastId].filter(Se=>Se!==_.staleId),O(),p(RI(_,A?"added":"updated")),A&&wn(k)&&k(V.isValidElement(N)&&N.props)};return{id:h,props:w,observe:_=>(P.add(_),()=>P.delete(_)),toggle:(_,C)=>{E.forEach(k=>{C!=null&&C!==k.props.toastId||wn(k.toggle)&&k.toggle(_)})},removeToast:M,toasts:E,clearQueue:()=>{y-=S.length,S=[]},buildToast:(_,C)=>{if((te=>{let{containerId:me,toastId:Fe,updateId:je}=te;const qe=me?me!==h:h!==1,st=E.has(Fe)&&je==null;return qe||st})(C))return;const{toastId:k,updateId:b,data:N,staleId:A,delay:Se}=C,ct=()=>{M(k)},Qt=b==null;Qt&&y++;const Me={...w,style:w.toastStyle,key:g++,...Object.fromEntries(Object.entries(C).filter(te=>{let[me,Fe]=te;return Fe!=null})),toastId:k,updateId:b,data:N,closeToast:ct,isIn:!1,className:fd(C.className||w.toastClassName),bodyClassName:fd(C.bodyClassName||w.bodyClassName),progressClassName:fd(C.progressClassName||w.progressClassName),autoClose:!C.isLoading&&(z=C.autoClose,G=w.autoClose,z===!1||lc(z)&&z>0?z:G),deleteToast(){const te=E.get(k),{onClose:me,children:Fe}=te.props;wn(me)&&me(V.isValidElement(Fe)&&Fe.props),p(RI(te,"removed")),E.delete(k),y--,y<0&&(y=0),S.length>0?T(S.shift()):O()}};var z,G;Me.closeButton=w.closeButton,C.closeButton===!1||Y_(C.closeButton)?Me.closeButton=C.closeButton:C.closeButton===!0&&(Me.closeButton=!Y_(w.closeButton)||w.closeButton);let Z=_;V.isValidElement(_)&&!Ls(_.type)?Z=V.cloneElement(_,{closeToast:ct,toastProps:Me,data:N}):wn(_)&&(Z=_({closeToast:ct,toastProps:Me,data:N}));const de={content:Z,props:Me,staleId:A};w.limit&&w.limit>0&&y>w.limit&&Qt?S.push(de):lc(Se)?setTimeout(()=>{T(de)},Se):T(de)},setProps(_){w=_},setToggle:(_,C)=>{E.get(_).toggle=C},isToastActive:_=>R.some(C=>C===_),getSnapshot:()=>w.newestOnTop?v.reverse():v}}(o,s,XB);Jt.set(o,l);const c=l.observe(a);return uc.forEach(h=>tb(h.content,h.options)),uc=[],()=>{c(),Jt.delete(o)}},setProps(a){var l;(l=Jt.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Jt.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=V.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:eb,count:i==null?void 0:i.length}}function ez(t){const[e,n]=V.useState(!1),[r,i]=V.useState(!1),s=V.useRef(null),o=V.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:h,closeOnClick:d}=t;var p,g;function y(){n(!0)}function S(){n(!1)}function R(E){const P=s.current;o.canDrag&&P&&(o.didMove=!0,e&&S(),o.delta=t.draggableDirection==="x"?E.clientX-o.start:E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1),P.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,P.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function v(){document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",v);const E=s.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}(g=Jt.get((p={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||g.setToggle(p.id,p.fn),V.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||S(),window.addEventListener("focus",y),window.addEventListener("blur",S),()=>{window.removeEventListener("focus",y),window.removeEventListener("blur",S)}},[t.pauseOnFocusLoss]);const w={onPointerDown:function(E){if(t.draggable===!0||t.draggable===E.pointerType){o.didMove=!1,document.addEventListener("pointermove",R),document.addEventListener("pointerup",v);const P=s.current;o.canCloseOnClick=!0,o.canDrag=!0,P.style.transition="none",t.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=P.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(E){const{top:P,bottom:O,left:M,right:T}=s.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&t.pauseOnHover&&E.clientX>=M&&E.clientX<=T&&E.clientY>=P&&E.clientY<=O?S():y()}};return a&&l&&(w.onMouseEnter=S,t.stacked||(w.onMouseLeave=y)),d&&(w.onClick=E=>{h&&h(E),o.canCloseOnClick&&c()}),{playToast:y,pauseToast:S,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:w}}function tz(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:h,isIn:d,theme:p}=t;const g=s||l&&c===0,y={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(y.transform=`scaleX(${c})`);const S=Ni("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":h}),R=wn(o)?o({rtl:h,type:i,defaultClassName:S}):Ni(S,o),v={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return X.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":g},X.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${p} Toastify__progress-bar--${i}`}),X.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:R,style:y,...v}))}let nz=1;const nb=()=>""+nz++;function rz(t){return t&&(Ls(t.toastId)||lc(t.toastId))?t.toastId:nb()}function nu(t,e){return tb(t,e),e.toastId}function Pf(t,e){return{...e,type:e&&e.type||t,toastId:rz(e)}}function Oh(t){return(e,n)=>nu(e,Pf(t,n))}function Ce(t,e){return nu(t,Pf("default",e))}Ce.loading=(t,e)=>nu(t,Pf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Ce.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Ls(i)?Ce.loading(i,n):Ce.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(h,d,p)=>{if(d==null)return void Ce.dismiss(r);const g={type:h,...a,...n,data:p},y=Ls(d)?{render:d}:d;return r?Ce.update(r,{...g,...y}):Ce(y.render,{...g,...y}),p},c=wn(t)?t():t;return c.then(h=>l("success",o,h)).catch(h=>l("error",s,h)),c},Ce.success=Oh("success"),Ce.info=Oh("info"),Ce.error=Oh("error"),Ce.warning=Oh("warning"),Ce.warn=Ce.warning,Ce.dark=(t,e)=>nu(t,Pf("default",{theme:"dark",...e})),Ce.dismiss=function(t){(function(e){var n;if(JP()){if(e==null||Ls(n=e)||lc(n))Jt.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=Jt.get(e.containerId);r?r.removeToast(e.id):Jt.forEach(i=>{i.removeToast(e.id)})}}else uc=uc.filter(r=>e!=null&&r.options.toastId!==e)})(t)},Ce.clearWaitingQueue=function(t){t===void 0&&(t={}),Jt.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},Ce.isActive=eb,Ce.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=Jt.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:nb()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,nu(o,s)}},Ce.done=t=>{Ce.update(t,{progress:1})},Ce.onChange=function(t){return Z_.add(t),()=>{Z_.delete(t)}},Ce.play=t=>kI(!0,t),Ce.pause=t=>kI(!1,t);const iz=typeof window<"u"?V.useLayoutEffect:V.useEffect,Dh=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return X.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},ig={info:function(t){return X.createElement(Dh,{...t},X.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return X.createElement(Dh,{...t},X.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return X.createElement(Dh,{...t},X.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return X.createElement(Dh,{...t},X.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return X.createElement("div",{className:"Toastify__spinner"})}},sz=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=ez(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:h,hideProgressBar:d,closeToast:p,transition:g,position:y,className:S,style:R,bodyClassName:v,bodyStyle:w,progressClassName:E,progressStyle:P,updateId:O,role:M,progress:T,rtl:_,toastId:C,deleteToast:k,isIn:b,isLoading:N,closeOnClick:A,theme:Se}=t,ct=Ni("Toastify__toast",`Toastify__toast-theme--${Se}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":_},{"Toastify__toast--close-on-click":A}),Qt=wn(S)?S({rtl:_,position:y,type:h,defaultClassName:ct}):Ni(ct,S),Me=function(de){let{theme:te,type:me,isLoading:Fe,icon:je}=de,qe=null;const st={theme:te,type:me};return je===!1||(wn(je)?qe=je({...st,isLoading:Fe}):V.isValidElement(je)?qe=V.cloneElement(je,st):Fe?qe=ig.spinner():(xr=>xr in ig)(me)&&(qe=ig[me](st))),qe}(t),z=!!T||!l,G={closeToast:p,type:h,theme:Se};let Z=null;return o===!1||(Z=wn(o)?o(G):V.isValidElement(o)?V.cloneElement(o,G):function(de){let{closeToast:te,theme:me,ariaLabel:Fe="close"}=de;return X.createElement("button",{className:`Toastify__close-button Toastify__close-button--${me}`,type:"button",onClick:je=>{je.stopPropagation(),te(je)},"aria-label":Fe},X.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},X.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(G)),X.createElement(g,{isIn:b,done:k,position:y,preventExitTransition:n,nodeRef:r,playToast:s},X.createElement("div",{id:C,onClick:c,"data-in":b,className:Qt,...i,style:R,ref:r},X.createElement("div",{...b&&{role:M},className:wn(v)?v({type:h}):Ni("Toastify__toast-body",v),style:w},Me!=null&&X.createElement("div",{className:Ni("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},Me),X.createElement("div",null,a)),Z,X.createElement(tz,{...O&&!z?{key:`pb-${O}`}:{},rtl:_,theme:Se,delay:l,isRunning:e,isIn:b,closeToast:p,hide:d,type:h,style:P,className:E,controlledProgress:z,progress:T||0})))},Mp=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},oz=Dp(Mp("bounce",!0));Dp(Mp("slide",!0));Dp(Mp("zoom"));Dp(Mp("flip"));const az={position:"top-right",transition:oz,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function rb(t){let e={...az,...t};const n=t.stacked,[r,i]=V.useState(!0),s=V.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=JB(e),{className:c,style:h,rtl:d,containerId:p}=e;function g(S){const R=Ni("Toastify__toast-container",`Toastify__toast-container--${S}`,{"Toastify__toast-container--rtl":d});return wn(c)?c({position:S,rtl:d,defaultClassName:R}):Ni(R,fd(c))}function y(){n&&(i(!0),Ce.play())}return iz(()=>{if(n){var S;const R=s.current.querySelectorAll('[data-in="true"]'),v=12,w=(S=e.position)==null?void 0:S.includes("top");let E=0,P=0;Array.from(R).reverse().forEach((O,M)=>{const T=O;T.classList.add("Toastify__toast--stacked"),M>0&&(T.dataset.collapsed=`${r}`),T.dataset.pos||(T.dataset.pos=w?"top":"bot");const _=E*(r?.2:1)+(r?0:v*M);T.style.setProperty("--y",`${w?_:-1*_}px`),T.style.setProperty("--g",`${v}`),T.style.setProperty("--s",""+(1-(r?P:0))),E+=T.offsetHeight,P+=.025})}},[r,l,n]),X.createElement("div",{ref:s,className:"Toastify",id:p,onMouseEnter:()=>{n&&(i(!1),Ce.pause())},onMouseLeave:y},o((S,R)=>{const v=R.length?{...h}:{...h,pointerEvents:"none"};return X.createElement("div",{className:g(S),style:v,key:`container-${S}`},R.map(w=>{let{content:E,props:P}=w;return X.createElement(sz,{...P,stacked:n,collapseAll:y,isIn:a(P.toastId,P.containerId),style:P.style,key:`toast-${P.key}`},E)}))}))}const lz=Ri.object({email:Ri.string().email("Email must be a valid email address!"),password:Ri.string().min(6,"Password must be at least of length 6")}),uz=t=>new Promise(e=>setTimeout(e,t));function cz(){const{login:t,loadingUser:e,user:n}=uo(),{setLoading:r}=nv(),i=Ha(),[s,o]=V.useState({});V.useEffect(()=>{n&&i("/")},[n]);const a=async l=>{l.preventDefault();const c=Object.fromEntries(new FormData(l.target).entries()),h=lz.safeParse(c);if(h.success){const{data:d}=h;r(!0);try{const p=await t(d);Ce(`    , ${p.name} `),await uz(1500),i("/menu")}catch(p){if(p.message.includes("auth/invalid-credential")){Ce("  ");return}if(p.message.includes("auth/user-not-found")){Ce("  ");return}if(p.message.includes("auth/wrong-password")){Ce(" ");return}if(p.message.includes("auth/too-many-requests")){Ce("   ");return}Ce(p.message)}r(!1)}else{const{errors:d}=h.error,p=d.reduce((g,y)=>(g[y.path[0]]=y.message,g),{});o({...s,...p})}};return x.jsx("div",{className:"p-2 grid place-items-center",children:x.jsxs("div",{className:"flex flex-col items-center w-fit mx-auto my-4 text-white",dir:"rtl",style:{background:ce.dark},children:[x.jsxs("form",{onSubmit:a,className:"flex flex-col gap-4 p-4  m-4 rounded-md min-w-[300px] max-w-[90%]",children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{htmlFor:"email",className:"text-[13px] font-bold p-[2px]",children:" "}),x.jsx("input",{required:!0,id:"email",className:"text-black border-2 p-2 outline-none rounded-full",type:"email",name:"email",placeholder:" "}),x.jsx("div",{className:"text-[12px] text-[#bd3333]",children:s.email})]}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{htmlFor:"password",className:"text-[13px] font-bold p-[2px]",children:""}),x.jsx("input",{required:!0,id:"password",className:"text-black border-2 p-2 outline-none rounded-full",type:"password",name:"password",placeholder:" "}),x.jsx("div",{className:"text-[12px] text-[#bd3333]",children:s.password})]}),x.jsx("div",{className:"grid",children:x.jsx("button",{className:"border-[green] bg-[#458645] text-white p-2",children:""})}),e&&x.jsx(Ex,{}),x.jsxs("div",{className:"text-[14px] text-[gray]",style:{gridColumn:"span 2",textAlign:"center",color:ce.light},children:["  ?"," ",x.jsx(_P,{to:"/auth/register",className:"font-bold",children:"  "})]})]}),x.jsx(rb,{})]})})}const hz=Ri.object({name:Ri.string(),email:Ri.string().email("Email must be a valid email address!"),password:Ri.string(),repassword:Ri.string()}),dz=t=>new Promise(e=>setTimeout(e,t));function fz(){const{register:t,loadingUser:e}=uo(),{setLoading:n}=nv(),[r,i]=V.useState({}),s=Ha(),o=async a=>{a.preventDefault();const l=Object.fromEntries(new FormData(a.target).entries()),c=hz.safeParse(l);if(c.success){const{data:h}=c;if(h.password!==h.repassword)return alert("Passwords do not match!");n(!0);try{await t(l),await uR(So),Ce(" ,    "),await dz(1500),s("/auth/login")}catch(d){Ce(d.message)}n(!1)}else{const{errors:h}=c.error,d=h.reduce((p,g)=>(p[g.path[0]]=g.message,p),{});i({...r,...d})}};return x.jsx("div",{className:"p-2 grid place-items-center",children:x.jsxs("div",{className:"flex flex-col items-center text-white relative",dir:"rtl",children:[x.jsxs("form",{onSubmit:o,style:{background:ce.dark},className:"grid grid-rows-2 grid-cols-2 gap-4 p-4  m-4 rounded-md min-w-[300px] max-w-[90%]",children:[x.jsxs("div",{className:"flex flex-col gap-4",children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{htmlFor:"name",className:"text-[13px] font-bold p-[2px]",children:" "}),x.jsx("input",{id:"name",required:!0,className:"border-2 p-2 outline-none rounded-full text-black",type:"text",name:"name",placeholder:"  "}),x.jsx("div",{className:"text-[12px] text-[#bd3333]",children:r.name})]}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{htmlFor:"email",className:"text-[13px] font-bold p-[2px]",children:" "}),x.jsx("input",{id:"email",required:!0,className:"border-2 p-2 outline-none rounded-full text-black",type:"email",name:"email",placeholder:" "}),x.jsx("div",{className:"text-[12px] text-[#bd3333] text-center",children:r.email})]})]}),x.jsxs("div",{className:"flex flex-col gap-4",children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{htmlFor:"password",className:"text-[13px] font-bold p-[2px]",children:""}),x.jsx("input",{id:"password",required:!0,className:"border-2 p-2 outline-none rounded-full text-black",type:"password",name:"password",placeholder:" "}),x.jsx("div",{className:"text-[12px] text-[#bd3333] text-center",children:r.password})]}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{htmlFor:"re-password",className:"text-[13px] font-bold p-[2px]",children:" "}),x.jsx("input",{id:"re-password",required:!0,className:"border-2 p-2 outline-none rounded-full text-black",type:"password",name:"repassword",placeholder:"  "}),x.jsx("div",{className:"text-[12px] text-[#bd3333] text-center",children:r.repassword})]})]}),x.jsxs("div",{className:"flex flex-col col-span-2 h-[fit-content]",children:[x.jsx("button",{className:"border-[green] bg-[#458645] text-white p-2",children:""}),x.jsx("span",{className:"text-center text-[12px] mt-[20px] max-w-[400px]",children:"         "})]}),e&&x.jsx("div",{className:"w-fit flex items-center justify-center mx-auto absolute bottom-16 left-[calc(50%)] translate-x-[-20px]",children:x.jsx(Ex,{})}),x.jsxs("div",{className:"text-[14px] text-[gray]",style:{gridColumn:"span 2",textAlign:"center",color:ce.light},children:["  ?"," ",x.jsx(_P,{to:"/auth/login",className:"font-bold",children:" "})]})]}),x.jsx(rb,{})]})})}var St=[];for(var sg=0;sg<256;++sg)St.push((sg+256).toString(16).slice(1));function pz(t,e=0){return(St[t[e+0]]+St[t[e+1]]+St[t[e+2]]+St[t[e+3]]+"-"+St[t[e+4]]+St[t[e+5]]+"-"+St[t[e+6]]+St[t[e+7]]+"-"+St[t[e+8]]+St[t[e+9]]+"-"+St[t[e+10]]+St[t[e+11]]+St[t[e+12]]+St[t[e+13]]+St[t[e+14]]+St[t[e+15]]).toLowerCase()}var Mh,mz=new Uint8Array(16);function gz(){if(!Mh&&(Mh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Mh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mh(mz)}var _z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const AI={randomUUID:_z};function cc(t,e,n){if(AI.randomUUID&&!e&&!t)return AI.randomUUID();t=t||{};var r=t.random||(t.rng||gz)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pz(r)}function yz({categories:t}){const e=V.useMemo(()=>t.map(c=>c.type),[t]),{setSelectedCategory:n,selectedCategory:r}=li(),[i,s]=V.useState(e[0]);V.useEffect(()=>{r&&s(r.type)},[r]);const o=V.useRef(null),a=(c,h)=>{var d,p;s(c),n(t[h]),h!==2&&(h>2?(d=o.current)==null||d.scrollTo(300,0):(p=o.current)==null||p.scrollTo(0,0))},l=V.useCallback(function(c){return c[0].toUpperCase()+c.slice(1)},[]);return x.jsx(B$,{ref:o,children:X.Children.toArray(e.map((c,h)=>i===c?x.jsx(H$,{onClick:()=>a(c,h),children:l(c)},cc()):x.jsx("p",{onClick:()=>a(c,h),style:{},children:l(c)})))})}function vz(){const{selectedCategory:t}=li(),{setOpen:e}=vx();return t?x.jsx(q$,{children:X.Children.toArray(t.items.map(n=>x.jsxs("div",{className:"item-card",onClick:()=>e(n),children:[n.name," - ",n.price,x.jsx("span",{className:"self-end text-[12px]",children:n.category})]})))}):null}const wz=typeof window<"u",Lp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ez="framerAppearId",Tz="data-"+Lp(Ez),Iz={skipAnimations:!1,useManualTiming:!1};function Sz(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,h=!1,d=!1)=>{const g=d&&r?e:n;return h&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(c))}};return l}const Lh=["read","resolveKeyframes","update","preRender","render","postRender"],Cz=40;function xz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Lh.reduce((v,w)=>(v[w]=Sz(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:p}=o,g=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,Cz),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),d.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:Lh.reduce((v,w)=>{const E=o[w];return v[w]=(P,O=!1,M=!1)=>(n||y(),E.schedule(P,O,M)),v},{}),cancel:v=>{for(let w=0;w<Lh.length;w++)o[Lh[w]].cancel(v)},state:i,steps:o}}function ib(t){return typeof t=="string"||Array.isArray(t)}function Rz(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const kz=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],M0=["initial",...kz];function sb(t){return Rz(t.animate)||M0.some(e=>ib(t[e]))}function Az(t){return!!(sb(t)||t.variants)}const PI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},X_={};for(const t in PI)X_[t]={isEnabled:e=>PI[t].some(n=>!!e[n])};const to=t=>t;let bf=to;const Pz={},Uc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hs=new Set(Uc);function bz(t,{layout:e,layoutId:n}){return hs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Pz[t]||t==="opacity")}const tn=t=>!!(t&&t.getVelocity),ob=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Pa=(t,e,n)=>n>e?e:n<t?t:n,Ka={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ru={...Ka,transform:t=>Pa(0,1,t)},Vh={...Ka,default:1},iu=t=>Math.round(t*1e5)/1e5,L0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,Nz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Oz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function $c(t){return typeof t=="string"}function Dz(t){return t==null}const Bc=t=>({test:e=>$c(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_i=Bc("deg"),ra=Bc("%"),ie=Bc("px"),Mz=Bc("vh"),Lz=Bc("vw"),bI={...ra,parse:t=>ra.parse(t)/100,transform:t=>ra.transform(t*100)},NI={...Ka,transform:Math.round},V0={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,size:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,rotate:_i,rotateX:_i,rotateY:_i,rotateZ:_i,scale:Vh,scaleX:Vh,scaleY:Vh,scaleZ:Vh,skew:_i,skewX:_i,skewY:_i,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:ru,originX:bI,originY:bI,originZ:ie,zIndex:NI,backgroundPositionX:ie,backgroundPositionY:ie,fillOpacity:ru,strokeOpacity:ru,numOctaves:NI},Vz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fz=Uc.length;function jz(t,e,n){let r="",i=!0;for(let s=0;s<Fz;s++){const o=Uc[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=ob(a,V0[o]);if(!l){i=!1;const h=Vz[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}const ab=t=>e=>typeof e=="string"&&e.startsWith(t),lb=ab("--"),Uz=ab("var(--"),F0=t=>Uz(t)?$z.test(t.split("/*")[0].trim()):!1,$z=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ub(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(hs.has(l)){o=!0;continue}else if(lb(l)){i[l]=c;continue}else{const h=ob(c,V0[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=jz(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}function OI(t,e,n){return typeof t=="string"?t:ie.transform(e+n*t)}function Bz(t,e,n){const r=OI(e,t.x,t.width),i=OI(n,t.y,t.height);return`${r} ${i}`}const zz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wz={offset:"strokeDashoffset",array:"strokeDasharray"};function Hz(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?zz:Wz;t[s.offset]=ie.transform(-r);const o=ie.transform(e),a=ie.transform(n);t[s.array]=`${o} ${a}`}function qz(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,d){if(ub(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g,dimensions:y}=t;p.transform&&(y&&(g.transform=p.transform),delete p.transform),y&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=Bz(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&Hz(p,o,a,l,!1)}const Kz=t=>typeof t=="string"&&t.toLowerCase()==="svg";function cb(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const hb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Gz(t,e,n,r){cb(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(hb.has(i)?i:Lp(i),e.attrs[i])}function db(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(tn(i[o])||e.style&&tn(e.style[o])||bz(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),s}function Qz(t,e,n){const r=db(t,e,n);for(const i in t)if(tn(t[i])||tn(e[i])){const s=Uc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function DI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function fb(t,e,n,r){if(typeof e=="function"){const[i,s]=DI(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=DI(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function MI(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Yz=t=>Array.isArray(t),Zz=t=>Yz(t)?t[t.length-1]||0:t,pb=new Set(["opacity","clipPath","filter","transform"]);function Xz(t){if(hs.has(t))return"transform";if(pb.has(t))return Lp(t)}function Jz(t,e){t.indexOf(e)===-1&&t.push(e)}function j0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const{schedule:Cr,cancel:Nf,state:Of,steps:lH}=xz(typeof requestAnimationFrame<"u"?requestAnimationFrame:to,!0),e8=(t,e)=>n=>e(t(n)),U0=(...t)=>t.reduce(e8);function t8(t,e,n){const r=t.getProps();return fb(r,e,r.custom,t)}const qr=t=>t*1e3,Kr=t=>t/1e3,n8={type:"spring",stiffness:500,damping:25,restSpeed:10},r8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),i8={type:"keyframes",duration:.8},s8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},o8=(t,{keyframes:e})=>e.length>2?i8:hs.has(t)?t.startsWith("scale")?r8(e[1]):n8:s8;function a8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function mb(t,e){return t[e]||t.default||t}const l8=t=>t!==null;function Vp(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(l8),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const gb=t=>/^0[^.\s]+$/u.test(t);function u8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gb(t):!0}const _b=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),c8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h8(t){const e=c8.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function yb(t,e,n=1){const[r,i]=h8(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return _b(o)?parseFloat(o):o}return F0(i)?yb(i,e,n+1):i}const d8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),LI=t=>t===Ka||t===ie,VI=(t,e)=>parseFloat(t.split(", ")[e]),FI=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return VI(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?VI(s[1],t):0}},f8=new Set(["x","y","z"]),p8=Uc.filter(t=>!f8.has(t));function m8(t){const e=[];return p8.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ba={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:FI(4,13),y:FI(5,14)};ba.translateX=ba.x;ba.translateY=ba.y;const vb=t=>e=>e.test(t),g8={test:t=>t==="auto",parse:t=>t},wb=[Ka,ie,ra,_i,Lz,Mz,g8],jI=t=>wb.find(vb(t)),Vs=new Set;let J_=!1,ey=!1;function Eb(){if(ey){const t=Array.from(Vs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=m8(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ey=!1,J_=!1,Vs.forEach(t=>t.complete()),Vs.clear()}function Tb(){Vs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ey=!0)})}function _8(){Tb(),Eb()}class $0{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vs.add(this),J_||(J_=!0,Cr.read(Tb),Cr.resolveKeyframes(Eb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const B0=(t,e)=>n=>!!($c(n)&&Oz.test(n)&&n.startsWith(t)||e&&!Dz(n)&&Object.prototype.hasOwnProperty.call(n,e)),Ib=(t,e,n)=>r=>{if(!$c(r))return r;const[i,s,o,a]=r.match(L0);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},y8=t=>Pa(0,255,t),og={...Ka,transform:t=>Math.round(y8(t))},As={test:B0("rgb","red"),parse:Ib("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+og.transform(t)+", "+og.transform(e)+", "+og.transform(n)+", "+iu(ru.transform(r))+")"};function v8(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ty={test:B0("#"),parse:v8,transform:As.transform},zo={test:B0("hsl","hue"),parse:Ib("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ra.transform(iu(e))+", "+ra.transform(iu(n))+", "+iu(ru.transform(r))+")"},Ut={test:t=>As.test(t)||ty.test(t)||zo.test(t),parse:t=>As.test(t)?As.parse(t):zo.test(t)?zo.parse(t):ty.parse(t),transform:t=>$c(t)?t:t.hasOwnProperty("red")?As.transform(t):zo.transform(t)};function w8(t){var e,n;return isNaN(t)&&$c(t)&&(((e=t.match(L0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Nz))===null||n===void 0?void 0:n.length)||0)>0}const Sb="number",Cb="color",E8="var",T8="var(",UI="${}",I8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(I8,l=>(Ut.test(l)?(r.color.push(s),i.push(Cb),n.push(Ut.parse(l))):l.startsWith(T8)?(r.var.push(s),i.push(E8),n.push(l)):(r.number.push(s),i.push(Sb),n.push(parseFloat(l))),++s,UI)).split(UI);return{values:n,split:a,indexes:r,types:i}}function xb(t){return hc(t).values}function Rb(t){const{split:e,types:n}=hc(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Sb?s+=iu(i[o]):a===Cb?s+=Ut.transform(i[o]):s+=i[o]}return s}}const S8=t=>typeof t=="number"?0:t;function C8(t){const e=xb(t);return Rb(t)(e.map(S8))}const Ga={test:w8,parse:xb,createTransformer:Rb,getAnimatableNone:C8},x8=new Set(["brightness","contrast","saturate","opacity"]);function R8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(L0)||[];if(!r)return t;const i=n.replace(r,"");let s=x8.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const k8=/\b([a-z-]*)\(.*?\)/gu,ny={...Ga,getAnimatableNone:t=>{const e=t.match(k8);return e?e.map(R8).join(" "):t}},A8={...V0,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:ny,WebkitFilter:ny},z0=t=>A8[t];function kb(t,e){let n=z0(t);return n!==ny&&(n=Ga),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const P8=new Set(["auto","none","0"]);function b8(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!P8.has(s)&&hc(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=kb(n,i)}class Ab extends $0{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),F0(c))){const h=yb(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!d8.has(r)||e.length!==2)return;const[i,s]=e,o=jI(i),a=jI(s);if(o!==a)if(LI(o)&&LI(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)u8(e[i])&&r.push(i);r.length&&b8(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ba[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=ba[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Pb(t){let e;return()=>(e===void 0&&(e=t()),e)}let pd;function N8(){pd=void 0}const Fs={now:()=>(pd===void 0&&Fs.set(Of.isProcessing||Iz.useManualTiming?Of.timestamp:performance.now()),pd),set:t=>{pd=t,queueMicrotask(N8)}},$I=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ga.test(t)||t==="0")&&!t.startsWith("url("));function O8(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function D8(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=$I(i,e),a=$I(s,e);return!o||!a?!1:O8(t)||n==="spring"&&r}const M8=40;class bb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fs.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>M8?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&_8(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Fs.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!D8(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(Vp(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function Nb(t,e){return e?t*(1e3/e):0}const L8=5;function Ob(t,e,n){const r=Math.max(e-L8,0);return Nb(n-t(r),e-r)}const ag=.001,V8=.01,F8=10,j8=.05,U8=1;function $8({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Pa(j8,U8,o),t=Pa(V8,F8,Kr(t)),o<1?(i=c=>{const h=c*o,d=h*t,p=h-n,g=ry(c,o),y=Math.exp(-d);return ag-p/g*y},s=c=>{const d=c*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-d),S=ry(Math.pow(c,2),o);return(-i(c)+ag>0?-1:1)*((p-g)*y)/S}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-ag+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=z8(i,s,a);if(t=qr(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const B8=12;function z8(t,e,n){let r=n;for(let i=1;i<B8;i++)r=r-t(r)/e(r);return r}function ry(t,e){return t*Math.sqrt(1-e*e)}const W8=["duration","bounce"],H8=["stiffness","damping","mass"];function BI(t,e){return e.some(n=>t[n]!==void 0)}function q8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!BI(t,H8)&&BI(t,W8)){const n=$8(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function W0({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:h,velocity:d,isResolvedFromDuration:p}=q8({...r,velocity:-Kr(r.velocity||0)}),g=d||0,y=l/(2*Math.sqrt(a*c)),S=s-i,R=Kr(Math.sqrt(a/c)),v=Math.abs(S)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let w;if(y<1){const E=ry(R,y);w=P=>{const O=Math.exp(-y*R*P);return s-O*((g+y*R*S)/E*Math.sin(E*P)+S*Math.cos(E*P))}}else if(y===1)w=E=>s-Math.exp(-R*E)*(S+(g+R*S)*E);else{const E=R*Math.sqrt(y*y-1);w=P=>{const O=Math.exp(-y*R*P),M=Math.min(E*P,300);return s-O*((g+y*R*S)*Math.sinh(M)+E*S*Math.cosh(M))/E}}return{calculatedDuration:p&&h||null,next:E=>{const P=w(E);if(p)o.done=E>=h;else{let O=0;y<1&&(O=E===0?qr(g):Ob(w,E,P));const M=Math.abs(O)<=n,T=Math.abs(s-P)<=e;o.done=M&&T}return o.value=o.done?s:P,o}}}function zI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=_=>a!==void 0&&_<a||l!==void 0&&_>l,y=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let S=n*e;const R=d+S,v=o===void 0?R:o(R);v!==R&&(S=v-d);const w=_=>-S*Math.exp(-_/r),E=_=>v+w(_),P=_=>{const C=w(_),k=E(_);p.done=Math.abs(C)<=c,p.value=p.done?v:k};let O,M;const T=_=>{g(p.value)&&(O=_,M=W0({keyframes:[p.value,y(p.value)],velocity:Ob(E,_,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return T(0),{calculatedDuration:null,next:_=>{let C=!1;return!M&&O===void 0&&(C=!0,P(_),T(_)),O!==void 0&&_>=O?M.next(_-O):(!C&&P(_),p)}}}const Db=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,K8=1e-7,G8=12;function Q8(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Db(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>K8&&++a<G8);return o}function zc(t,e,n,r){if(t===e&&n===r)return to;const i=s=>Q8(s,0,1,t,n);return s=>s===0||s===1?s:Db(i(s),e,r)}const Y8=zc(.42,0,1,1),Z8=zc(0,0,.58,1),Mb=zc(.42,0,.58,1),Lb=t=>Array.isArray(t)&&typeof t[0]!="number",Vb=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Fb=t=>e=>1-t(1-e),H0=t=>1-Math.sin(Math.acos(t)),X8=Fb(H0),J8=Vb(H0),jb=zc(.33,1.53,.69,.99),q0=Fb(jb),e7=Vb(q0),t7=t=>(t*=2)<1?.5*q0(t):.5*(2-Math.pow(2,-10*(t-1))),WI={linear:to,easeIn:Y8,easeInOut:Mb,easeOut:Z8,circIn:H0,circInOut:J8,circOut:X8,backIn:q0,backInOut:e7,backOut:jb,anticipate:t7},HI=t=>{if(Array.isArray(t)){bf(t.length===4);const[e,n,r,i]=t;return zc(e,n,r,i)}else if(typeof t=="string")return bf(WI[t]!==void 0),WI[t];return t},K0=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Wc=(t,e,n)=>t+(e-t)*n;function lg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n7({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=lg(l,a,t+1/3),s=lg(l,a,t),o=lg(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Df(t,e){return n=>n>0?e:t}const ug=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},r7=[ty,As,zo],i7=t=>r7.find(e=>e.test(t));function qI(t){const e=i7(t);if(!e)return!1;let n=e.parse(t);return e===zo&&(n=n7(n)),n}const KI=(t,e)=>{const n=qI(t),r=qI(e);if(!n||!r)return Df(t,e);const i={...n};return s=>(i.red=ug(n.red,r.red,s),i.green=ug(n.green,r.green,s),i.blue=ug(n.blue,r.blue,s),i.alpha=Wc(n.alpha,r.alpha,s),As.transform(i))},iy=new Set(["none","hidden"]);function s7(t,e){return iy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function o7(t,e){return n=>Wc(t,e,n)}function G0(t){return typeof t=="number"?o7:typeof t=="string"?F0(t)?Df:Ut.test(t)?KI:u7:Array.isArray(t)?Ub:typeof t=="object"?Ut.test(t)?KI:a7:Df}function Ub(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>G0(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function a7(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=G0(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function l7(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const u7=(t,e)=>{const n=Ga.createTransformer(e),r=hc(t),i=hc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?iy.has(t)&&!i.values.length||iy.has(e)&&!r.values.length?s7(t,e):U0(Ub(l7(r,i),i.values),n):Df(t,e)};function $b(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Wc(t,e,n):G0(t)(t,e)}function c7(t,e,n){const r=[],i=n||$b,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||to:e;a=U0(l,a)}r.push(a)}return r}function h7(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(bf(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=c7(e,r,i),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=K0(t[h],t[h+1],c);return o[h](d)};return n?c=>l(Pa(t[0],t[s-1],c)):l}function Bb(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=K0(0,e,r);t.push(Wc(n,1,i))}}function zb(t){const e=[0];return Bb(e,t.length-1),e}function d7(t,e){return t.map(n=>n*e)}function f7(t,e){return t.map(()=>e||Mb).splice(0,t.length-1)}function Mf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Lb(r)?r.map(HI):HI(r),s={done:!1,value:e[0]},o=d7(n&&n.length===e.length?n:zb(e),t),a=h7(o,e,{ease:Array.isArray(i)?i:f7(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const sy=2e4;function Wb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<sy;)e+=n,r=t.next(e);return e>=sy?1/0:e}const p7=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Cr.update(e,!0),stop:()=>Nf(e),now:()=>Of.isProcessing?Of.timestamp:Fs.now()}},m7={decay:zI,inertia:zI,tween:Mf,keyframes:Mf,spring:W0},g7=t=>t/100;class Q0 extends bb{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||$0,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=m7[n]||Mf;let l,c;a!==Mf&&typeof e[0]!="number"&&(l=U0(g7,$b(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=Wb(h));const{calculatedDuration:d}=h,p=d+i,g=p*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:p,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:_}=this.options;return{done:!0,value:_[_.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:g,repeatType:y,repeatDelay:S,onUpdate:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?v<0:v>h;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let E=this.currentTime,P=s;if(g){const _=Math.min(this.currentTime,h)/d;let C=Math.floor(_),k=_%1;!k&&_>=1&&(k=1),k===1&&C--,C=Math.min(C,g+1),!!(C%2)&&(y==="reverse"?(k=1-k,S&&(k-=S/d)):y==="mirror"&&(P=o)),E=Pa(0,1,k)*d}const O=w?{done:!1,value:l[0]}:P.next(E);a&&(O.value=a(O.value));let{done:M}=O;!w&&c!==null&&(M=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return T&&i!==void 0&&(O.value=Vp(l,this.options,i)),R&&R(O.value),T&&this.finish(),O}get duration(){const{resolved:e}=this;return e?Kr(e.calculatedDuration):0}get time(){return Kr(this.currentTime)}set time(e){e=qr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Kr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=p7,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Hb=t=>Array.isArray(t)&&typeof t[0]=="number";function qb(t){return!!(!t||typeof t=="string"&&t in Y0||Hb(t)||Array.isArray(t)&&t.every(qb))}const Ml=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Y0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ml([0,.65,.55,1]),circOut:Ml([.55,0,1,.45]),backIn:Ml([.31,.01,.66,-.59]),backOut:Ml([.33,1.53,.69,.99])};function _7(t){return Kb(t)||Y0.easeOut}function Kb(t){if(t)return Hb(t)?Ml(t):Array.isArray(t)?t.map(_7):Y0[t]}function y7(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=Kb(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const v7=Pb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Lf=10,w7=2e4;function E7(t){return t.type==="spring"||!qb(t.ease)}function T7(t,e){const n=new Q0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<w7;)r=n.sample(s),i.push(r.value),s+=Lf;return{times:void 0,keyframes:i,duration:s-Lf,ease:"linear"}}class GI extends bb{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new Ab(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:c,startTime:h}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(E7(this.options)){const{onComplete:p,onUpdate:g,motionValue:y,element:S,...R}=this.options,v=T7(e,R);e=v.keyframes,e.length===1&&(e[1]=e[0]),i=v.duration,s=v.times,o=v.ease,a="keyframes"}const d=y7(l.owner.current,c,e,{...this.options,duration:i,times:s,ease:o});return d.startTime=h??this.calcStartTime(),this.pendingTimeline?(d.timeline=this.pendingTimeline,this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:p}=this.options;l.set(Vp(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Kr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Kr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=qr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return to;const{animation:r}=n;r.timeline=e,r.onfinish=null}return to}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:p,...g}=this.options,y=new Q0({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),S=qr(this.time);c.setWithVelocity(y.sample(S-Lf).value,y.sample(S).value,Lf)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return v7()&&r&&pb.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}function I7(t,e){let n;const r=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;n!==o&&t(o),n=o};return Cr.update(r,!0),()=>Nf(r)}const S7=Pb(()=>window.ScrollTimeline!==void 0);class Z0{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>{if(S7()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),I7(i=>{r.time=r.duration*i},e)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Gb=(t,e,n,r={},i,s,o)=>a=>{const l=mb(r,t)||{},c=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-qr(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{a(),l.onComplete&&l.onComplete(),o&&o()},onStop:o,name:t,motionValue:e,element:s?void 0:i};a8(l)||(d={...d,...o8(t,d)}),d.duration&&(d.duration=qr(d.duration)),d.repeatDelay&&(d.repeatDelay=qr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const g=Vp(d.keyframes,l);if(g!==void 0)return Cr.update(()=>{d.onUpdate(g),d.onComplete()}),new Z0([])}return!s&&GI.supports(d)?new GI(d):new Q0(d)};class Qb{constructor(){this.subscriptions=[]}add(e){return Jz(this.subscriptions,e),()=>j0(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const QI=30,C7=t=>!isNaN(parseFloat(t));class Yb{constructor(e,n={}){this.version="11.3.30",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Fs.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Fs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=C7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Qb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Cr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>QI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,QI);return Nb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dc(t,e){return new Yb(t,e)}function x7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,dc(n))}function R7(t,e){const n=t8(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Zz(s[o]);x7(t,o,a)}}function k7(t){return t.getProps()[Tz]}class A7 extends Yb{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(e){const n=Xz(e);if(!n)return;const r=this.counts.get(n)||0;this.counts.set(n,r+1),r===0&&(this.output.push(n),this.update());let i=!1;return()=>{if(i)return;i=!0;const s=this.counts.get(n)-1;this.counts.set(n,s),s===0&&(j0(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function P7(t){return!!(tn(t)&&t.add)}function b7(t,e){var n;if(!t.applyWillChange)return;let r=t.getValue("willChange");if(!r&&!(!((n=t.props.style)===null||n===void 0)&&n.willChange)&&(r=new A7("auto"),t.addValue("willChange",r)),P7(r))return r.add(e)}function N7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function O7(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const p=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),g=l[d];if(g===void 0||h&&N7(h,d))continue;const y={delay:n,...mb(o||{},d)};let S=!1;if(window.MotionHandoffAnimation){const v=k7(t);if(v){const w=window.MotionHandoffAnimation(v,d,Cr);w!==null&&(y.startTime=w,S=!0)}}p.start(Gb(d,p,g,t.shouldReduceMotion&&hs.has(d)?{type:!1}:y,t,S,b7(t,d)));const R=p.animation;R&&c.push(R)}return a&&Promise.all(c).then(()=>{Cr.update(()=>{a&&R7(t,a)})}),c}const YI=()=>({min:0,max:0}),Zb=()=>({x:YI(),y:YI()});function D7({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function M7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function L7(t,e){return D7(M7(t.getBoundingClientRect(),e))}function V7(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Xb(t,e,n){const r=tn(t)?t:dc(t);return r.start(Gb("",r,e,n)),r.animation}const oy={current:null},Jb={current:!1};function F7(){if(Jb.current=!0,!!wz)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>oy.current=t.matches;t.addListener(e),e()}else oy.current=!1}function j7(t,e,n){for(const r in e){const i=e[r],s=n[r];if(tn(i))t.addValue(r,i);else if(tn(s))t.addValue(r,dc(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,dc(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const fc=new WeakMap,U7=[...wb,Ut,Ga],$7=t=>U7.find(vb(t)),ZI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],B7=M0.length;class z7{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Cr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=sb(n),this.isVariantNode=Az(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const g=d[p];l[p]!==void 0&&tn(g)&&g.set(l[p],!1)}}mount(e){this.current=e,fc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Jb.current||F7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fc.delete(this.current),this.projection&&this.projection.unmount(),Nf(this.notifyUpdate),Nf(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=hs.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Cr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in X_){const n=X_[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Zb()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ZI.length;r++){const i=ZI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=j7(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<B7;r++){const i=M0[r],s=this.props[i];(ib(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=dc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(_b(i)||gb(i))?i=parseFloat(i):!$7(i)&&Ga.test(n)&&(i=kb(e,n)),this.setBaseTarget(e,tn(i)?i.get():i)),tn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=fb(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!tn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Qb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class eN extends z7{constructor(){super(...arguments),this.KeyframeResolver=Ab}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function W7(t){return window.getComputedStyle(t)}class H7 extends eN{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=cb}readValueFromInstance(e,n){if(hs.has(n)){const r=z0(n);return r&&r.default||0}else{const r=W7(e),i=(lb(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return L7(e,n)}build(e,n,r){ub(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return db(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;tn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class q7 extends eN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Zb}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hs.has(n)){const r=z0(n);return r&&r.default||0}return n=hb.has(n)?n:Lp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Qz(e,n,r)}build(e,n,r){qz(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Gz(e,n,r,i)}mount(e){this.isSVGTag=Kz(e.tagName),super.mount(e)}}function tN(t,e,n){var r;if(typeof t=="string"){let i=document;e&&(bf(!!e.current),i=e.current),n?((r=n[t])!==null&&r!==void 0||(n[t]=i.querySelectorAll(t)),t=n[t]):t=i.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}function K7(t){return V.useEffect(()=>()=>t(),[])}function G7(t){return typeof t=="object"&&!Array.isArray(t)}function Q7(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=V7(t)?new q7(e):new H7(e);n.mount(t),fc.set(t,n)}function Y7(t,e=100){const n=W0({keyframes:[0,e],...t}),r=Math.min(Wb(n),sy);return{type:"keyframes",ease:i=>n.next(r*i).value/e,duration:Kr(r)}}function XI(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}const Z7=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function X7(t,e){return Lb(t)?t[Z7(0,t.length,e)]:t}function J7(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(j0(t,i),r--)}}function eW(t,e,n,r,i,s){J7(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:Wc(i,s,r[o]),easing:X7(n,o)})}function tW(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const nW="easeInOut";function rW(t,{defaultTransition:e={},...n}={},r){const i=e.duration||.3,s=new Map,o=new Map,a={},l=new Map;let c=0,h=0,d=0;for(let p=0;p<t.length;p++){const g=t[p];if(typeof g=="string"){l.set(g,h);continue}else if(!Array.isArray(g)){l.set(g.name,XI(h,g.at,c,l));continue}let[y,S,R={}]=g;R.at!==void 0&&(h=XI(h,R.at,c,l));let v=0;const w=(E,P,O,M=0,T=0)=>{const _=iW(E),{delay:C=0,times:k=zb(_),type:b="keyframes",...N}=P;let{ease:A=e.ease||"easeOut",duration:Se}=P;const ct=typeof C=="function"?C(M,T):C,Qt=_.length;if(Qt<=2&&b==="spring"){let Z=100;if(Qt===2&&aW(_)){const me=_[1]-_[0];Z=Math.abs(me)}const de={...N};Se!==void 0&&(de.duration=qr(Se));const te=Y7(de,Z);A=te.ease,Se=te.duration}Se??(Se=i);const Me=h+ct,z=Me+Se;k.length===1&&k[0]===0&&(k[1]=1);const G=k.length-_.length;G>0&&Bb(k,G),_.length===1&&_.unshift(null),eW(O,_,A,k,Me,z),v=Math.max(ct+Se,v),d=Math.max(z,d)};if(tn(y)){const E=JI(y,o);w(S,R,eS("default",E))}else{const E=tN(y,r,a),P=E.length;for(let O=0;O<P;O++){S=S,R=R;const M=E[O],T=JI(M,o);for(const _ in S)w(S[_],sW(R,_),eS(_,T),O,P)}}c=h,h+=v}return o.forEach((p,g)=>{for(const y in p){const S=p[y];S.sort(tW);const R=[],v=[],w=[];for(let P=0;P<S.length;P++){const{at:O,value:M,easing:T}=S[P];R.push(M),v.push(K0(0,d,O)),w.push(T||"easeOut")}v[0]!==0&&(v.unshift(0),R.unshift(R[0]),w.unshift(nW)),v[v.length-1]!==1&&(v.push(1),R.push(null)),s.has(g)||s.set(g,{keyframes:{},transition:{}});const E=s.get(g);E.keyframes[y]=R,E.transition[y]={...e,duration:d,ease:w,times:v,...n}}}),s}function JI(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function eS(t,e){return e[t]||(e[t]=[]),e[t]}function iW(t){return Array.isArray(t)?t:[t]}function sW(t,e){return t[e]?{...t,...t[e]}:{...t}}const oW=t=>typeof t=="number",aW=t=>t.every(oW);function nN(t,e,n,r){const i=tN(t,r),s=i.length,o=[];for(let a=0;a<s;a++){const l=i[a];fc.has(l)||Q7(l);const c=fc.get(l),h={...n};typeof h.delay=="function"&&(h.delay=h.delay(a,s)),o.push(...O7(c,{...e,transition:h},{}))}return new Z0(o)}const lW=t=>Array.isArray(t)&&Array.isArray(t[0]);function uW(t,e,n){const r=[];return rW(t,e,n).forEach(({keyframes:s,transition:o},a)=>{let l;tn(a)?l=Xb(a,s.default,o.default):l=nN(a,s,o),r.push(l)}),new Z0(r)}const cW=t=>{function e(n,r,i){let s;return lW(n)?s=uW(n,r,t):G7(r)?s=nN(n,r,i,t):s=Xb(n,r,i),t&&t.animations.push(s),s}return e};function tS(){const t=MI(()=>({current:null,animations:[]})),e=MI(()=>cW(t));return K7(()=>{t.animations.forEach(n=>n.stop())}),[t,e]}function hW(){const{orderItems:t,totalItems:e,totalPriceToPay:n,setOrderSummary:r,orderSummary:i,updateOrderItem:s}=li(),[o,a]=tS(),[l,c]=tS();V.useEffect(()=>{(async()=>{await a(o.current,{scale:[0,1],transition:{duration:.5}})})()},[n]),V.useEffect(()=>{(async()=>{await c(l.current,{scale:[0,1],transition:{duration:.5}})})()},[e]);const{user:h}=uo(),[d,p]=X.useState(!1);return x.jsxs("div",{className:"flex flex-col w-full mx-auto p-4 min-w-[300px]",style:{background:ce.dark,color:ce.light},children:[x.jsxs("span",{className:"text-end  mb-1",children:[h==null?void 0:h.name," "]}),x.jsx("span",{className:"text-end font-bold mb-1",children:" "}),x.jsxs("div",{className:"flex flex-col justify-between",dir:"rtl",children:[x.jsxs("div",{className:"flex flex-row items-center gap-1",children:[x.jsx("div",{ref:l,children:e}),x.jsx("span",{children:"   "})]}),x.jsxs("div",{className:"flex flex-row items-center gap-1",children:[x.jsx("span",{children:"  : "}),x.jsxs("div",{ref:o,children:[n,' "']})]})]}),x.jsx("button",{className:"text-[white] mt-2 p-2",style:{background:"#5C4033",border:`1px solid ${ce.light}`},onClick:()=>p(!0),children:" "}),!i&&x.jsx("button",{className:"text-[white] mt-2 p-2",style:{background:"#5C4033",border:`1px solid ${ce.light}`},onClick:()=>{if(t.length===0){alert("   ");return}r(!0)},children:" "}),d&&x.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-[9999]",dir:"rtl",children:x.jsxs("div",{className:"p-4 rounded-lg w-[300px]",style:{background:ce.dark},children:[x.jsx("span",{className:"text-xl font-bold",children:" "}),x.jsx("div",{className:"flex flex-col max-h-[400px] overflow-y-scroll no-scrollbar cursor-all-scroll",children:t.map(g=>x.jsxs("div",{className:"flex justify-between flex-col border-[1px] border-[#3e3e3e] my-2 p-2",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:x.jsxs("b",{children:[g.item.name," ",x.jsx("span",{dir:"ltr",children:x.jsxs("span",{className:"text-[12px] font-normal",children:[g.quantity," ",x.jsx("span",{children:"x"})," "]})})]})}),x.jsxs("span",{children:[g.item.price,' "']})]}),x.jsx("div",{className:"my-2",children:Object.entries(g.selectedExtras).map(([y,S])=>x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:x.jsx("b",{children:y})}),x.jsx("span",{children:S.join(", ")})]}))}),x.jsxs("div",{className:"flex flex-row items-center justify-between text-[12px]",children:[x.jsx("button",{onClick:()=>{g.quantity-=1,s(g)},children:" "}),x.jsx("button",{onClick:()=>{g.quantity=0,s(g)},children:" "}),x.jsx("button",{onClick:()=>{g.quantity+=1,s(g)},children:" "})]})]},g.item.name+g.item.price))}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:'"'}),x.jsxs("span",{children:[n,' "']})]}),x.jsx("button",{style:{background:ce.light,color:ce.dark},className:"rounded-md px-2 mt-4 block mr-auto",onClick:()=>p(!1),children:""})]})})]})}var Fp={},rN={exports:{}},dW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fW=dW,pW=fW;function iN(){}function sN(){}sN.resetWarningCache=iN;var mW=function(){function t(r,i,s,o,a,l){if(l!==pW){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sN,resetWarningCache:iN};return n.PropTypes=n,n};rN.exports=mW();var oN=rN.exports,aN={L:1,M:0,Q:3,H:2},lN={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},gW=lN;function uN(t){this.mode=gW.MODE_8BIT_BYTE,this.data=t}uN.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var _W=uN,Fh=aN;function lr(t,e){this.totalCount=t,this.dataCount=e}lr.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];lr.getRSBlocks=function(t,e){var n=lr.getRsBlockTable(t,e);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=new Array,s=0;s<r;s++)for(var o=n[s*3+0],a=n[s*3+1],l=n[s*3+2],c=0;c<o;c++)i.push(new lr(a,l));return i};lr.getRsBlockTable=function(t,e){switch(e){case Fh.L:return lr.RS_BLOCK_TABLE[(t-1)*4+0];case Fh.M:return lr.RS_BLOCK_TABLE[(t-1)*4+1];case Fh.Q:return lr.RS_BLOCK_TABLE[(t-1)*4+2];case Fh.H:return lr.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var yW=lr;function cN(){this.buffer=new Array,this.length=0}cN.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var vW=cN,Hn={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Hn.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Hn.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var kt=0;kt<8;kt++)Hn.EXP_TABLE[kt]=1<<kt;for(var kt=8;kt<256;kt++)Hn.EXP_TABLE[kt]=Hn.EXP_TABLE[kt-4]^Hn.EXP_TABLE[kt-5]^Hn.EXP_TABLE[kt-6]^Hn.EXP_TABLE[kt-8];for(var kt=0;kt<255;kt++)Hn.LOG_TABLE[Hn.EXP_TABLE[kt]]=kt;var hN=Hn,_s=hN;function md(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}md.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=_s.gexp(_s.glog(this.get(n))+_s.glog(t.get(r)));return new md(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=_s.glog(this.get(0))-_s.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<t.getLength();r++)n[r]^=_s.gexp(_s.glog(t.get(r))+e);return new md(n,0).mod(t)}};var dN=md,kn=lN,nS=dN,wW=hN,mi={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ct={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;Ct.getBCHDigit(e)-Ct.getBCHDigit(Ct.G15)>=0;)e^=Ct.G15<<Ct.getBCHDigit(e)-Ct.getBCHDigit(Ct.G15);return(t<<10|e)^Ct.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;Ct.getBCHDigit(e)-Ct.getBCHDigit(Ct.G18)>=0;)e^=Ct.G18<<Ct.getBCHDigit(e)-Ct.getBCHDigit(Ct.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return Ct.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case mi.PATTERN000:return(e+n)%2==0;case mi.PATTERN001:return e%2==0;case mi.PATTERN010:return n%3==0;case mi.PATTERN011:return(e+n)%3==0;case mi.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case mi.PATTERN101:return e*n%2+e*n%3==0;case mi.PATTERN110:return(e*n%2+e*n%3)%2==0;case mi.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new nS([1],0),n=0;n<t;n++)e=e.multiply(new nS([1,wW.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case kn.MODE_NUMBER:return 10;case kn.MODE_ALPHA_NUM:return 9;case kn.MODE_8BIT_BYTE:return 8;case kn.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case kn.MODE_NUMBER:return 12;case kn.MODE_ALPHA_NUM:return 11;case kn.MODE_8BIT_BYTE:return 16;case kn.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case kn.MODE_NUMBER:return 14;case kn.MODE_ALPHA_NUM:return 13;case kn.MODE_8BIT_BYTE:return 16;case kn.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var s=0,o=t.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0||e<=r+a))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||a==0&&l==0||o==t.isDark(r+a,i+l)&&s++;s>5&&(n+=3+s-5)}for(var r=0;r<e-1;r++)for(var i=0;i<e-1;i++){var c=0;t.isDark(r,i)&&c++,t.isDark(r+1,i)&&c++,t.isDark(r,i+1)&&c++,t.isDark(r+1,i+1)&&c++,(c==0||c==4)&&(n+=3)}for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);for(var h=0,i=0;i<e;i++)for(var r=0;r<e;r++)t.isDark(r,i)&&h++;var d=Math.abs(100*h/e/e-50)/5;return n+=d*10,n}},EW=Ct,TW=_W,fN=yW,pN=vW,ds=EW,IW=dN;function hr(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var xn=hr.prototype;xn.addData=function(t){var e=new TW(t);this.dataList.push(e),this.dataCache=null};xn.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};xn.getModuleCount=function(){return this.moduleCount};xn.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=fN.getRSBlocks(t,this.errorCorrectLevel),n=new pN,r=0,i=0;i<e.length;i++)r+=e[i].dataCount;for(var i=0;i<this.dataList.length;i++){var s=this.dataList[i];n.put(s.mode,4),n.put(s.getLength(),ds.getLengthInBits(s.mode,t)),s.write(n)}if(n.getLengthInBits()<=r*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};xn.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=hr.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};xn.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[t+n][e+r]=!0:this.modules[t+n][e+r]=!1)};xn.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=ds.getLostPoint(this);(n==0||t>r)&&(t=r,e=n)}return e};xn.createMovieClip=function(t,e,n){var r=t.createEmptyMovieClip(e,n),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,a=0;a<this.modules[s].length;a++){var l=a*i,c=this.modules[s][a];c&&(r.beginFill(0,100),r.moveTo(l,o),r.lineTo(l+i,o),r.lineTo(l+i,o+i),r.lineTo(l,o+i),r.endFill())}return r};xn.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};xn.setupPositionAdjustPattern=function(){for(var t=ds.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(this.modules[r][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[r+s][i+o]=!0:this.modules[r+s][i+o]=!1}};xn.setupTypeNumber=function(t){for(var e=ds.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}};xn.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=ds.getBCHTypeInfo(n),i=0;i<15;i++){var s=!t&&(r>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t};xn.mapData=function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[r][o-a]==null){var l=!1;s<t.length&&(l=(t[s]>>>i&1)==1);var c=ds.getMask(e,r,o-a);c&&(l=!l),this.modules[r][o-a]=l,i--,i==-1&&(s++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}};hr.PAD0=236;hr.PAD1=17;hr.createData=function(t,e,n){for(var r=fN.getRSBlocks(t,e),i=new pN,s=0;s<n.length;s++){var o=n[s];i.put(o.mode,4),i.put(o.getLength(),ds.getLengthInBits(o.mode,t)),o.write(i)}for(var a=0,s=0;s<r.length;s++)a+=r[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(hr.PAD0,8),i.getLengthInBits()>=a*8));)i.put(hr.PAD1,8);return hr.createBytes(i,r)};hr.createBytes=function(t,e){for(var n=0,r=0,i=0,s=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a++){var l=e[a].dataCount,c=e[a].totalCount-l;r=Math.max(r,l),i=Math.max(i,c),s[a]=new Array(l);for(var h=0;h<s[a].length;h++)s[a][h]=255&t.buffer[h+n];n+=l;var d=ds.getErrorCorrectPolynomial(c),p=new IW(s[a],d.getLength()-1),g=p.mod(d);o[a]=new Array(d.getLength()-1);for(var h=0;h<o[a].length;h++){var y=h+g.getLength()-o[a].length;o[a][h]=y>=0?g.get(y):0}}for(var S=0,h=0;h<e.length;h++)S+=e[h].totalCount;for(var R=new Array(S),v=0,h=0;h<r;h++)for(var a=0;a<e.length;a++)h<s[a].length&&(R[v++]=s[a][h]);for(var h=0;h<i;h++)for(var a=0;a<e.length;a++)h<o[a].length&&(R[v++]=o[a][h]);return R};var SW=hr,X0={};Object.defineProperty(X0,"__esModule",{value:!0});var CW=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xW=oN,An=gN(xW),mN=V,jh=gN(mN);function gN(t){return t&&t.__esModule?t:{default:t}}function RW(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var kW={bgColor:An.default.oneOfType([An.default.object,An.default.string]).isRequired,bgD:An.default.string.isRequired,fgColor:An.default.oneOfType([An.default.object,An.default.string]).isRequired,fgD:An.default.string.isRequired,size:An.default.number.isRequired,title:An.default.string,viewBoxSize:An.default.number.isRequired,xmlns:An.default.string},J0=(0,mN.forwardRef)(function(t,e){var n=t.bgColor,r=t.bgD,i=t.fgD,s=t.fgColor,o=t.size,a=t.title,l=t.viewBoxSize,c=t.xmlns,h=c===void 0?"http://www.w3.org/2000/svg":c,d=RW(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return jh.default.createElement("svg",CW({},d,{height:o,ref:e,viewBox:"0 0 "+l+" "+l,width:o,xmlns:h}),a?jh.default.createElement("title",null,a):null,jh.default.createElement("path",{d:r,fill:n}),jh.default.createElement("path",{d:i,fill:s}))});J0.displayName="QRCodeSvg";J0.propTypes=kW;X0.default=J0;Object.defineProperty(Fp,"__esModule",{value:!0});Fp.QRCode=void 0;var AW=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PW=oN,br=Hc(PW),bW=aN,NW=Hc(bW),OW=SW,DW=Hc(OW),_N=V,MW=Hc(_N),LW=X0,VW=Hc(LW);function Hc(t){return t&&t.__esModule?t:{default:t}}function FW(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var jW={bgColor:br.default.oneOfType([br.default.object,br.default.string]),fgColor:br.default.oneOfType([br.default.object,br.default.string]),level:br.default.string,size:br.default.number,value:br.default.string.isRequired},jp=(0,_N.forwardRef)(function(t,e){var n=t.bgColor,r=n===void 0?"#FFFFFF":n,i=t.fgColor,s=i===void 0?"#000000":i,o=t.level,a=o===void 0?"L":o,l=t.size,c=l===void 0?256:l,h=t.value,d=FW(t,["bgColor","fgColor","level","size","value"]),p=new DW.default(-1,NW.default[a]);p.addData(h),p.make();var g=p.modules;return MW.default.createElement(VW.default,AW({},d,{bgColor:r,bgD:g.map(function(y,S){return y.map(function(R,v){return R?"":"M "+v+" "+S+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:s,fgD:g.map(function(y,S){return y.map(function(R,v){return R?"M "+v+" "+S+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:c,viewBoxSize:g.length}))});Fp.QRCode=jp;jp.displayName="QRCode";jp.propTypes=jW;var UW=Fp.default=jp;const $W=Gt.div`
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-left-color: ${ce.dark};
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }
`;function BW(){const{clearOrder:t,totalPriceToPay:e,orderItems:n,totalItems:r}=li(),{user:i}=uo(),s=g=>new Promise(y=>setTimeout(y,g)),[o,a]=V.useState("credit"),l=async g=>{g.preventDefault();const y=Object.fromEntries(new FormData(g.currentTarget).entries());y.userId=i.uid,y.items=n,y.totalToPay=e,y.totalItems=r,y.date=new Date().toISOString(),y.id=cc();let S=e;const R=Du(Wu,"orders");d3(R,y),p(!0),await s(5e3),alert(o==="credit"?"  ":"  "),p(!1),t(),h(x.jsxs("div",{children:[x.jsx("h1",{className:"text-[24px] font-bold",children:""}),x.jsxs("p",{children:["   ",y.cardHolder]}),x.jsxs("p",{children:[" : ",S,' "']}),x.jsxs("p",{className:"font-bold",children:[o==="cash"?" : ":" : "," ",y.id]}),x.jsx(UW,{className:"mx-auto my-4",value:y.id})]}))},[c,h]=V.useState(void 0),[d,p]=V.useState(!1);return d?x.jsxs("div",{style:{background:ce.light,width:"90%",marginInline:"auto",boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.1)",padding:"1rem",display:"flex",rowGap:"1rem",flexDirection:"column",alignItems:"center"},dir:"rtl",children:[x.jsx("p",{children:o==="credit"?" ..":" .."}),x.jsx($W,{})]}):c?x.jsx("div",{style:{background:ce.light,width:"90%",marginInline:"auto",boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.1)",padding:"1rem"},dir:"rtl",children:c}):x.jsxs("div",{dir:"rtl",style:{background:ce.light,boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.1)"},className:"w-[90%] mx-auto p-4",children:[x.jsx("h1",{className:"font-bold text-[32px]",style:{borderBottom:`1px solid ${ce.dark}`,marginBottom:"1rem"},children:"' "}),o==="credit"?x.jsxs("form",{className:"flex flex-col",onSubmit:l,children:[x.jsx("label",{className:"font-bold my-1",htmlFor:"cardNumber",children:"  "}),x.jsx("input",{required:!0,name:"cardHolder",type:"text",style:{outline:"1px solid lightgray"},id:"cardHolder",className:"p-2 rounded-sm mb-2",placeholder:" "}),x.jsx("label",{className:"font-bold my-1",htmlFor:"cardNumber",children:" "}),x.jsx("input",{name:"cardNumber",type:"text",required:!0,style:{outline:"1px solid lightgray"},id:"cardNumber",className:"p-2 rounded-sm mb-2",placeholder:"1234 5678 9101 1121"}),x.jsx("label",{className:"font-bold my-1",htmlFor:"expDate",children:""}),x.jsx("input",{name:"expDate",type:"text",id:"expDate",required:!0,className:"p-2 rounded-sm mb-2",style:{outline:"1px solid lightgray"},placeholder:"MM/YY"}),x.jsx("label",{className:"font-bold my-1",htmlFor:"cvv",children:"   "}),x.jsx("input",{name:"cvv",type:"text",id:"cvv",required:!0,style:{outline:"1px solid lightgray"},className:"p-2 rounded-sm",placeholder:"123"}),x.jsx("label",{className:"font-bold my-1",htmlFor:"cvv",children:" "}),x.jsx("input",{name:"phone",type:"text",required:!0,id:"phone",style:{outline:"1px solid lightgray"},className:"p-2 rounded-sm",placeholder:"050-1234567"}),x.jsx("button",{className:"mt-4",style:{background:ce.dark,padding:"0.5rem 1rem",color:ce.light},children:" "}),x.jsx("button",{className:"mt-4",onClick:()=>a("cash"),style:{background:ce.dark,padding:"0.5rem 1rem",color:ce.light},children:" "}),x.jsx("div",{className:"mx-auto mt-4",children:x.jsx("img",{src:"https://i.ibb.co/MCZ4GGq/cards.png",alt:"cards",height:50})}),x.jsx("div",{className:"text-center text-[12px]",children:x.jsx("div",{className:"flex flex-col",children:x.jsx("span",{children:"             "})})})]}):x.jsxs("form",{className:"flex flex-col",onSubmit:l,children:[x.jsx("label",{className:"font-bold my-1",htmlFor:"name",children:" "}),x.jsx("input",{name:"name",type:"text",required:!0,id:"name",style:{outline:"1px solid lightgray"},className:"p-2 rounded-sm",placeholder:" "}),x.jsx("label",{className:"font-bold my-1",htmlFor:"phone",children:" "}),x.jsx("input",{name:"phone",type:"text",required:!0,id:"phone",style:{outline:"1px solid lightgray"},className:"p-2 rounded-sm",placeholder:"050-1234567"}),x.jsx("button",{className:"mt-4",style:{background:ce.dark,padding:"0.5rem 1rem",color:ce.light},children:" "}),x.jsx("button",{onClick:()=>a("credit"),className:"mt-4",style:{background:ce.dark,padding:"0.5rem 1rem",color:ce.light},children:" "})]})]})}function zW(){const{search:t}=li();return x.jsxs("div",{className:"flex flex-row items-center mx-auto bg-white",style:{boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",background:ce.light},children:[x.jsx(W$,{placeholder:" ",name:"search",className:" placeholder:text-[#1f1f1f] placeholder:font-bold w-full",dir:"rtl",onInput:e=>{t(e.target.value)}}),x.jsx("img",{src:"https://i.ibb.co/QMGPKtW/search.png",className:"mx-4",height:30,width:20,alt:"Mag"})]})}const WW=Gt.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.5);
  .modal-content {
    background: ${ce.dark};
    padding: 1rem;
    border-radius: 8px;
    width: 80%;
    max-width: 500px;
    max-height: 700px;
    overflow-y: scroll;
    animation: fadeSlideIn 0.3s ease;
    ::-webkit-scrollbar {
      display: none;
    }
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

     button {
    background: ${ce.light};
    color: ${ce.dark};
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 4px;
    width: 90%;
    display: block;
    margin-inline: auto;
    cursor: pointer;
    margin-top: 1rem;
    margin-bottom: .25rem;

    &:hover {
      background: white;
    }
      &:active {
      background: whitesmoke;
    }
    &:nth-child(3) {
      background: #bd3333;
      margin-top: 0;
    }
    &:disabled {
      background: #ccc;
      color: #666;
      cursor: not-allowed;
    }
  }
  @keyframes fadeSlideIn {
    from {
      opacity: 0;
      transform: translateX(-50%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
`;Gt.div`
  padding: 0.5rem;
  background: #f4f4f4;
  margin: 0.25rem 0;
  border-radius: 4px;
  text-align: center;
  font-size: 1rem;
`;const HW=Gt.div`
  display: flex;
  direction: rtl;
  flex-direction: column;
  gap: 0.5rem;
`,qW=Gt.div`
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  margin-top: 1rem;
  align-items: center;
  border: 1px solid #ddd;
  padding: .5rem;
  border-radius: 4px;
  .horizontal {
    display: flex;  
    width: 100%;
    justify-content: space-around;
    align-items: center;
  }
  img {
    cursor: pointer;
    width: 1.5rem;
    height: 1.5rem;

    &:hover {
      transform: scale(1.1);
      transition: transform 0.2s;
    }
      &:active {
      transform: scale(0.9);
      transition: transform 0.2s;
}
   }
 
`,KW=Gt.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  direction: rtl;
  flex-direction: column;
  gap: 0.5rem;
`,GW=Gt.div`
  color: red;
  font-size: 0.8rem;
  display: flex;
  padding: 0.5rem;
  filter:brightness(150%);
  justify-content: flex-end;
  div {
    font-weight: bold;
    border: 1px solid red;
    transform:translateY(-3rem);
    opacity: 0.6;

    background-color: #FF000010;
    border-radius: 4px;
    padding: 0.5rem;
  }
`,QW=Gt.div`
  padding: 0.5rem;
  background: ${t=>t.isselected?"#AF6427":ce.light};
  margin: 0.25rem 0;
  border-radius: 4px;
  text-align: center;
  font-size: 1rem;
  color: ${t=>t.isselected?"white":"#333"};
  cursor: pointer;
  &:hover {
    background: ${t=>t.isselected?"#8a4a1f":"#e0e0e0"};
  }
`,YW=Gt.h2`
  margin-top: 1rem;
  font-size: 1.2rem;
  font-weight: bold;
  color: ${ce.light};
`,ZW={" ":!1,:!1,:!0,:!0," ":!1,:!1," ":!0},rS={" ":[["",""],[" "," "],["",""]]},iS={:[["  ","  "]]},ay=t=>t===" "||t===" ",XW=(t,e,n)=>{const r=[];return t?(Object.entries(t).forEach(([i,s])=>{const o=[];s.forEach(a=>{var l;o.push(x.jsx(QW,{isselected:((l=e[i])==null?void 0:l.includes(a))||!1,onClick:()=>n(i,a),children:a},cc()))}),r.push(x.jsxs("div",{children:[x.jsx(YW,{children:i}),x.jsx(KW,{children:o}),ay(i)&&x.jsxs(GW,{children:[x.jsx("hr",{}),x.jsx("div",{children:""})]}),x.jsx("hr",{style:{marginBlock:"1rem"}})]},cc()))}),X.Children.toArray(r)):r};function JW(){const{chosenItem:t,setOpen:e}=vx(),n=X.useRef(null),[r,i]=V.useState({}),{addOrderItem:s}=li(),[o,a]=V.useState(1);V.useEffect(()=>()=>{i({}),a(1)},[t]);const l=h=>!h||!Object.keys(h).some(d=>ay(d))?!0:Object.entries(h).every(([d,p])=>ay(d)?p.some(g=>{var y;return(y=r[d])==null?void 0:y.includes(g)}):!0),c=(h,d)=>{i(p=>{const g=ZW[h],y=p[h]||[];let S=y;return rS[h]&&rS[h].forEach(([R,v])=>{d===R&&y.includes(v)?S=y.filter(w=>w!==v):d===v&&y.includes(R)&&(S=y.filter(w=>w!==R))}),iS[h]&&(iS[h].forEach(([R,v])=>{(d===R||d===v)&&(!y.includes(R)||!y.includes(v))&&(S=[R,v])}),d===" "?S=[d]:d==="  "||d==="  "?S=y.filter(R=>R!==" "):S=y.filter(R=>R!==" ")),g?{...p,[h]:S.includes(d)?d===" "?S:S.filter(R=>R!==d):[...S,d]}:{...p,[h]:S.includes(d)?[]:[d]}})};return t?x.jsx(WW,{onClick:h=>{var p;const d=h.target;d.id==="modal-content"||(p=n.current)!=null&&p.contains(d)||e(void 0)},children:x.jsxs("div",{className:"modal-content",id:"modal-content",ref:n,children:[x.jsx(HW,{children:t.extras&&XW(t.extras,r,c)}),x.jsxs(qW,{children:[x.jsxs("div",{className:"horizontal",children:[x.jsx("img",{style:{filter:"invert(1) brightness(2)"},onClick:()=>a(h=>h+1),className:"plus",src:"https://i.ibb.co/cXSdVpX/plus.png",alt:"plus"}),x.jsx("div",{style:{color:ce.light},children:o}),x.jsx("img",{onClick:()=>a(h=>Math.max(1,h-1)),className:"minus",style:{filter:"invert(1) brightness(2)"},src:"https://i.ibb.co/2WKNHHB/minus.png",alt:"minus"})]}),x.jsx("button",{disabled:!l(t.extras),onClick:()=>{const h={id:cc(),item:t,quantity:o,selectedExtras:r};s(h),e(void 0),i({})},children:" "})]}),x.jsx("br",{}),x.jsx("button",{onClick:()=>{e(void 0),i({})},children:""})]})}):null}function eH(){const{categories:t,orderSummary:e,setOrderSummary:n}=li(),r=Ha(),{logout:i,user:s}=uo();return V.useEffect(()=>{s||r("/auth/login")},[s]),x.jsxs("div",{className:"md:grid md:grid-cols-2 mx-auto items-start  md:mt-[32px] justify-items-center",children:[x.jsxs("div",{children:[!e&&x.jsx(zW,{}),x.jsx(hW,{}),x.jsxs("div",{style:{background:ce.light},className:"mb-4 flex justify-center items-center flex-col",children:[x.jsx("div",{className:"cursor-pointer p-2",onClick:()=>{if(e){n(!1);return}r("/")},children:e?"  ":"  "}),x.jsx("hr",{className:"border-1 border-[lightgray] w-full"}),x.jsx("div",{className:"cursor-pointer bg-[rgba(0,0,0,0.8)] w-full h-full text-white text-center p-2",onClick:()=>{confirm("    ?")&&i()},children:""})]})]}),e?x.jsx(BW,{}):x.jsxs(z$,{children:[x.jsx(yz,{categories:t}),x.jsx(vz,{})]}),x.jsx(JW,{})]})}const tH=({onClose:t,existingItem:e})=>{const{categories:n,setCategories:r}=li(),[i,s]=X.useState(new Map);V.useEffect(()=>{if(e&&e.extras){const h=e.extras,d=Object.keys(h),p=new Map;d.forEach(g=>{p.set(g,!0)}),s(p)}},[e]);const o=h=>{s(d=>{const p=new Map(d);return p.set(h,!p.get(h)),p})},a=h=>i.get(h)||!1,l=V.useMemo(()=>{const h=new Map;return n&&Array.isArray(n)&&n.forEach(d=>{d.items&&Array.isArray(d.items)&&d.items.forEach(p=>{if(!p.extras)return;Object.keys(p.extras).forEach(y=>{y!==" "&&h.set(y,{key:y,value:p.extras[y]})})})}),h},[n]),c=h=>{const d=h.name;if(n.map(v=>v.items).flat().some(v=>v.name===d&&v.name!==(e==null?void 0:e.name))){alert("   ,    ");return}const g={};l.forEach(({value:v},w)=>{i.get(w)&&(g[w]=v)});const y={name:h.name,price:h.price,extras:g,category:h.category};let S=n.find(v=>v.type===h.category);if(!S)throw new Error("Category not found");e?S.items=S.items.map(v=>v.name===e.name?y:v):S.items.push(y);const R=Du(Wu,`items_coco_car/${S.type}`);qv(R,S.items),localStorage.setItem("items_coco_car_1",JSON.stringify(n)),r([...n.map(v=>v.type!==h.category?v:S)].sort((v,w)=>v.type.localeCompare(w.type))),alert(e?"  ":"  ")};return x.jsx("div",{dir:"rtl",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:x.jsxs("form",{onSubmit:h=>{h.preventDefault(),c(Object.fromEntries(new FormData(h.target).entries()))},style:{background:"white",minWidth:"min(80%, 400px)",padding:"1rem",display:"flex",flexDirection:"column",borderRadius:"4px",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[x.jsx("h2",{style:{marginBottom:"1rem",textAlign:"center",fontWeight:"bold"},children:e?`  - ${e.name}`:"  "}),x.jsx("input",{type:"text",defaultValue:e==null?void 0:e.name,name:"name",placeholder:" ",style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"1rem"}}),x.jsx("input",{name:"price",type:"text",defaultValue:e==null?void 0:e.price,placeholder:"",style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"1rem"}}),x.jsx("select",{name:"category",defaultValue:e==null?void 0:e.category,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"1rem"},children:[x.jsx("option",{disabled:!0,children:" "},"catDefault"),...n.map(h=>x.jsx("option",{value:h.type,children:h.type},h.type))]}),x.jsx("br",{}),x.jsx("h3",{style:{marginBottom:"1rem",fontWeight:"bold"},children:" "}),x.jsx("div",{style:{display:"grid",width:"100%",alignContent:"center",gridTemplateColumns:"1fr 1fr 1fr"},children:Array.from(l.keys()).map(h=>{var d;return x.jsxs("div",{style:{width:"100%"},children:[x.jsx("h3",{children:h}),x.jsx("input",{type:"checkbox",name:h,defaultChecked:(d=e==null?void 0:e.extras)==null?void 0:d.hasOwnProperty(h),checked:a(h),onChange:()=>o(h),placeholder:" ",style:{width:"1rem",height:"1rem",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"1rem"}})]},h)})}),x.jsx("br",{}),x.jsx("button",{style:{background:ce.main,color:"white",padding:"0.5rem 1rem",border:"none",borderRadius:"4px",cursor:"pointer"},children:e?" ":" "}),x.jsx("button",{style:{background:ce.light,color:"black",padding:"0.5rem 1rem",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"1rem"},onClick:t,children:""})]})})};function nH(){const{categories:t,setCategories:e}=li(),[n,r]=X.useState(!1),[i,s]=X.useState(null),[o,a]=X.useState([]),l=async()=>{const h=Du(Wu,"orders"),d=await jk(h);return d.exists()?{...d.val(),id:d.key}:(console.log("No data available"),[])};V.useEffect(()=>{(async()=>{try{const d=await l();a(Object.values(d))}catch(d){console.error(d)}})()},[]);const c=h=>{let d=t.find(g=>g.type===h.category);if(!d)throw new Error("Category not found");d.items=d.items.filter(g=>g.name!==h.name);const p=Du(Wu,`items_coco_car/${d.type}`);qv(p,d.items),localStorage.setItem("items_coco_car_1",JSON.stringify(t)),e(t.map(g=>g.type!==h.category?g:d).sort((g,y)=>g.type.localeCompare(y.type))),alert("  ")};return n?x.jsx(tH,{existingItem:i,onClose:()=>{r(!1),s(null)}}):x.jsx("div",{className:"h-[100vh] p-4",children:x.jsxs("div",{dir:"rtl",children:[x.jsxs("div",{style:{background:ce.light,boxShadow:"0 0 10px rgba(0,0,0,0.1)",padding:"1rem"},children:[x.jsx("h2",{children:" "}),x.jsx("br",{}),x.jsx("button",{onClick:()=>{r(!0)},style:{background:ce.main,color:"white",padding:"0.5rem 1rem",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),x.jsx("br",{}),x.jsx("br",{}),x.jsx("h1",{children:""}),x.jsx("div",{className:"grid md:grid-cols-2 sm:grid-cols-1 gap-2 border-[1px] border-[lightgray] p-2 m-2 ",children:t.map(h=>x.jsxs("div",{className:"h-full p-2",children:[x.jsx("h2",{className:"font-bold text-[20px]",children:h.type}),x.jsx("div",{className:"grid md:grid-cols-2 sm:grid-cols-1  border-b-[1px] pb-2",children:h.items.map(d=>x.jsxs("div",{className:"py-2",children:[x.jsxs("h3",{className:"py-[4px]",children:[d.name," - ",d.price]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>c(d),style:{background:"#bd3333",color:"white",padding:"0.5rem 1rem",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),x.jsx("button",{onClick:()=>{s(d),r(!0)},style:{background:ce.main,color:"white",padding:"0.5rem 1rem",border:"none",borderRadius:"4px",cursor:"pointer"},children:""})]})]},d.name))})]},h.type))})]}),x.jsx("h1",{children:x.jsxs("div",{className:"pb-4",children:["",x.jsx("br",{}),x.jsx("br",{}),o.filter(h=>h.cardHolder).map(h=>{var d;return x.jsxs("div",{className:"border-[1px] border-[lightgray] p-2 m-2",children:[x.jsxs("h2",{className:"font-bold text-[20px]",children:[" ",h.id]}),x.jsxs("div",{children:[x.jsxs("div",{children:[x.jsx("b",{children:":"})," ",h.cardHolder]}),x.jsxs("div",{children:[x.jsx("b",{children:" "})," ",h.phone]}),x.jsxs("div",{dir:"rtl",children:[x.jsx("b",{children:""})," ",new Date(h.date).toLocaleDateString("he-IL")+"  "+new Date(h.date).toLocaleTimeString("he-IL")]})]}),x.jsx("br",{}),x.jsx("div",{children:x.jsx("b",{children:" "})}),x.jsx("div",{className:"grid grid-cols-1  border-b-[1px] pb-2",children:(d=h.items)==null?void 0:d.map(p=>x.jsxs("div",{className:"flex justify-between flex-col border-[1px] border-[#3e3e3e] my-2 p-2 min-w-[200px]",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:x.jsxs("b",{children:[p.item.name," ",x.jsx("span",{dir:"ltr",children:x.jsxs("span",{className:"text-[12px] font-normal",children:[p.quantity," ",x.jsx("span",{children:"x"})," "]})})]})}),x.jsxs("span",{children:[p.item.price,' "']})]}),p.selectedExtras&&x.jsx("div",{className:"my-2",children:Object.entries(p.selectedExtras).map(([g,y])=>x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:x.jsx("b",{children:g})}),x.jsx("span",{children:y.join(", ")})]}))})]},p.item.name+p.item.price))})]},h.id)})]})})]})})}function rH(){const{user:t}=uo(),{pathname:e}=Vc(),n=Ha();return x.jsx("div",{children:x.jsx(T2,{children:x.jsx(I2,{children:x.jsxs(jU,{children:[t&&t.isAdmin&&x.jsx("div",{className:"w-full p-2 cursor-pointer z-[9999]",dir:"ltr",style:{background:ce.dark},children:x.jsx("div",{children:e.includes("/admin")?x.jsx("span",{onClick:()=>n("/"),className:"text-white",children:"  "}):x.jsx("span",{onClick:()=>{n("/admin")},className:"text-white",children:"  "})})}),x.jsxs(k9,{children:[x.jsx(Co,{path:"/",element:x.jsx(G$,{})}),x.jsx(Co,{path:"/auth/login",element:x.jsx(cz,{})}),x.jsx(Co,{path:"/admin",element:x.jsx(nH,{})}),x.jsx(Co,{path:"/auth/register",element:x.jsx(fz,{})}),x.jsx(Co,{path:"/menu",element:x.jsx(eH,{})})]})]})})})})}_x(document.getElementById("root")).render(x.jsx(UU,{children:x.jsx(M9,{children:x.jsx(rH,{})})}));
